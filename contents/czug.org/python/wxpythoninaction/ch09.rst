---
created: 
creator: Benky
description: ''
title: 第九章 通过对话框让用户选择
---
<div lang="en" id="content" dir="ltr"><span id="top" class="anchor"/>
<span id="line-1" class="anchor"/><p class="line867"/><div class="table-of-contents"><p class="table-of-contents-heading">目录</p><ol><li><a href="#head-e436188ae8d4793ee2d5d3888a03392e0cc0fced">使用模式对话框工作</a></li><li><a href="#head-1e19ed85fa45b1bd5e3e69931675e77a69dcc796">使用标准对话框</a></li><li><a href="#head-43ae28adcea0aae7c197d458fc0c46973fd66f7b">创建向导</a></li><li><a href="#head-b148cabf57f2fab24389968b4c1a4b887ef6604d">显示启动提示</a></li><li><a href="#head-e3417018292e6a982b0ff654d947828ba5f4485c">使用验证器（validator）来管理对话框中的数据</a></li><li><a href="#head-d729c362c9abd817c46dbd41c3339b1423e90c98">本章小结</a></li></ol></div> <span id="line-2" class="anchor"/><span id="line-3" class="anchor"/><p class="line867">
</p><h2 id="head-e436188ae8d4793ee2d5d3888a03392e0cc0fced">1. 使用模式对话框工作</h2>
<span id="line-4" class="anchor"/><span id="line-5" class="anchor"/><span id="line-6" class="anchor"/><p class="line862">模式对话框用于与用户进行快速的交互或在用户可以执行程序的下一步之前，对话框中的信息必须被输入的时候。在<tt>wxPython</tt>中，有几个标准的函数用来显示基本的模式对话框。这些对话框包括警告框，单行文本域，和从列表中选择。在随后的部分，我们将给你展示这些对话框，以及如何使用这些预定义的函数来减轻你的工作量。 <span id="line-7" class="anchor"/><span id="line-8" class="anchor"/><span id="line-9" class="anchor"/></p><p class="line867">
</p><h3 id="head-b8493d15ff7cc834585ee09d3bcba4145e08f253">1.1. 如何创建一个模式对话框？</h3>
<span id="line-10" class="anchor"/><span id="line-11" class="anchor"/><span id="line-12" class="anchor"/><p class="line862">模式对话框阻塞了别的窗口部件接收用户事件，直到该模式对话框被关闭；换句话说，在它存在期间，用户一直被置于对话模式中。如图9.1所示，你不能总是根据外观来区别对话框和框架。在<tt>wxPython</tt>中，对话框与框架间的区别不是基于它们的外观的，而主要是它们处理事件的办法的实质。 <span id="line-13" class="anchor"/><span id="line-14" class="anchor"/><span id="line-15" class="anchor"/></p><p class="line867"><strong>图9.1</strong>  <span id="line-16" class="anchor"/><strong>一个模式对话框</strong> <span id="line-17" class="anchor"/><span id="line-18" class="anchor"/></p><p class="line867"><img title="attachment:w9.1.gif"
src="/moin/WxPythonInAction/ChapterNine?action=AttachFile&amp;do=get&amp;target=w9.1.gif" class="attachment"/> <span id="line-19" class="anchor"/><span id="line-20" class="anchor"/><span id="line-21" class="anchor"/></p><p class="line862">对话框的创建和配置与框架稍微有些不同。例9.1显示了产生图9.1的代码。所显示的对话框上的按钮被敲击后，该对话框就关闭了，并且一条消息被输出到<tt>stdout(</tt>标准输出)。 <span id="line-22" class="anchor"/><span id="line-23" class="anchor"/><span id="line-24" class="anchor"/></p><p class="line867"><strong>例9.1</strong>  <span id="line-25" class="anchor"/><strong>定义一个模式对话框</strong> <span id="line-26" class="anchor"/><span id="line-27" class="anchor"/><span id="line-28" class="anchor"/><span id="line-29" class="anchor"/><span id="line-30"
class="anchor"/><span id="line-31" class="anchor"/><span id="line-32" class="anchor"/><span id="line-33" class="anchor"/><span id="line-34" class="anchor"/><span id="line-35" class="anchor"/><span id="line-36" class="anchor"/><span id="line-37" class="anchor"/><span id="line-38" class="anchor"/><span id="line-39" class="anchor"/><span id="line-40" class="anchor"/><span id="line-41" class="anchor"/><span id="line-42" class="anchor"/><span id="line-43" class="anchor"/><span id="line-44" class="anchor"/><span id="line-45" class="anchor"/><span id="line-46" class="anchor"/><span id="line-47" class="anchor"/><span id="line-48" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
function isnumbered(obj) {
return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
var nlen = Math.max(0,chrs-(''+num).length), res = '';
while (nlen>0) { res += ' '; nlen-- }
return res+num+add;
}
function addnumber(did, nstart, nstep) {
var c = document.getElementById(did), l = c.firstChild, n = 1;
if (!isnumbered(c))
if (typeof nstart == 'undefined') nstart = 1;
if (typeof nstep  == 'undefined') nstep = 1;
n = nstart;
while (l != null) {
if (l.tagName == 'SPAN') {
var s = document.createElement('SPAN');
s.className = 'LineNumber'
s.appendChild(document.createTextNode(nformat(n,4,' ')));
n += nstep;
if (l.childNodes.length)
l.insertBefore(s, l.firstChild)
else
l.appendChild(s)
}
l = l.nextSibling;
}
return false;
}
function remnumber(did) {
var c = document.getElementById(did), l = c.firstChild;
if (isnumbered(c))
while (l != null) {
if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
l = l.nextSibling;
}
return false;
}
function togglenumber(did, nstart, nstep) {
var c = document.getElementById(did);
if (isnumbered(c)) {
remnumber(did);
} else {
addnumber(did,nstart,nstep);
}
return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-92048d341a4e9d2b0a7cda56ae0e6e65b0ff4043_000\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-92048d341a4e9d2b0a7cda56ae0e6e65b0ff4043_000', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-92048d341a4e9d2b0a7cda56ae0e6e65b0ff4043_000" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">import</span> <span class="ID">wx</span></span>
<span class="line"><span class="LineNumber">   2 </span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">class</span> <span class="ID">SubclassDialog</span><span class="Operator">(</span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">Dialog</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   4 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span><span class="Comment">#初始化对话框</span></span>
<span class="line"><span class="LineNumber">   5 </span>        <span class="ID">wx</span><span class="Operator">.</span><span class="ID">Dialog</span><span class="Operator">.</span><span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">None</span><span class="Operator">,</span> <span class="Operator">-</span><span class="Number">1</span><span class="Operator">,</span> <span class="String">'Dialog Subclass'</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   6 </span>                <span class="ID">size</span><span class="Operator">=</span><span class="Operator">(</span><span class="Number">300</span><span class="Operator">,</span> <span class="Number">100</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   7 </span>        <span class="ID">okButton</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">Button</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">ID_OK</span><span class="Operator">,</span> <span class="String">"OK"</span><span class="Operator">,</span> <span class="ID">pos</span><span class="Operator">=</span><span class="Operator">(</span><span
class="Number">15</span><span class="Operator">,</span> <span class="Number">15</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   8 </span>        <span class="ID">okButton</span><span class="Operator">.</span><span class="ID">SetDefault</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   9 </span>        <span class="ID">cancelButton</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">Button</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">ID_CANCEL</span><span class="Operator">,</span> <span class="String">"Cancel"</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">  10 </span>                <span class="ID">pos</span><span class="Operator">=</span><span class="Operator">(</span><span class="Number">115</span><span class="Operator">,</span> <span class="Number">15</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  11 </span></span>
<span class="line"><span class="LineNumber">  12 </span><span class="ResWord">if</span> <span class="ID">__name__</span> <span class="Operator">==</span> <span class="String">'__main__'</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  13 </span>    <span class="ID">app</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">PySimpleApp</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  14 </span>    <span class="ID">app</span><span class="Operator">.</span><span class="ID">MainLoop</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  15 </span>    <span class="ID">dialog</span> <span class="Operator">=</span> <span class="ID">SubclassDialog</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  16 </span>    <span class="ID">result</span> <span class="Operator">=</span> <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">ShowModal</span><span class="Operator">(</span><span class="Operator">)</span><span class="Comment">#显示模式对话框</span></span>
<span class="line"><span class="LineNumber">  17 </span>    <span class="ResWord">if</span> <span class="ID">result</span> <span class="Operator">==</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">ID_OK</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  18 </span>        <span class="ResWord">print</span> <span class="String">"OK"</span></span>
<span class="line"><span class="LineNumber">  19 </span>    <span class="ResWord">else</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  20 </span>        <span class="ResWord">print</span> <span class="String">"Cancel"</span></span>
<span class="line"><span class="LineNumber">  21 </span>    <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">Destroy</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-49" class="anchor"/><span id="line-50" class="anchor"/><p class="line862">与前一章的<tt>wx.Frame</tt>的例子比较，这儿有两个需要注意的事情。在<tt>__init__</tt>方法中，按钮是被直接添加到<tt>wx.Dialog</tt>，而非<tt>wx.Panel</tt>。面板在对话框中的使用比在框架中少的多，部分原因是因为对话框与框架相比倾向简单化，但主要是因为<tt>wx.Panel</tt>特性（标准系统背景和<tt>tab</tt>键横向切换控件焦点）已经默认存在于<tt>wx.Dialog</tt>中。 <span id="line-51" class="anchor"/><span id="line-52" class="anchor"/></p><p
class="line862">要显示为模式对话框，使用<tt>ShowModal()</tt>方法。这与用于框架的的<tt>Show()</tt>方法在对程序的执行上有不同的作用。在调用<tt>ShowModal()</tt>后你的应用程序将处于等待中，直到对话框被取消。 <span id="line-53" class="anchor"/><span id="line-54" class="anchor"/></p><p
class="line862">模式将保持到对话框方法<tt>EndModal(retCode)</tt>被调用，该方法关闭对话框。参数<tt>retCode</tt>是由<tt>ShowModal()</tt>方法返回的一个整数值。典型的，应用程序利用这个返回值来知道用户是如何关闭对话框的，以控制以后的操作。但是结束这个模式并没有销毁或甚至关闭对话框。保持对话框的存在可能是一件好事，因为这意味你可以把用户选择的信息存储为对话框实例的数据成员，并且即使在对话框被关闭后也能从对话框重新获得那些信息。在接下来的部分，我们将看一些我们使用对话框处理程序中用户输入的数据的例子。 <span id="line-55" class="anchor"/><span id="line-56" class="anchor"/></p><p
class="line862">由于例9.1中没有定义事件处理器，你可能会惊奇对话框是如何响应按钮敲击的。这个行为已经定义在<tt>wxDialog</tt>中了。有两个预定义的<tt>wxPython</tt> <tt>ID</tt>号，它们在对话框中有特殊的意思。当对话框中的一个使用<tt>wx.ID_OK</tt> <tt>ID</tt>的<tt>wx.Button</tt>被敲击时，模式就结束了，对话框也关闭了，<tt>wx.ID_OK</tt>就是<tt>ShowModal()</tt>调用返回的值。同样，一个使用<tt>wx.ID_CANCEL</tt> <tt>ID</tt>的按钮做相同的事情，但是<tt>ShowModal()</tt>的返回值是<tt>wx.ID_CANCEL</tt>。 <span id="line-57" class="anchor"/><span id="line-58" class="anchor"/></p><p
class="line862">例9.1显示了处理模式对话框的一个典型的方法。在对话框被调用后，返回值被用作<tt>if</tt>语句中的测试。在这种情况下，我们简单地打印结果，在更复杂的例子中，<tt>wx.ID_OK</tt>将执行用户在对话框中所要求的动作，如打开文件或选择颜色。 <span id="line-59" class="anchor"/><span id="line-60" class="anchor"/></p><p
class="line862">典型的，你在完成对对话框的使用后，你应该显式地销毁它。这通知C++对象它应该自我销毁，然后这将使得它的<tt>Python</tt>部分被作为垃圾回收。如果你希望在你的应用程序中，以后再次使用该对话框时不重建它，以加速对话框的响应时间，那么你可以保持对该对话框的一个引用，并当你需要再次激活它时，简单地调用它的<tt>ShowModal()</tt>方法。当应用程序准备退出时，确保已销毁了它，否则<tt>MainLoop()</tt>将仍将它作为一个存在的顶级窗口，并且程序将不能正常退出。 <span id="line-61" class="anchor"/><span id="line-62" class="anchor"/><span id="line-63" class="anchor"/></p><p class="line867">
</p><h3 id="head-5e387220b0fe4eae3161d8911025733ad5713c80">1.2. 如何创建一个警告框？</h3>
<span id="line-64" class="anchor"/><span id="line-65" class="anchor"/><span id="line-66" class="anchor"/><p class="line862">经由一个对话框与用户交互的最简单的三个办法分别是：<tt>wx.MessageDialog</tt>，它是一个警告框、<tt>wx.TextEntryDialog</tt>，它提示用户去输入一些短的文本、<tt>wx.SingleChoiceDialog</tt>，它使用户能够从一个有效选项列表中进行选择。在接下来的三个小节中，我们将论这些简单的对话框。 <span id="line-67" class="anchor"/><span id="line-68" class="anchor"/></p><p
class="line862">消息对话框显示一个短的消息，并使用户通过按下按钮来作响应。通常，消息框被用作去显示重要的警告、<tt>yes</tt>/<tt>no</tt>问题、或询问用户是否继续某种操作。图9.2显示了一个典型的消息框。 <span id="line-69" class="anchor"/><span id="line-70" class="anchor"/><span id="line-71" class="anchor"/></p><p class="line867"><strong>图9.2</strong>  <span id="line-72" class="anchor"/><span id="line-73" class="anchor"/></p><p class="line867"><img title="attachment:w9.2.gif" src="/moin/WxPythonInAction/ChapterNine?action=AttachFile&amp;do=get&amp;target=w9.2.gif" class="attachment"/> <span id="line-74"
class="anchor"/><span id="line-75" class="anchor"/><span id="line-76" class="anchor"/></p><p class="line874">使用消息框是十分的简单。例9.2显示了创建一个消息框的两种办法。 <span id="line-77" class="anchor"/><span id="line-78" class="anchor"/><span id="line-79" class="anchor"/></p><p class="line867"><strong>例9.2</strong>  <span id="line-80" class="anchor"/><strong>创建一个消息框</strong> <span id="line-81" class="anchor"/><span id="line-82" class="anchor"/><span id="line-83" class="anchor"/><span id="line-84" class="anchor"/><span id="line-85" class="anchor"/><span id="line-86" class="anchor"/><span
id="line-87" class="anchor"/><span id="line-88" class="anchor"/><span id="line-89" class="anchor"/><span id="line-90" class="anchor"/><span id="line-91" class="anchor"/><span id="line-92" class="anchor"/><span id="line-93" class="anchor"/><span id="line-94" class="anchor"/><span id="line-95" class="anchor"/><span id="line-96" class="anchor"/><span id="line-97" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-4cfc6ea259fab0adc587d1be5248b22c29290fe0_001\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-4cfc6ea259fab0adc587d1be5248b22c29290fe0_001', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-4cfc6ea259fab0adc587d1be5248b22c29290fe0_001" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">import</span> <span class="ID">wx</span></span>
<span class="line"><span class="LineNumber">   2 </span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">if</span> <span class="ID">__name__</span> <span class="Operator">==</span> <span class="String">"__main__"</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   4 </span>    <span class="ID">app</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">PySimpleApp</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   5 </span></span>
<span class="line"><span class="LineNumber">   6 </span><span class="Comment"># 方法一，使用类</span></span>
<span class="line"><span class="LineNumber">   7 </span><span class="Comment"/>    <span class="ID">dlg</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">MessageDialog</span><span class="Operator">(</span><span class="ID">None</span><span class="Operator">,</span> <span class="String">"Is this explanation OK?"</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   8 </span>                          <span class="String">'A Message Box'</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   9 </span>                          <span class="ID">wx</span><span class="Operator">.</span><span class="ID">YES_NO</span> <span class="Operator">|</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">ICON_QUESTION</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  10 </span>    <span class="ID">retCode</span> <span class="Operator">=</span> <span class="ID">dlg</span><span class="Operator">.</span><span class="ID">ShowModal</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  11 </span>    <span class="ResWord">if</span> <span class="Operator">(</span><span class="ID">retCode</span> <span class="Operator">==</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">ID_YES</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  12 </span>        <span class="ResWord">print</span> <span class="String">"yes"</span></span>
<span class="line"><span class="LineNumber">  13 </span>    <span class="ResWord">else</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  14 </span>        <span class="ResWord">print</span> <span class="String">"no"</span></span>
<span class="line"><span class="LineNumber">  15 </span>    <span class="ID">dlg</span><span class="Operator">.</span><span class="ID">Destroy</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-98" class="anchor"/><span id="line-99" class="anchor"/><p class="line874">#1 方法二，使用函数 <span id="line-100" class="anchor"/></p><ul><li style="list-style-type: none;"><p class="line891"><tt>retCode</tt> = <tt>wx.MessageBox(</tt>"<tt>Is</tt> <tt>this</tt> <tt>way</tt> <tt>easier</tt>?", "<tt>Via</tt> <tt>Function</tt>", <span id="line-101" class="anchor"/></p><ul><li style="list-style-type: none;"><p class="line891"><tt>wx.YES_NO</tt> | <tt>wx.ICON_QUESTION)</tt> <span id="line-102" class="anchor"/><span id="line-103"
class="anchor"/></p></li></ul></li></ul><p class="line862">例9.2创建了两个消息框，一个在另一个的后面。这第一个方法是创建类<tt>wx.MessageDialog</tt>的一个实例，并使用<tt>ShowModal()</tt>来显示它。 <span id="line-104" class="anchor"/><span id="line-105" class="anchor"/><span id="line-106" class="anchor"/></p><p class="line867"><strong>使用<tt>wx.MessageDialog</tt>类</strong> <span id="line-107" class="anchor"/><span id="line-108" class="anchor"/></p><p class="line862">使用<tt>wx.MessageDialog</tt>的构造函数，你可以设置对话框的消息和按钮，构造函数如下： <span id="line-109"
class="anchor"/><span id="line-110" class="anchor"/></p><p class="line867"><tt>wx.MessageDialog(parent</tt>, <tt>message</tt>, <tt>caption</tt>="<tt>Message</tt> <tt>box</tt>",  <span id="line-111" class="anchor"/></p><ul><li style="list-style-type: none;"><p class="line891"><tt>style</tt>=<tt>wx.OK</tt> | <tt>wx.CANCEL</tt>, <tt>pos</tt>=<tt>wx.DefaultPosition)</tt> <span id="line-112" class="anchor"/><span id="line-113" class="anchor"/></p></li></ul><p
class="line867"><tt>message</tt>参数是实际显示在对话框中的文本。如果消息字符串包含\n字符，那么文本将在此换行。<tt>caption</tt>参数显示在对话框的标题栏中。<tt>pos</tt>参数使你可以指定对话框显示在屏幕上的位置——在微软<tt>Windows</tt>下，这个参数将被忽略。 <span id="line-114" class="anchor"/><span id="line-115" class="anchor"/></p><p class="line867"><tt>wx.MessageDialog</tt>的样式标记分为两类。第一类控制显示在对话框中的按钮。表9.1说明了这些样式。 <span id="line-116" class="anchor"/><span id="line-117" class="anchor"/><span id="line-118" class="anchor"/></p><p class="line867"><strong>表9.1
<tt>wx.MessageDialog</tt>的按钮样式</strong> <span id="line-119" class="anchor"/><span id="line-120" class="anchor"/></p><div><table><tbody><tr>  <td><p class="line891"><tt>wx.CANCEL</tt></p></td>
<td><p class="line862">包括一个<tt>cancel</tt>（取消）按钮。这个按钮有一个<tt>ID</tt>值<tt>wx.ID_CANCEL</tt>。</p></td>
</tr>
<tr>  <td><span id="line-121" class="anchor"/><p class="line891"><tt>wx.NO_DEFAULT</tt></p></td>
<td><p class="line862">在一个<tt>wx.YES_NO</tt>对话框中，<tt>No</tt>（否）按钮是默认的。</p></td>
</tr>
<tr>  <td><span id="line-122" class="anchor"/><p class="line891"><tt>wx.OK</tt></p></td>
<td><p class="line862">包括一个<tt>OK</tt>按钮，这个按钮有一个<tt>ID</tt>值<tt>wx.ID_OK</tt>。</p></td>
</tr>
<tr>  <td><span id="line-123" class="anchor"/><p class="line891"><tt>wx.YES_DEFAULT</tt></p></td>
<td><p class="line862">在一个<tt>wx.YES_NO</tt>对话框中，<tt>Yes</tt>按钮是默认的。这是默认行为。</p></td>
</tr>
<tr>  <td><span id="line-124" class="anchor"/><p class="line891"><tt>wx.YES_NO</tt></p></td>
<td><p class="line862">包括<tt>Yes</tt>和<tt>No</tt>按钮，各自的<tt>ID</tt>值分别是<tt>wx.ID_YES</tt>和<tt>wx.ID_NO</tt>。</p></td>
</tr>
</tbody></table></div><span id="line-125" class="anchor"/><span id="line-126" class="anchor"/><p class="line874">第二套样式标记控制紧挨着消息文本的图标。它们显示在表9.2中。 <span id="line-127" class="anchor"/><span id="line-128" class="anchor"/><span id="line-129" class="anchor"/></p><p class="line867"><strong>表9.2 <tt>wx.MessageDialog</tt>的图标样式</strong> <span id="line-130" class="anchor"/><span id="line-131" class="anchor"/></p><div><table><tbody><tr>  <td><p class="line891"><tt>wx.ICON_ERROR</tt></p></td>
<td><p class="line862">表示一个错误的图标。</p></td>
</tr>
<tr>  <td><span id="line-132" class="anchor"/><p class="line891"><tt>wx.ICON_EXCLAMATION</tt></p></td>
<td><p class="line862">表示警告的图标。</p></td>
</tr>
<tr>  <td><span id="line-133" class="anchor"/><p class="line891"><tt>wx.ICON_HAND</tt></p></td>
<td><p class="line862">同<tt>wx.ICON_ERROR</tt>。</p></td>
</tr>
<tr>  <td><span id="line-134" class="anchor"/><p class="line891"><tt>wx.ICON_INFORMATION</tt></p></td>
<td><p class="line862">信息图标，字母i。</p></td>
</tr>
<tr>  <td><span id="line-135" class="anchor"/><p class="line891"><tt>wx.ICON_QUESTION</tt></p></td>
<td><p class="line862">问号图标。</p></td>
</tr>
</tbody></table></div><span id="line-136" class="anchor"/><span id="line-137" class="anchor"/><p class="line862">最后，你可以使用样式<tt>wx.STAY_ON_TOP</tt>将对话框显示在系统中任何其它窗口的上面，包括系统窗口和<tt>wxPython</tt>应用程序窗口。 <span id="line-138" class="anchor"/><span id="line-139" class="anchor"/></p><p class="line862">你在例9.2所见到的，对话框通过使用<tt>ShowModal()</tt>被调用。根据所显示的按钮，返回的结果是以下值之一：<tt>wx.ID_OK</tt>,  <tt>wx.ID_CANCEL</tt>，<tt>wx.ID_YES</tt>, 或
<tt>wx.ID_NO</tt>。如同其它对话框的情况，你通常使用这些值来控制程序的执行。 <span id="line-140" class="anchor"/><span id="line-141" class="anchor"/><span id="line-142" class="anchor"/></p><p class="line867"><strong>使用<tt>wx.MessageBox()</tt>函数</strong> <span id="line-143" class="anchor"/><span id="line-144" class="anchor"/></p><p class="line862">例9.2中的#1显示了一个调用消息框的更简短的方法。这个便利的函数<tt>wx.MessageBox()</tt>创建对话框，调用<tt>ShowModal()</tt>，并且返回下列值之一：<tt>wx.YES</tt>, <tt>wx.NO</tt>, <tt>wx.CANCEL</tt>, 或
<tt>wx.OK</tt>。函数的形式比<tt>MessageDialog</tt>的构造函数更简单，如下所示： <span id="line-145" class="anchor"/><span id="line-146" class="anchor"/><span id="line-147" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-d0e642d61b9561d6617618a75ab23927a01e3ac2_002\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-d0e642d61b9561d6617618a75ab23927a01e3ac2_002', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-d0e642d61b9561d6617618a75ab23927a01e3ac2_002" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">MessageBox</span><span class="Operator">(</span><span class="ID">message</span><span class="Operator">,</span> <span class="ID">caption</span><span class="Operator">=</span><span class="String">"Message"</span><span class="Operator">,</span> <span class="ID">style</span><span class="Operator">=</span><span class="ID">wx</span><span
class="Operator">.</span><span class="ID">OK</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-148" class="anchor"/><p class="line862">在这个例子中，参数<tt>message</tt>, <tt>caption</tt>, <tt>style</tt>的意思和构造函数中的相同，你可以使用所有相同的样式标记。正如我们贯穿本章将看到的，在<tt>wxPython</tt>预定义的几个对话框都有便利的函数。在你为单一的使用创建对话框的时候，你的选择有一个优先的问题。如果你计划束缚住对话框以便多次调用它，那么你可能会优先选择去实例化对象以便你能够束缚该引用，而不使用函数的方法，尽管这对于这些简单的对话框来说，所节约的时间可以忽略不计。 <span id="line-149" class="anchor"/><span
id="line-150" class="anchor"/></p><p class="line862">要在你的消息框中显示大量的文本（例如，终端用户许可证的显示），你可以使用<tt>wxPython</tt>特定的类<tt>wx.lib.dialogs.ScrolledMessageDialog</tt>，它包含如下的构造函数： <span id="line-151" class="anchor"/><span id="line-152" class="anchor"/><span id="line-153" class="anchor"/><span id="line-154" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-be4adba1c18a28b0048d16f26e278b49c8043a3a_003\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-be4adba1c18a28b0048d16f26e278b49c8043a3a_003', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-be4adba1c18a28b0048d16f26e278b49c8043a3a_003" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">lib</span><span class="Operator">.</span><span class="ID">dialogs</span><span class="Operator">.</span><span class="ID">ScrolledMessageDialog</span><span class="Operator">(</span><span class="ID">parent</span><span class="Operator">,</span> <span class="ID">msg</span><span class="Operator">,</span> <span
class="ID">caption</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   2 </span>        <span class="ID">pos</span><span class="Operator">=</span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">wxDefaultPosition</span><span class="Operator">,</span> <span class="ID">size</span><span class="Operator">=</span><span class="Operator">(</span><span class="Number">500</span><span class="Operator">,</span><span class="Number">300</span><span class="Operator">)</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-155" class="anchor"/><p class="line862">这个对话框不使用本地消息框控件，它根据别的<tt>wxPython</tt>窗口部件来创建一个对话框。它只显示一个<tt>OK</tt>按钮，并且没有更多的样式信息。 <span id="line-156" class="anchor"/><span id="line-157" class="anchor"/><span id="line-158" class="anchor"/></p><p class="line867">
</p><h3 id="head-532fb71c12660058b67d0f29c01473028cf7bcfc">1.3. 如何从用户得到短的文本？</h3>
<span id="line-159" class="anchor"/><span id="line-160" class="anchor"/><span id="line-161" class="anchor"/><p class="line862">这第二个简单类型的对话框是<tt>wx.TextEntryDialog</tt>，它被用于从用户那里得到短的文本输入。它通常用在在程序的开始时要求用户名或密码的时候，或作为一个数据输入表单的基本替代物。图9.3显示了一个典型的文本对话框。 <span id="line-162" class="anchor"/><span id="line-163" class="anchor"/><span id="line-164" class="anchor"/></p><p class="line867"><strong>图9.3</strong>  <span id="line-165"
class="anchor"/><strong>文本输入标准对话框</strong> <span id="line-166" class="anchor"/><span id="line-167" class="anchor"/></p><p class="line867"><img title="attachment:w9.3.gif" src="/moin/WxPythonInAction/ChapterNine?action=AttachFile&amp;do=get&amp;target=w9.3.gif" class="attachment"/> <span id="line-168" class="anchor"/><span id="line-169" class="anchor"/><span id="line-170" class="anchor"/></p><p class="line874">例9.3显示了产生图9.3的代码 <span id="line-171" class="anchor"/><span id="line-172" class="anchor"/><span id="line-173"
class="anchor"/></p><p class="line867"><strong>例9.3</strong> <span id="line-174" class="anchor"/><span id="line-175" class="anchor"/><span id="line-176" class="anchor"/><span id="line-177" class="anchor"/><span id="line-178" class="anchor"/><span id="line-179" class="anchor"/><span id="line-180" class="anchor"/><span id="line-181" class="anchor"/><span id="line-182" class="anchor"/><span id="line-183" class="anchor"/><span id="line-184" class="anchor"/><span id="line-185" class="anchor"/><span id="line-186" class="anchor"/></p><div
lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-fefb2d4e70b8bfd9b6e3e6565dc31bc3e707207e_004\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-fefb2d4e70b8bfd9b6e3e6565dc31bc3e707207e_004', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-fefb2d4e70b8bfd9b6e3e6565dc31bc3e707207e_004" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">import</span> <span class="ID">wx</span></span>
<span class="line"><span class="LineNumber">   2 </span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">if</span> <span class="ID">__name__</span> <span class="Operator">==</span> <span class="String">"__main__"</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   4 </span>    <span class="ID">app</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">PySimpleApp</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   5 </span>    <span class="ID">dialog</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">TextEntryDialog</span><span class="Operator">(</span><span class="ID">None</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   6 </span>            <span class="String">"What kind of text would you like to enter?"</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   7 </span>            <span class="String">"Text Entry"</span><span class="Operator">,</span> <span class="String">"Default Value"</span><span class="Operator">,</span> <span class="ID">style</span><span class="Operator">=</span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">OK</span><span class="Operator">|</span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">CANCEL</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   8 </span>    <span class="ResWord">if</span> <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">ShowModal</span><span class="Operator">(</span><span class="Operator">)</span> <span class="Operator">==</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">ID_OK</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   9 </span>        <span class="ResWord">print</span> <span class="String">"You entered: %s"</span> <span class="Operator">%</span> <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">GetValue</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  10 </span></span>
<span class="line"><span class="LineNumber">  11 </span>    <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">Destroy</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-187" class="anchor"/><p class="line862">在前一小节，我们创建了一个对话框类的实例，在这里，我们要用到的对话框类是<tt>wx.TextEntryDialog</tt>。该类的构造函数比简单消息对话框要复杂一些： <span id="line-188" class="anchor"/><span id="line-189" class="anchor"/><span id="line-190" class="anchor"/><span id="line-191" class="anchor"/><span id="line-192" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-fad6d6a52cfbf881a2184ff13052871e786f7c28_005\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-fad6d6a52cfbf881a2184ff13052871e786f7c28_005', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-fad6d6a52cfbf881a2184ff13052871e786f7c28_005" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">TextEntryDialog</span><span class="Operator">(</span><span class="ID">parent</span><span class="Operator">,</span> <span class="ID">message</span><span class="Operator">,</span> <span class="ID">caption</span><span class="Operator">=</span><span class="String">"Please enter text"</span><span
class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   2 </span>    <span class="ID">defaultValue</span><span class="Operator">=</span><span class="String">""</span><span class="Operator">,</span> <span class="ID">style</span><span class="Operator">=</span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">OK</span> <span class="Operator">|</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">CANCEL</span> <span class="Operator">|</span> <span
class="ID">wx</span><span class="Operator">.</span><span class="ID">CENTRE</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   3 </span>    <span class="ID">pos</span><span class="Operator">=</span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">DefaultPosition</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-193" class="anchor"/><p class="line867"><tt>message</tt>参数是显示在对话框中的文本提示，而<tt>caption</tt>显示在标题栏中。<tt>defaultValue</tt>显示在文本框中的默认值。<tt>style</tt>可以包括<tt>wx.OK</tt>和<tt>wx.CANCEL</tt>，它显示适当的按钮。 <span id="line-194" class="anchor"/><span id="line-195" class="anchor"/></p><p
class="line862">几个<tt>wx.TextCtrl</tt>的样式也可以用在这里。最有用的应该是<tt>wx.TE_PASSWORD</tt>，它掩饰所输入的真实密码。你也可以使用<tt>wx.TE_MULTILINE</tt>来使用户能够在对话框中输入多行文本，也可以使用<tt>wx.TE_LEFT</tt>, <tt>wx.TE_CENTRE</tt>, 和 <tt>wx.TE_RIGHT</tt>来调整所输入的文本的对齐位置。 <span id="line-196" class="anchor"/><span id="line-197" class="anchor"/></p><p
class="line862">例9.3的最后显示了在文本框和对话框之间的另一区别。用户所输入的信息被存储在该对话框实例中，并且以后必须应用程序获取。在这种情况下，你可以使用对话框的<tt>GetValue()</tt>方法来得到该值。记住，如果用户按下<tt>Cancel</tt>（取消）去退出该对话框，这意味他们不想去使用他所键入的值。你也可以在程序中使用<tt>SetValue()</tt>方法来设置该值。 <span id="line-198" class="anchor"/><span id="line-199" class="anchor"/></p><p class="line874">下面这些是使用文本对话框的便利函数： <span id="line-200"
class="anchor"/><span id="line-201" class="anchor"/></p><p class="line862">1、<tt>wx.GetTextFromUser()</tt> <span id="line-202" class="anchor"/>2、<tt>wx.GetPasswordFromUser()</tt> <span id="line-203" class="anchor"/>3、<tt>wx.GetNumberFromUser()</tt> <span id="line-204" class="anchor"/><span id="line-205" class="anchor"/></p><p class="line862">其中和例9.3的用处最近似的是<tt>wx.GetTextFromUser()</tt>： <span id="line-206" class="anchor"/><span id="line-207" class="anchor"/><span id="line-208"
class="anchor"/><span id="line-209" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-a2aa87bce10f642fb82c4e40420ca76b74fa8806_006\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-a2aa87bce10f642fb82c4e40420ca76b74fa8806_006', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-a2aa87bce10f642fb82c4e40420ca76b74fa8806_006" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">GetTextFromUser</span><span class="Operator">(</span><span class="ID">message</span><span class="Operator">,</span> <span class="ID">caption</span><span class="Operator">=</span><span class="String">"Input text"</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   2 </span>    <span class="ID">default_value</span><span class="Operator">=</span><span class="String">""</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">=</span><span class="ID">None</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-210" class="anchor"/><p class="line862">这里的<tt>message</tt>, <tt>caption</tt>, <tt>default_value</tt>, 和 <tt>parent</tt>与<tt>wx.TextEntryDialog</tt>的构造函数中的一样。如果用户按下<tt>OK</tt>，该函数的返回值是用户所输入的字符串。如果用户按下<tt>Cancel</tt>，该函数返回空字符串。 <span id="line-211" class="anchor"/><span id="line-212" class="anchor"/></p><p class="line862">如果你希望用户输入密码，你可以使用<tt>wx.GetPasswordFromUser()</tt>函数： <span
id="line-213" class="anchor"/><span id="line-214" class="anchor"/><span id="line-215" class="anchor"/><span id="line-216" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-35c5eaaa2eb3db57b1a19036a870c80f74a036a3_007\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-35c5eaaa2eb3db57b1a19036a870c80f74a036a3_007', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-35c5eaaa2eb3db57b1a19036a870c80f74a036a3_007" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">GetPasswordFromUser</span><span class="Operator">(</span><span class="ID">message</span><span class="Operator">,</span> <span class="ID">caption</span><span class="Operator">=</span><span class="String">"Input text"</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   2 </span>    <span class="ID">default_value</span><span class="Operator">=</span><span class="String">""</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">=</span><span class="ID">None</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-217" class="anchor"/><p class="line862">这里的参数意义和前面的一样。用户的输入被显示为星号，如果用户按下<tt>OK</tt>，该函数的返回值是用户所输入的字符串。如果用户按下<tt>Cancel</tt>，该函数返回空字符串。 <span id="line-218" class="anchor"/><span id="line-219" class="anchor"/></p><p class="line862">最后，你可以使用<tt>wx.GetNumberFromUser()</tt>要求用户输入一个数字： <span id="line-220" class="anchor"/><span id="line-221" class="anchor"/><span
id="line-222" class="anchor"/><span id="line-223" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-3ea306566cc5b47f95e85749fe3bd91ff9208080_008\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-3ea306566cc5b47f95e85749fe3bd91ff9208080_008', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-3ea306566cc5b47f95e85749fe3bd91ff9208080_008" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">GetNumberFromUser</span><span class="Operator">(</span><span class="ID">message</span><span class="Operator">,</span> <span class="ID">prompt</span><span class="Operator">,</span> <span class="ID">caption</span><span class="Operator">,</span> <span
class="ID">value</span><span class="Operator">,</span> <span class="ID">min</span><span class="Operator">=</span><span class="Number">0</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   2 </span>    <span class="ID">max</span><span class="Operator">=</span><span class="Number">100</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">=</span><span class="ID">None</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-224" class="anchor"/><p
class="line862">这里的参数的意义有一点不同，<tt>message</tt>是显在<tt>prompt</tt>上部的任意长度的消息，<tt>value</tt>参数是默认显示在文本框中的长整型值。<tt>min</tt>和<tt>max</tt>参数为用户的输入限定一个范围。如果用户按下<tt>OK</tt>按钮退出的话，该方法返回所输入的值，并转换为长整型。如果这个值不能转换为一个数字，或不在指定的范围内，那么该函数返回-1，这意味如果你将该函数用于负数的范围的话，你可能要考虑一个转换的方法。 <span id="line-225"
class="anchor"/><span id="line-226" class="anchor"/><span id="line-227" class="anchor"/></p><p class="line867">
</p><h3 id="head-1bb648855149cbf5ef806f630a3e19c795e544c4">1.4. 如何用对话框显示选项列表？</h3>
<span id="line-228" class="anchor"/><span id="line-229" class="anchor"/><span id="line-230" class="anchor"/><p class="line862">如果给你的用户一个空的文本输入域显得太自由了，那么你可以使用<tt>wx.SingleChoiceDialog</tt>来让他们在一组选项中作单一的选择。图9.4显示了一个例子。 <span id="line-231" class="anchor"/><span id="line-232" class="anchor"/><span id="line-233" class="anchor"/></p><p class="line867"><strong>图9.4</strong>  <span id="line-234"
class="anchor"/><strong>一个单选对话框</strong> <span id="line-235" class="anchor"/><span id="line-236" class="anchor"/></p><p class="line867"><img title="attachment:w9.4.gif" src="/moin/WxPythonInAction/ChapterNine?action=AttachFile&amp;do=get&amp;target=w9.4.gif" class="attachment"/> <span id="line-237" class="anchor"/><span id="line-238" class="anchor"/><span id="line-239" class="anchor"/></p><p class="line874">例9.4显示了产生图9.4的代码 <span
id="line-240" class="anchor"/><span id="line-241" class="anchor"/><span id="line-242" class="anchor"/></p><p class="line867"><strong>例9.4</strong>  <span id="line-243" class="anchor"/><strong>显示一个选择列表对话框</strong> <span id="line-244" class="anchor"/><span id="line-245" class="anchor"/><span id="line-246" class="anchor"/><span id="line-247" class="anchor"/><span id="line-248" class="anchor"/><span id="line-249" class="anchor"/><span id="line-250"
class="anchor"/><span id="line-251" class="anchor"/><span id="line-252" class="anchor"/><span id="line-253" class="anchor"/><span id="line-254" class="anchor"/><span id="line-255" class="anchor"/><span id="line-256" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-c9b1167460a169c153aab54496113fac262e0bba_009\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-c9b1167460a169c153aab54496113fac262e0bba_009', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-c9b1167460a169c153aab54496113fac262e0bba_009" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">import</span> <span class="ID">wx</span></span>
<span class="line"><span class="LineNumber">   2 </span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">if</span> <span class="ID">__name__</span> <span class="Operator">==</span> <span class="String">"__main__"</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   4 </span>    <span class="ID">app</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">PySimpleApp</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   5 </span>    <span class="ID">choices</span> <span class="Operator">=</span> <span class="Operator">[</span><span class="String">"Alpha"</span><span class="Operator">,</span> <span class="String">"Baker"</span><span class="Operator">,</span> <span class="String">"Charlie"</span><span class="Operator">,</span> <span class="String">"Delta"</span><span class="Operator">]</span></span>
<span class="line"><span class="LineNumber">   6 </span>    <span class="ID">dialog</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">SingleChoiceDialog</span><span class="Operator">(</span><span class="ID">None</span><span class="Operator">,</span> <span class="String">"Pick A Word"</span><span class="Operator">,</span> <span class="String">"Choices"</span><span
class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   7 </span>            <span class="ID">choices</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   8 </span>    <span class="ResWord">if</span> <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">ShowModal</span><span class="Operator">(</span><span class="Operator">)</span> <span class="Operator">==</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">ID_OK</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   9 </span>        <span class="ResWord">print</span> <span class="String">"You selected: %s\n"</span> <span class="Operator">%</span> <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">GetStringSelection</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  10 </span></span>
<span class="line"><span class="LineNumber">  11 </span>    <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">Destroy</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-257" class="anchor"/><p class="line867"><tt>wx.SingleChoiceDialog</tt>的构造函数如下所示： <span id="line-258" class="anchor"/><span id="line-259" class="anchor"/><span id="line-260" class="anchor"/><span id="line-261" class="anchor"/><span id="line-262" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-ffcfc9dab6c600ca904ef42ba8a88d61c98e56e4_010\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-ffcfc9dab6c600ca904ef42ba8a88d61c98e56e4_010', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-ffcfc9dab6c600ca904ef42ba8a88d61c98e56e4_010" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">SingleChoiceDialog</span><span class="Operator">(</span><span class="ID">parent</span><span class="Operator">,</span> <span class="ID">message</span><span class="Operator">,</span> <span class="ID">caption</span><span
class="Operator">,</span> <span class="ID">choices</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   2 </span>        <span class="ID">clientData</span><span class="Operator">=</span><span class="ID">None</span><span class="Operator">,</span> <span class="ID">style</span><span class="Operator">=</span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">OK</span> <span class="Operator">|</span> <span class="ID">wx</span><span class="Operator">.</span><span
class="ID">CANCEL</span> <span class="Operator">|</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">CENTRE</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   3 </span>        <span class="ID">pos</span><span class="Operator">=</span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">DefaultPosition</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-263" class="anchor"/><p class="line867"><tt>message</tt>和<tt>caption</tt>参数的意义与前面的一样，分别显示在对话框和标题栏中。<tt>choices</tt>参数要求一个字符串的列表，它们是你呈现在对话框中的选项。<tt>style</tt>参数有三个项，这是默认的，分别是<tt>OK</tt>按钮、<tt>Cancle</tt>按钮和使对话框在屏幕中居中。<tt>centre</tt>选项和<tt>pos</tt>参数在<tt>Windows</tt>操作系统上不工作。 <span id="line-264"
class="anchor"/><span id="line-265" class="anchor"/></p><p class="line862">如果你想在用户看见对话框之前，设置它的默认选项，使用<tt>SetSelection(selection)</tt>方法。参数<tt>selection</tt>是选项的索引值，而非实际选择的字符串。在用户选择了一个选项后，你即可以使用<tt>GetSelection()</tt>——它返回所选项的索引值，也可以使用<tt>GetStringSelection()</tt>——它返回实际所选的字符串，来得到它。 <span id="line-266" class="anchor"/><span
id="line-267" class="anchor"/></p><p class="line862">有两个用于单选对话框的便利函数。第一个是<tt>wx.GetSingleChoice</tt>，它返回用户所选的字符串： <span id="line-268" class="anchor"/><span id="line-269" class="anchor"/></p><p class="line867"><tt>wx.GetSingleChoice(message</tt>, <tt>caption</tt>, <tt>aChoices</tt>, <tt>parent</tt>=<tt>None)</tt> <span id="line-270" class="anchor"/><span id="line-271" class="anchor"/></p><p
class="line862">参数<tt>message</tt>, <tt>caption</tt>, 和<tt>parent</tt>的意义和<tt>wx.SingleChoiceDialog</tt>构造函数的一样。<tt>aChoices</tt>参数是选项的列表。如果用户按下<tt>OK</tt>，则返回值是所选的字符串，如果用户按下<tt>Cancel</tt>，则返回值是空字符串。这意味如果空字符是一个有效的选择的话，那么你就不该使用这个函数。 <span id="line-272" class="anchor"/><span id="line-273" class="anchor"/></p><p
class="line862">第二个是<tt>wx.GetSingleChoiceIndex:</tt> <span id="line-274" class="anchor"/><span id="line-275" class="anchor"/><span id="line-276" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-485c1d6f02351553cd7b51c6a2cc82e5eda5a051_011\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-485c1d6f02351553cd7b51c6a2cc82e5eda5a051_011', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-485c1d6f02351553cd7b51c6a2cc82e5eda5a051_011" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">GetSingleChoiceIndex</span><span class="Operator">(</span><span class="ID">message</span><span class="Operator">,</span> <span class="ID">caption</span><span class="Operator">,</span> <span
class="ID">aChoices</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">=</span><span class="ID">None</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-277" class="anchor"/><p class="line862">这个函数与第一个有相同的参数，但是返回值不同。如果用户按下<tt>OK</tt>，则返回值是所选项的索引，如果用户按下<tt>Cancel</tt>，则返回值是-1。 <span id="line-278" class="anchor"/><span id="line-279" class="anchor"/><span id="line-280" class="anchor"/></p><p class="line867">
</p><h3 id="head-e5fc0bbd182cf52e76b81561af25de30fd093d91">1.5. 如何显示进度条？</h3>
<span id="line-281" class="anchor"/><span id="line-282" class="anchor"/><span id="line-283" class="anchor"/><p class="line862">在许多程序中，程序需要自己做些事情而不受用户输入的干扰。这时就需要给用户一些可见的显示，以表明程序正在做一些事情及完成的进度。在<tt>wxPython</tt>中，这通常使用一个进度条来管理，如图9.5所示。 <span id="line-284" class="anchor"/><span id="line-285" class="anchor"/><span id="line-286"
class="anchor"/></p><p class="line867"><strong>图9.5</strong> <span id="line-287" class="anchor"/><span id="line-288" class="anchor"/></p><p class="line867"><img title="attachment:w9.5.gif" src="/moin/WxPythonInAction/ChapterNine?action=AttachFile&amp;do=get&amp;target=w9.5.gif" class="attachment"/> <span id="line-289" class="anchor"/><span id="line-290" class="anchor"/><span id="line-291"
class="anchor"/></p><p class="line874">例9.5显示了产生图9.5的代码 <span id="line-292" class="anchor"/><span id="line-293" class="anchor"/><span id="line-294" class="anchor"/></p><p class="line867"><strong>例9.5</strong>  <span id="line-295" class="anchor"/><strong>生成一个进度条</strong> <span id="line-296" class="anchor"/><span id="line-297" class="anchor"/><span id="line-298" class="anchor"/><span
id="line-299" class="anchor"/><span id="line-300" class="anchor"/><span id="line-301" class="anchor"/><span id="line-302" class="anchor"/><span id="line-303" class="anchor"/><span id="line-304" class="anchor"/><span id="line-305" class="anchor"/><span id="line-306" class="anchor"/><span id="line-307" class="anchor"/><span id="line-308" class="anchor"/><span id="line-309" class="anchor"/><span id="line-310"
class="anchor"/><span id="line-311" class="anchor"/><span id="line-312" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-01495e5731514ef080e8d1341b23f0dc4de8bbb3_012\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-01495e5731514ef080e8d1341b23f0dc4de8bbb3_012', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-01495e5731514ef080e8d1341b23f0dc4de8bbb3_012" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">import</span> <span class="ID">wx</span></span>
<span class="line"><span class="LineNumber">   2 </span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">if</span> <span class="ID">__name__</span> <span class="Operator">==</span> <span class="String">"__main__"</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   4 </span>    <span class="ID">app</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">PySimpleApp</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   5 </span>    <span class="ID">progressMax</span> <span class="Operator">=</span> <span class="Number">100</span></span>
<span class="line"><span class="LineNumber">   6 </span>    <span class="ID">dialog</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">ProgressDialog</span><span class="Operator">(</span><span class="String">"A progress box"</span><span class="Operator">,</span> <span class="String">"Time remaining"</span><span
class="Operator">,</span> <span class="ID">progressMax</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   7 </span>            <span class="ID">style</span><span class="Operator">=</span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">PD_CAN_ABORT</span> <span class="Operator">|</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">PD_ELAPSED_TIME</span> <span class="Operator">|</span> <span
class="ID">wx</span><span class="Operator">.</span><span class="ID">PD_REMAINING_TIME</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   8 </span>    <span class="ID">keepGoing</span> <span class="Operator">=</span> <span class="ID">True</span></span>
<span class="line"><span class="LineNumber">   9 </span>    <span class="ID">count</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  10 </span>    <span class="ResWord">while</span> <span class="ID">keepGoing</span> <span class="ResWord">and</span> <span class="ID">count</span>   <span class="ID">progressMax</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  11 </span>        <span class="ID">count</span> <span class="Operator">=</span> <span class="ID">count</span> <span class="Operator">+</span> <span class="Number">1</span></span>
<span class="line"><span class="LineNumber">  12 </span>        <span class="ID">wx</span><span class="Operator">.</span><span class="ID">Sleep</span><span class="Operator">(</span><span class="Number">1</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  13 </span>        <span class="ID">keepGoing</span> <span class="Operator">=</span> <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">Update</span><span class="Operator">(</span><span class="ID">count</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  14 </span></span>
<span class="line"><span class="LineNumber">  15 </span>    <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">Destroy</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-313" class="anchor"/><p class="line874">进度条的所有选项在构造函数中被设置，构造函数如下： <span id="line-314" class="anchor"/><span id="line-315" class="anchor"/><span id="line-316" class="anchor"/><span id="line-317" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-3075693244072e013b146002e3747079474c74c4_013\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-3075693244072e013b146002e3747079474c74c4_013', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-3075693244072e013b146002e3747079474c74c4_013" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">ProgressDialog</span><span class="Operator">(</span><span class="ID">title</span><span class="Operator">,</span> <span class="ID">message</span><span
class="Operator">,</span> <span class="ID">maximum</span><span class="Operator">=</span><span class="Number">100</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">=</span><span class="ID">None</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   2 </span>        <span class="ID">style</span><span class="Operator">=</span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">PD_AUTO_HIDE</span> <span class="Operator">|</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">PD_APP_MODAL</span><span class="Operator">)</span><span
class="Text"/></span>
</pre></div><span id="line-318" class="anchor"/><p class="line862">这些参数不同于其它对话框的。参数<tt>title</tt>被放置在窗口的标题栏，<tt>message</tt>被显示在对话框中。<tt>maximum</tt>是你用来显示进度计数的最大值。 <span id="line-319" class="anchor"/><span id="line-320" class="anchor"/></p><p class="line862">表9.3
列出了特定于<tt>wx.ProgressDialog</tt>六个样式，它们影响进度条的行为。 <span id="line-321" class="anchor"/><span id="line-322" class="anchor"/><span id="line-323" class="anchor"/></p><p class="line867"><strong>表9.3 <tt>wx.ProgressDialog</tt>的样式</strong> <span id="line-324" class="anchor"/><span id="line-325" class="anchor"/></p><div><table><tbody><tr>  <td><p
class="line891"><tt>wx.PD_APP_MODAL</tt></p></td>
<td><p class="line862">如果设置了这个样式，进度条对整个应用程序是模式的，这将阻塞所有的用户事件。如果没有设置这个样式，那么进度条仅对它的父窗口是模式的。</p></td>
</tr>
<tr>  <td><span id="line-326" class="anchor"/><p class="line891"><tt>wx.PD_AUTO_HIDE</tt></p></td>
<td><p class="line862">进度条将自动隐藏自身直到它达到它的最大值。</p></td>
</tr>
<tr>  <td><span id="line-327" class="anchor"/><p class="line891"><tt>wx.PD_CAN_ABORT</tt></p></td>
<td><p class="line862">在进度条上放上一个<tt>Cancel</tt>按钮，以便用户停止。如何响应来自该对话框的取消将在以后说明。</p></td>
</tr>
<tr>  <td><span id="line-328" class="anchor"/><p class="line891"><tt>wx.PD_ELAPSED_TIME</tt></p></td>
<td><p class="line862">显示该对话框已经出现了多长时间。</p></td>
</tr>
<tr>  <td><span id="line-329" class="anchor"/><p class="line891"><tt>wx.PD_ESTIMATED_TIME</tt></p></td>
<td><p class="line862">显示根据已花的时间、当前的计数值和计数器的最大值所估计出的完成进度所需的总时间。</p></td>
</tr>
<tr>  <td><span id="line-330" class="anchor"/><p class="line891"><tt>wx.PD_REMAINING_TIME</tt></p></td>
<td><p class="line862">显示要完成进度所估计的剩余时间，或(所需总时间-已花时间)。</p></td>
</tr>
</tbody></table></div><span id="line-331" class="anchor"/><span id="line-332" class="anchor"/><p
class="line862">要使用进度条，就要调用它的唯一的方法<tt>Update(value</tt>,<tt>newmsg</tt>="")。<tt>value</tt>参数是进度条的新的内部的值，调用<tt>update</tt>将导致进度条根据新的计数值与最大计算值的比例重绘。如果使用可选的参数<tt>newmsg</tt>，那么进度条上的文本消息将变为该字符串。这让你可以给用户一个关于当前进度的文本描述。 <span id="line-333" class="anchor"/><span
id="line-334" class="anchor"/></p><p class="line862">这个<tt>Update()</tt>方法通常返回<tt>True</tt>。但是，如果用户通过<tt>Cancel</tt>按钮已经取消了该对话框，那么下次的<tt>Update()</tt>将返回<tt>False</tt>。这是你响应用户的取消请求的机会。要检测用户的取消请求，我们建议你尽可能频繁地<tt>Update()</tt>。 <span id="line-335" class="anchor"/><span id="line-336"
class="anchor"/><span id="line-337" class="anchor"/></p><p class="line867">
</p><h2 id="head-1e19ed85fa45b1bd5e3e69931675e77a69dcc796">2. 使用标准对话框</h2>
<span id="line-338" class="anchor"/><span id="line-339" class="anchor"/><span id="line-340" class="anchor"/><p
class="line862">大多数操作系统都为像文件选择、字体选择和颜色选择这些任务提供了标准对话框。这为平台提供了一致感观。你也可以使用来自于<tt>wxPython</tt>的这些对话框，它们也为你的应用程序提供了一致的感观。如果你使用<tt>wxPython</tt>，那么它为你提供了类似的对话框，即使所在的平台没有提供系统对话框。 <span id="line-341" class="anchor"/><span id="line-342"
class="anchor"/><span id="line-343" class="anchor"/></p><p class="line867">
</p><h3 id="head-985580e3972c0cdea587df260e05714235697700">2.1. 如何使用文件选择对话框？</h3>
<span id="line-344" class="anchor"/><span id="line-345" class="anchor"/><span id="line-346" class="anchor"/><p class="line862">在<tt>wxPython</tt>中，<tt>wx.FileDialog</tt>为主流的平台使用本地操作系统对话框，对其它操作系统使用非本地相似的外观。微软<tt>Windows</tt>的版本如图9.6所示。 <span id="line-347" class="anchor"/><span id="line-348" class="anchor"/><span
id="line-349" class="anchor"/></p><p class="line867"><strong>图9.6</strong> <span id="line-350" class="anchor"/><span id="line-351" class="anchor"/></p><p class="line867"><img title="attachment:w9.6.gif" src="/moin/WxPythonInAction/ChapterNine?action=AttachFile&amp;do=get&amp;target=w9.6.gif" class="attachment"/> <span id="line-352" class="anchor"/><span
id="line-353" class="anchor"/><span id="line-354" class="anchor"/></p><p class="line874">你可以设置文件对话框开始在任一目录，你也可以使用通配符过滤来限制去显示某种文件类型。例9.6显示了一个基本的例子。 <span id="line-355" class="anchor"/><span id="line-356" class="anchor"/><span id="line-357" class="anchor"/></p><p class="line867"><strong>例9.6</strong>  <span
id="line-358" class="anchor"/><strong>使用<tt>wx.FileDialog</tt></strong> <span id="line-359" class="anchor"/><span id="line-360" class="anchor"/><span id="line-361" class="anchor"/><span id="line-362" class="anchor"/><span id="line-363" class="anchor"/><span id="line-364" class="anchor"/><span id="line-365" class="anchor"/><span id="line-366" class="anchor"/><span
id="line-367" class="anchor"/><span id="line-368" class="anchor"/><span id="line-369" class="anchor"/><span id="line-370" class="anchor"/><span id="line-371" class="anchor"/><span id="line-372" class="anchor"/><span id="line-373" class="anchor"/><span id="line-374" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-6008bc4af1138428ca0bee713704003b2a568b8e_014\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-6008bc4af1138428ca0bee713704003b2a568b8e_014', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-6008bc4af1138428ca0bee713704003b2a568b8e_014" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">import</span> <span class="ID">wx</span></span>
<span class="line"><span class="LineNumber">   2 </span><span class="ResWord">import</span> <span class="ID">os</span></span>
<span class="line"><span class="LineNumber">   3 </span></span>
<span class="line"><span class="LineNumber">   4 </span><span class="ResWord">if</span> <span class="ID">__name__</span> <span class="Operator">==</span> <span class="String">"__main__"</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   5 </span>    <span class="ID">app</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">PySimpleApp</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   6 </span>    <span class="ID">wildcard</span> <span class="Operator">=</span> <span class="String">"Python source (*.py)|*.py|"</span> \
<span class="String">"Compiled Python (*.pyc)|*.pyc|"</span> \
<span class="String">"All files (*.*)|*.*"</span></span>
<span class="line"><span class="LineNumber">   7 </span>    <span class="ID">dialog</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">FileDialog</span><span class="Operator">(</span><span class="ID">None</span><span class="Operator">,</span> <span
class="String">"Choose a file"</span><span class="Operator">,</span> <span class="ID">os</span><span class="Operator">.</span><span class="ID">getcwd</span><span class="Operator">(</span><span class="Operator">)</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   8 </span>            <span class="String">""</span><span class="Operator">,</span> <span class="ID">wildcard</span><span class="Operator">,</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">OPEN</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   9 </span>    <span class="ResWord">if</span> <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">ShowModal</span><span class="Operator">(</span><span class="Operator">)</span> <span class="Operator">==</span> <span class="ID">wx</span><span
class="Operator">.</span><span class="ID">ID_OK</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  10 </span>        <span class="ResWord">print</span> <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">GetPath</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  11 </span></span>
<span class="line"><span class="LineNumber">  12 </span>    <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">Destroy</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-375" class="anchor"/><p class="line874">文件对话框是我们这章已见过的最复杂的对话框，它有几个属性可以通过编程的方式读写。它的构造函数使得你能够设置它的一些属性： <span id="line-376" class="anchor"/><span id="line-377" class="anchor"/><span id="line-378" class="anchor"/><span id="line-379"
class="anchor"/><span id="line-380" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-7d93539db2d4ff6c7f665ac7b34d72ab4f31a31e_015\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-7d93539db2d4ff6c7f665ac7b34d72ab4f31a31e_015', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-7d93539db2d4ff6c7f665ac7b34d72ab4f31a31e_015" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">FileDialog</span><span class="Operator">(</span><span class="ID">parent</span><span
class="Operator">,</span> <span class="ID">message</span><span class="Operator">=</span><span class="String">"Choose a file"</span><span class="Operator">,</span> <span class="ID">defaultDir</span><span class="Operator">=</span><span class="String">""</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   2 </span>        <span class="ID">defaultFile</span><span class="Operator">=</span><span class="String">""</span><span class="Operator">,</span> <span class="ID">wildcard</span><span class="Operator">=</span><span class="String">"*.*"</span><span
class="Operator">,</span> <span class="ID">style</span><span class="Operator">=</span><span class="Number">0</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   3 </span>        <span class="ID">pos</span><span class="Operator">=</span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">DefaultPosition</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-381" class="anchor"/><p
class="line867"><tt>message</tt>参数出现在窗口的标题栏中。<tt>defaultDir</tt>参数告诉对话框初始的时候显示哪个目录。如果这个参数为空或表示的目录不存在，那么对话框开始在当前目录。<tt>defaultFile</tt>是默认保存为的文件。<tt>wildcard</tt>参数使你可以基于给定的模式来过滤列表，使用通常的*和?作为通配符。通配符可以是单个模式，如*.<tt>py</tt>或格式如
描述 | 模式 | 描述 | 模式 的一系列模式——类似于例9.6中所用。 <span id="line-382" class="anchor"/><span id="line-383" class="anchor"/></p><p class="line862">"<tt>Python</tt> <tt>source</tt> (*.<tt>py)</tt>|*.<tt>py</tt>|<tt>Compiled</tt> <tt>Python</tt> (*.<tt>pyc)</tt>|*.<tt>pyc</tt>|  <span id="line-384"
class="anchor"/></p><ul><li style="list-style-type: none;"><p class="line891"><tt>All</tt> <tt>files</tt> (*.*)|*.*" <span id="line-385" class="anchor"/><span id="line-386" class="anchor"/></p></li></ul><p
class="line862">如果有一个多个项目的模式，那么它们显示在图9.6所示的下拉菜单中。<tt>pos</tt>参数不保证被基本的系统所支持。 <span id="line-387" class="anchor"/><span id="line-388" class="anchor"/><span id="line-389" class="anchor"/></p><p class="line867"><strong>选择一个文件</strong> <span id="line-390"
class="anchor"/><span id="line-391" class="anchor"/></p><p class="line867"><tt>wx.FileDialog</tt>的两个最重要的样式标记是<tt>wx.OPEN</tt>和<tt>wx.SAVE</tt>，它们表明对话框的类型并影响对话框的行为。 <span id="line-392" class="anchor"/><span id="line-393" class="anchor"/></p><p
class="line862">用于打开文件的对话框有两个标记，它们进一步影响对话框的行为。<tt>wx.HIDE_READONLY</tt>标记灰化复选框，使用户以只读模式打开文件。<tt>wx.MULTIPLE</tt>标记使用户可以在一个目录中选择打开多个文件。 <span id="line-394" class="anchor"/><span id="line-395" class="anchor"/></p><p
class="line862">保存文件对话框有一个有用的标记<tt>wx.OVERWRITE_PROMPT</tt>，它使得保存文件时，如果有相同的文件存在，则提示用户是否覆盖。 <span id="line-396" class="anchor"/><span id="line-397" class="anchor"/></p><p
class="line862">两种文件对话框都可以使用<tt>wx.CHANGE_DIR</tt>标记。当使用这个标记时，文件的选择也可改变应用程序的工作目录为所选文件所在的目录。这使得下次文件对话框打开在相同的目录，而不需要应用程序再在别处存储该值。 <span id="line-398" class="anchor"/><span id="line-399" class="anchor"/></p><p
class="line862">和本章迄今为止我人们所见过的其它对话框不一样，文件对话框的属性<tt>directory</tt>，<tt>filename</tt>, <tt>style</tt>, <tt>message</tt>, 和<tt>wildcard</tt>是可以通过方法来得到和设置的。这些方法使用<tt>Get</tt>/<tt>Set</tt>命名习惯。 <span id="line-400" class="anchor"/><span id="line-401"
class="anchor"/></p><p
class="line862">在用户退出对话框后，如果返回值是<tt>wx.OK</tt>，那么你可以使用方法<tt>GetPath()</tt>来得到用户的选择，该函数的返回值是字符串形式的文件全路径名。如果对话框是一个使用了<tt>wx.MULTIPLE</tt>标记的打开对话框，则用<tt>GetPaths()</tt>代替<tt>GetPath()</tt>。该方法返回路径字符串的一个<tt>Python</tt>列表。如果你需要知道在用户选择时使用了下拉菜单中的哪个项，你可以使用<tt>GetFilterIndex()</tt>，它返回项目的索引。要通过编程改变索引，使用方法<tt>SetFilterIndex()</tt>。
<span id="line-402" class="anchor"/><span id="line-403" class="anchor"/></p><p class="line874">这后面的是一个使用文件对话框的便利函数： <span id="line-404" class="anchor"/><span id="line-405" class="anchor"/><span id="line-406" class="anchor"/><span id="line-407" class="anchor"/><span id="line-408"
class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-dcb5388c8736d5838f2a006bb9c5603da970a0e7_016\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-dcb5388c8736d5838f2a006bb9c5603da970a0e7_016', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-dcb5388c8736d5838f2a006bb9c5603da970a0e7_016" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">FileSelector</span><span class="Operator">(</span><span class="ID">message</span><span
class="Operator">,</span> <span class="ID">default_path</span><span class="Operator">=</span><span class="String">""</span><span class="Operator">,</span> <span class="ID">default_filename</span><span class="Operator">=</span><span class="String">""</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   2 </span>    <span class="ID">default_extension</span><span class="Operator">=</span><span class="String">""</span><span class="Operator">,</span> <span class="ID">wildcard</span><span class="Operator">=</span><span class="Error">"</span><span
class="Operator">*</span><span class="Operator">.</span><span class="Operator">*</span><span class="String">''</span><span class="Operator">,</span> <span class="ID">flags</span><span class="Operator">=</span><span class="Number">0</span><span class="Operator">,</span> <span
class="ID">parent</span><span class="Operator">=</span><span class="ID">None</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   3 </span>    <span class="ID">x</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">1</span><span class="Operator">,</span> <span class="ID">y</span><span class="Operator">=</span><span
class="Operator">-</span><span class="Number">1</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-409" class="anchor"/><p class="line867"><tt>message</tt>, <tt>default_path</tt>, <tt>default_filename</tt>, 和
<tt>wildcard</tt>参数意义与构造函数的基本相同，尽管参数的名字不同。<tt>flags</tt>参数通常被称作<tt>style</tt>，<tt>default_extension</tt>参数是保存为文件时默认的后缀（如果用户没有指定后缀的情况下）。如果用户按下<tt>OK</tt>，返回值是字符串形式的路径名，如果用户按下<tt>Cancel</tt>则返回一个空字符串。
<span id="line-410" class="anchor"/><span id="line-411" class="anchor"/><span id="line-412" class="anchor"/></p><p class="line867"><strong>选择一个目录</strong> <span id="line-413" class="anchor"/><span id="line-414" class="anchor"/></p><p
class="line862">如果用户想去选择一个目录而非一个文件，使用<tt>wx.DirDialog</tt>，它呈现一个目录树的视图，如图9.7所示。 <span id="line-415" class="anchor"/><span id="line-416" class="anchor"/></p><p class="line874">这个目录选择器比文件对话框简单些。例9.7显示了相关的代码。 <span id="line-417"
class="anchor"/><span id="line-418" class="anchor"/><span id="line-419" class="anchor"/></p><p class="line867"><strong>例9.7</strong>  <span id="line-420" class="anchor"/><strong>显示一个目录选择对话框</strong> <span id="line-421" class="anchor"/><span id="line-422" class="anchor"/><span
id="line-423" class="anchor"/><span id="line-424" class="anchor"/><span id="line-425" class="anchor"/><span id="line-426" class="anchor"/><span id="line-427" class="anchor"/><span id="line-428" class="anchor"/><span id="line-429" class="anchor"/><span id="line-430" class="anchor"/><span
id="line-431" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-9e4d1c5327a016b493dac5f1aeabee80b8d6ac92_017\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-9e4d1c5327a016b493dac5f1aeabee80b8d6ac92_017', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-9e4d1c5327a016b493dac5f1aeabee80b8d6ac92_017" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">import</span> <span class="ID">wx</span></span>
<span class="line"><span class="LineNumber">   2 </span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">if</span> <span class="ID">__name__</span> <span class="Operator">==</span> <span class="String">"__main__"</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   4 </span>    <span class="ID">app</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">PySimpleApp</span><span class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   5 </span>    <span class="ID">dialog</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">DirDialog</span><span class="Operator">(</span><span class="ID">None</span><span
class="Operator">,</span> <span class="String">"Choose a directory:"</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   6 </span>          <span class="ID">style</span><span class="Operator">=</span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">DD_DEFAULT_STYLE</span> <span class="Operator">|</span> <span
class="ID">wx</span><span class="Operator">.</span><span class="ID">DD_NEW_DIR_BUTTON</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   7 </span>    <span class="ResWord">if</span> <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">ShowModal</span><span class="Operator">(</span><span class="Operator">)</span> <span
class="Operator">==</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">ID_OK</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   8 </span>        <span class="ResWord">print</span> <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">GetPath</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   9 </span>    <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">Destroy</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-432" class="anchor"/><span id="line-433" class="anchor"/><p class="line867"><strong>图9.7</strong> <span id="line-434" class="anchor"/><span id="line-435" class="anchor"/></p><p class="line867"><img title="attachment:w9.7.gif"
src="/moin/WxPythonInAction/ChapterNine?action=AttachFile&amp;do=get&amp;target=w9.7.gif" class="attachment"/> <span id="line-436" class="anchor"/><span id="line-437" class="anchor"/><span id="line-438" class="anchor"/></p><p
class="line874">这个对话框的所有的功能几乎都在构造函数中： <span id="line-439" class="anchor"/><span id="line-440" class="anchor"/><span id="line-441" class="anchor"/><span id="line-442" class="anchor"/><span id="line-443" class="anchor"/></p><div lang="en" dir="ltr"
class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-a14ed2d633c953be3bbd89508de9455af632dfc9_018\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-a14ed2d633c953be3bbd89508de9455af632dfc9_018', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-a14ed2d633c953be3bbd89508de9455af632dfc9_018" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">DirDialog</span><span class="Operator">(</span><span
class="ID">parent</span><span class="Operator">,</span> <span class="ID">message</span><span class="Operator">=</span><span class="String">"Choose a directory"</span><span class="Operator">,</span> <span class="ID">defaultPath</span><span
class="Operator">=</span><span class="String">""</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   2 </span>    <span class="ID">style</span><span class="Operator">=</span><span class="Number">0</span><span class="Operator">,</span> <span class="ID">pos</span> <span class="Operator">=</span> <span
class="ID">wx</span><span class="Operator">.</span><span class="ID">DefaultPosition</span><span class="Operator">,</span> <span class="ID">size</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span
class="ID">DefaultSize</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   3 </span>    <span class="ID">name</span><span class="Operator">=</span><span class="String">"wxDirCtrl"</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-444" class="anchor"/><p
class="line862">由于<tt>message</tt>参数显示在对话框中，所以你不需要一个钩子去改变标题栏。<tt>defaultPath</tt>告诉对话框选择的默认路径，如果它为空，那么对话框显示文件系统的根目录。<tt>pos</tt>和<tt>size</tt>参数在微软<tt>Windows</tt>下被忽略，<tt>name</tt>参数在所有的操作系统下都被忽略。该对话框的样式标记<tt>wx.DD_NEW_DIR_BUTTON</tt>给对话框一个用于创建目录的一个按钮。这个标记在老版的微软<tt>Windows</tt>中不工作。
<span id="line-445" class="anchor"/><span id="line-446" class="anchor"/></p><p class="line867"><tt>wx.DirDialog</tt>类的<tt>path</tt>, <tt>message</tt>,
和<tt>style</tt>属性都有相应的<tt>get</tt>*和<tt>set</tt>*方法。你可以使用<tt>GetPath()</tt>方法来在对话框被调用后获取用户的选择。这个对话框也有一个便利的函数： <span id="line-447" class="anchor"/><span id="line-448" class="anchor"/><span id="line-449"
class="anchor"/><span id="line-450" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-b3e73d576dafb8fa4dce30deda0ec25a918605af_019\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-b3e73d576dafb8fa4dce30deda0ec25a918605af_019', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-b3e73d576dafb8fa4dce30deda0ec25a918605af_019" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">DirSelector</span><span
class="Operator">(</span><span class="ID">message</span><span class="Operator">=</span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">DirSelectorPromptStr</span><span class="Operator">,</span> <span
class="ID">default_path</span><span class="Operator">=</span><span class="String">""</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   2 </span>    <span class="ID">style</span><span class="Operator">=</span><span class="Number">0</span><span class="Operator">,</span> <span class="ID">pos</span><span class="Operator">=</span><span
class="ID">wxDefaultPosition</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">=</span><span class="ID">None</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-451" class="anchor"/><p class="line862">所有的参数和前面的构造函数相同。如果<tt>OK</tt>被按下，则该函数返回所选择的字符串形式的目录名，如果按下<tt>Cancel</tt>，则返回空字符串。 <span id="line-452" class="anchor"/><span
id="line-453" class="anchor"/><span id="line-454" class="anchor"/><span id="line-455" class="anchor"/></p><p class="line867">
</p><h3 id="head-00a973457e0b1163026c5f32182b798f1d27e524">2.2. 如何使用字体选择对话框？</h3>
<span id="line-456" class="anchor"/><span id="line-457" class="anchor"/><span id="line-458" class="anchor"/><p
class="line862">在<tt>wxPython</tt>中，字体选择对话框与文件对话框是不同的，因为它使用了一个单独的帮助类来管理它所呈现的信息。图9.8显示了微软<tt>Windows</tt>版的字体对话框。 <span id="line-459" class="anchor"/><span id="line-460"
class="anchor"/></p><p class="line874">例9.8 显示了产生图9.8的代码，并且与前面的对话框例子看起来也有些不同。 <span id="line-461" class="anchor"/><span id="line-462" class="anchor"/><span id="line-463" class="anchor"/></p><p
class="line867"><strong>例9.8</strong>  <span id="line-464" class="anchor"/><strong>字体对话框</strong> <span id="line-465" class="anchor"/><span id="line-466" class="anchor"/><span id="line-467" class="anchor"/><span id="line-468"
class="anchor"/><span id="line-469" class="anchor"/><span id="line-470" class="anchor"/><span id="line-471" class="anchor"/><span id="line-472" class="anchor"/><span id="line-473" class="anchor"/><span id="line-474" class="anchor"/><span
id="line-475" class="anchor"/><span id="line-476" class="anchor"/><span id="line-477" class="anchor"/><span id="line-478" class="anchor"/><span id="line-479" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-05524df11b85231eda55f41a2a5ff3777f1e9c8e_020\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-05524df11b85231eda55f41a2a5ff3777f1e9c8e_020', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-05524df11b85231eda55f41a2a5ff3777f1e9c8e_020" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">import</span> <span class="ID">wx</span></span>
<span class="line"><span class="LineNumber">   2 </span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">if</span> <span class="ID">__name__</span> <span class="Operator">==</span> <span class="String">"__main__"</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   4 </span>    <span class="ID">app</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">PySimpleApp</span><span
class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   5 </span>    <span class="ID">dialog</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">FontDialog</span><span
class="Operator">(</span><span class="ID">None</span><span class="Operator">,</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">FontData</span><span class="Operator">(</span><span
class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   6 </span>    <span class="ResWord">if</span> <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">ShowModal</span><span class="Operator">(</span><span
class="Operator">)</span> <span class="Operator">==</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">ID_OK</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   7 </span>        <span class="ID">data</span> <span class="Operator">=</span> <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">GetFontData</span><span
class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   8 </span>        <span class="ID">font</span> <span class="Operator">=</span> <span class="ID">data</span><span class="Operator">.</span><span class="ID">GetChosenFont</span><span
class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   9 </span>        <span class="ID">colour</span> <span class="Operator">=</span> <span class="ID">data</span><span class="Operator">.</span><span class="ID">GetColour</span><span
class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  10 </span>        <span class="ResWord">print</span> <span class="String">'You selected: "%s", %d points\n'</span> <span class="Operator">%</span> <span class="Operator">(</span></span>
<span class="line"><span class="LineNumber">  11 </span>                <span class="ID">font</span><span class="Operator">.</span><span class="ID">GetFaceName</span><span class="Operator">(</span><span
class="Operator">)</span><span class="Operator">,</span> <span class="ID">font</span><span class="Operator">.</span><span class="ID">GetPointSize</span><span class="Operator">(</span><span class="Operator">)</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  12 </span>    <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">Destroy</span><span class="Operator">(</span><span class="Operator">)</span><span
class="Text"/></span>
</pre></div><span id="line-480" class="anchor"/><p class="line867"><strong>图9.8</strong> <span id="line-481" class="anchor"/><span id="line-482" class="anchor"/></p><p class="line867"><img title="attachment:w9.8.gif"
src="/moin/WxPythonInAction/ChapterNine?action=AttachFile&amp;do=get&amp;target=w9.8.gif" class="attachment"/> <span id="line-483" class="anchor"/><span id="line-484" class="anchor"/><span id="line-485" class="anchor"/></p><p
class="line867"><tt>wx.FontDialog</tt> 的构造函数比前面的那些简单的多： <span id="line-486" class="anchor"/><span id="line-487" class="anchor"/></p><p class="line867"><tt>wx.FontDialog(parent</tt>, <tt>data)</tt> <span id="line-488"
class="anchor"/><span id="line-489" class="anchor"/></p><p
class="line862">你不能为该对话框设置一个消息或标题，并且被通常作为样式标记传递的信息被包含在<tt>data</tt>参数中，该参数是类<tt>wx.FontData</tt>。<tt>wx.FontData</tt>类自己只有一个有用的方法：<tt>GetFontData()</tt>，该方法返回字体数据的实例。
<span id="line-490" class="anchor"/><span id="line-491" class="anchor"/></p><p
class="line867"><tt>wx.FontData</tt>的实例使你能够设置管理字体对话框显示的值，并且也能够容纳用户输入的信息。例如，在例9.8中的代码调用了<tt>wx.FontData</tt>实例的两个<tt>get</tt>*方法来确定所选字体的细节。<tt>wx.FontData</tt>的构造函数没有参数——所有的属性必须通过使用表9.4中的方法来设置。
<span id="line-492" class="anchor"/><span id="line-493" class="anchor"/><span id="line-494" class="anchor"/></p><p class="line867"><strong>表9.4</strong>  <span id="line-495"
class="anchor"/><strong><tt>wx.FontData</tt>的方法</strong> <span id="line-496" class="anchor"/><span id="line-497" class="anchor"/></p><div><table><tbody><tr>  <td><p
class="line891"><tt>GetAllowSymbols()</tt>,<tt>SetAllowSymbols(allowSymbols)</tt></p></td>
<td><p class="line862">决定是否在对话框中仅显示符号字体（如<tt>dingbats</tt>）。参数是布尔值。只在<tt>Windows</tt>中有意义。该属性的初始值是<tt>True</tt>。</p></td>
</tr>
<tr>  <td><span id="line-498" class="anchor"/><p class="line891"><tt>GetChosenFont()</tt>,<tt>SetChosenFont(font)</tt></p></td>
<td><p class="line862">以<tt>wx.Font</tt>对象的方式返回用户所选的字体。如果用户选择了取消，那么返回<tt>None</tt>。<tt>wx.Font</tt>类将在第12章作更详细的讨论。</p></td>
</tr>
<tr>  <td><span id="line-499" class="anchor"/><p class="line891"><tt>GetColour()</tt>,<tt>SetColour(colour)</tt></p></td>
<td><p
class="line862">返回在对话框的颜色选择部分所选的颜色。<tt>set</tt>*方法使你可以预先设定默认值。<tt>get</tt>*方法返回一个<tt>wx.Colour</tt>实例。<tt>set</tt>*方法中的<tt>colour</tt>只能是一个<tt>wx.Colour</tt>或一个颜色的字符串名。该属性的初始值是<tt>black</tt>。</p></td>
</tr>
<tr>  <td><span id="line-500" class="anchor"/><p class="line891"><tt>GetEnableEffects()</tt>,<tt>EnableEffects(enable)</tt></p></td>
<td><p class="line862">在该对话框的<tt>Windows</tt>版本中，该属性控制是否显示字体的所选颜色、中间是否有直线通过、是否带下划线等特性。</p></td>
</tr>
<tr>  <td><span id="line-501" class="anchor"/><p class="line891"><tt>GetInitialFont()</tt>,<tt>SetInitialFont(font)</tt></p></td>
<td><p class="line862">返回对话框初值的字体值（即当前所用的字体）。这个属性可以在对话框显示之前通过应用程序显式的来设置。它的初始值是<tt>None</tt>。</p></td>
</tr>
<tr>  <td><span id="line-502" class="anchor"/><p class="line891"><tt>SetRange(min</tt>, <tt>max)</tt></p></td>
<td><p class="line862">设置字体尺寸（磅）的有效范围。仅用于微软的<tt>Windows</tt>系统。最初值是0~0，意味没有范围的限制。</p></td>
</tr>
</tbody></table></div><span id="line-503" class="anchor"/><p
class="line867">||<tt>GetShowHelp()</tt>,<tt>SetShowHelp()</tt>||如果为<tt>True</tt>，那么该对话框的微软<tt>Windows</tt>版本将显示一个帮助按钮。初始值为<tt>False</tt>||。 <span id="line-504" class="anchor"/><span
id="line-505" class="anchor"/></p><p class="line862">有一个使用字体对话框的便利的函数，它回避了<tt>wx.FontData</tt>类： <span id="line-506" class="anchor"/><span id="line-507" class="anchor"/><span id="line-508"
class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-d0cf1f513f329838d6ecb3daeb1f3f88961c33e5_021\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-d0cf1f513f329838d6ecb3daeb1f3f88961c33e5_021', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-d0cf1f513f329838d6ecb3daeb1f3f88961c33e5_021" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ID">wx</span><span class="Operator">.</span><span
class="ID">GetFontFromUser</span><span class="Operator">(</span><span class="ID">parent</span><span class="Operator">,</span> <span class="ID">fontInit</span><span class="Operator">)</span><span
class="Text"/></span>
</pre></div><span id="line-509" class="anchor"/><p
class="line867"><tt>fontInit</tt>参数是<tt>wx.Font</tt>的一个实例，它用作对话框的初始值。该函数的返回值是一个<tt>wx.Font</tt>实例。如用户通过<tt>OK</tt>关闭了对话框，则方法<tt>wx.Font.Ok()</tt>返回<tt>True</tt>，否则返回<tt>False</tt>。
<span id="line-510" class="anchor"/><span id="line-511" class="anchor"/><span id="line-512" class="anchor"/><span id="line-513" class="anchor"/></p><p class="line867">
</p><h3 id="head-75341a1b3a39c826649931729ac47d7ac961150a">2.3. 如何使用颜色对话框？</h3>
<span id="line-514" class="anchor"/><span id="line-515" class="anchor"/><span id="line-516" class="anchor"/><p
class="line874">颜色对话框类似于字体对话框，因为它使用了一个外部的数据类来管理它的信息。图9.9显示了这类对话框的微软版本。 <span id="line-517" class="anchor"/><span id="line-518" class="anchor"/></p><p
class="line874">例9.9显示了生成该对话框的代码，它几乎与前面的字体对话框相同。 <span id="line-519" class="anchor"/><span id="line-520" class="anchor"/><span id="line-521" class="anchor"/></p><p
class="line867"><strong>例9.9</strong> <span id="line-522" class="anchor"/><span id="line-523" class="anchor"/><span id="line-524" class="anchor"/><span id="line-525" class="anchor"/><span id="line-526"
class="anchor"/><span id="line-527" class="anchor"/><span id="line-528" class="anchor"/><span id="line-529" class="anchor"/><span id="line-530" class="anchor"/><span id="line-531" class="anchor"/><span
id="line-532" class="anchor"/><span id="line-533" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-32bb38d931b80e88b345959149cd82ec28bb7bbf_022\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-32bb38d931b80e88b345959149cd82ec28bb7bbf_022', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-32bb38d931b80e88b345959149cd82ec28bb7bbf_022" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">import</span> <span
class="ID">wx</span></span>
<span class="line"><span class="LineNumber">   2 </span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">if</span> <span class="ID">__name__</span> <span class="Operator">==</span> <span
class="String">"__main__"</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   4 </span>    <span class="ID">app</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span
class="ID">PySimpleApp</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   5 </span>    <span class="ID">dialog</span> <span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span
class="ID">ColourDialog</span><span class="Operator">(</span><span class="ID">None</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   6 </span>    <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">GetColourData</span><span
class="Operator">(</span><span class="Operator">)</span><span class="Operator">.</span><span class="ID">SetChooseFull</span><span class="Operator">(</span><span class="ID">True</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   7 </span>    <span class="ResWord">if</span> <span class="ID">dialog</span><span class="Operator">.</span><span
class="ID">ShowModal</span><span class="Operator">(</span><span class="Operator">)</span> <span class="Operator">==</span> <span class="ID">wx</span><span class="Operator">.</span><span
class="ID">ID_OK</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   8 </span>        <span class="ID">data</span> <span class="Operator">=</span> <span class="ID">dialog</span><span
class="Operator">.</span><span class="ID">GetColourData</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   9 </span>        <span class="ResWord">print</span> <span class="String">'You selected: %s\n'</span> <span class="Operator">%</span> <span
class="ID">str</span><span class="Operator">(</span><span class="ID">data</span><span class="Operator">.</span><span class="ID">GetColour</span><span class="Operator">(</span><span
class="Operator">)</span><span class="Operator">.</span><span class="ID">Get</span><span class="Operator">(</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  10 </span>    <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">Destroy</span><span class="Operator">(</span><span
class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-534" class="anchor"/><span id="line-535" class="anchor"/><p class="line867"><strong>图9.9</strong> <span id="line-536" class="anchor"/><span id="line-537"
class="anchor"/></p><p class="line867"><img title="attachment:w9.9.gif" src="/moin/WxPythonInAction/ChapterNine?action=AttachFile&amp;do=get&amp;target=w9.9.gif" class="attachment"/> <span
id="line-538" class="anchor"/><span id="line-539" class="anchor"/><span id="line-540" class="anchor"/></p><p
class="line862">用于颜色选择器的<tt>wxPython</tt>的类是<tt>wx.ColourDialog</tt>。它的构造函数很简单，没有太多的参数： <span id="line-541" class="anchor"/><span id="line-542"
class="anchor"/></p><p class="line867"><tt>wx.ColourDialog(parent</tt>, <tt>data</tt>=<tt>None)</tt> <span id="line-543" class="anchor"/><span id="line-544" class="anchor"/></p><p
class="line867"><tt>data</tt>参数是类<tt>wx.ColourData</tt>的实例，它比相应字体的更简单。它只包含默认的没有参数的构造函数和后面的三个属性： <span id="line-545" class="anchor"/><span
id="line-546" class="anchor"/></p><p
class="line862">1、<tt>GetChooseFull</tt>/<tt>SetChooseFull(flag)</tt>：仅在微软<tt>Windows</tt>下工作。当设置后，将显示完整的对话框，包括自定义颜色选择器。如果不设置，则自定义颜色选择器不被显示。
<span id="line-547" class="anchor"/><span id="line-548" class="anchor"/></p><p
class="line862">2、<tt>GetColour</tt>/<tt>SetColour(colour)</tt>：当图表被关闭后，调用<tt>get</tt>*来看用户的选择。最初它被设置为<tt>black</tt>。如果在对话框显示之前设置了它，那么对话框最初显示为该颜色。
<span id="line-549" class="anchor"/><span id="line-550" class="anchor"/></p><p class="line862">3、<tt>GetCustomColour(i)</tt>/<tt>SetCustomColour(i</tt>,
<tt>colour)</tt>：根据自定义的颜色数组中的索引i来返回或设置元素。i位于[0,15]之间。初始时，所有的自定义颜色都是白色。 <span id="line-551" class="anchor"/><span id="line-552"
class="anchor"/></p><p class="line862">一个回避了<tt>wx.ColorData</tt>的使用颜色对话框的便利函数是： <span id="line-553" class="anchor"/><span id="line-554" class="anchor"/></p><p
class="line867"><tt>wx.GetColourFromUser(parent</tt>, <tt>colInit)</tt> <span id="line-555" class="anchor"/><span id="line-556" class="anchor"/></p><p
class="line867"><tt>colInit</tt>是<tt>wx.Colour</tt>的一个实例，并且当对话框显示时它是对话框的初始的值。函数的返回值也是一个<tt>wx.Colour</tt>的实例。如果用户通过<tt>OK</tt>关闭了对话框，那么方法<tt>wx.Colour.OK()</tt>返回<tt>True</tt>。如果用户通过<tt>Cancel</tt>关闭了对话框，那么方法<tt>wx.Colour.OK()</tt>返回<tt>False</tt>。
<span id="line-557" class="anchor"/><span id="line-558" class="anchor"/><span id="line-559" class="anchor"/></p><p class="line867">
</p><h3 id="head-f99b8cf7c175ff667eee95b292bf7e878e0d595e">2.4. 如何使用户能够浏览图像？</h3>
<span id="line-560" class="anchor"/><span id="line-561" class="anchor"/><span id="line-562" class="anchor"/><p
class="line862">如果你在你的程序中做图形处理，那么在他们浏览文件树时使用缩略图是有帮助的。用于该目的的<tt>wxPython</tt>对话框被称为<tt>wx.lib.imagebrowser.ImageDialog</tt>。图9.10显示了一个例子。
<span id="line-563" class="anchor"/><span id="line-564" class="anchor"/></p><p class="line874">例9.10显示了用于该图像浏览对话框的简单的代码。 <span id="line-565" class="anchor"/><span
id="line-566" class="anchor"/><span id="line-567" class="anchor"/></p><p class="line867"><strong>例9.10</strong>  <span id="line-568"
class="anchor"/><strong>创建一个图像浏览对话框</strong> <span id="line-569" class="anchor"/><span id="line-570" class="anchor"/><span id="line-571" class="anchor"/><span id="line-572"
class="anchor"/><span id="line-573" class="anchor"/><span id="line-574" class="anchor"/><span id="line-575" class="anchor"/><span id="line-576" class="anchor"/><span id="line-577"
class="anchor"/><span id="line-578" class="anchor"/><span id="line-579" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-7216652443c36da7fc938b30a4756dfe0aa346d9_023\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-7216652443c36da7fc938b30a4756dfe0aa346d9_023', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-7216652443c36da7fc938b30a4756dfe0aa346d9_023" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">import</span>
<span class="ID">wx</span></span>
<span class="line"><span class="LineNumber">   2 </span><span class="ResWord">import</span> <span class="ID">wx</span><span class="Operator">.</span><span
class="ID">lib</span><span class="Operator">.</span><span class="ID">imagebrowser</span> <span class="ResWord">as</span> <span class="ID">imagebrowser</span></span>
<span class="line"><span class="LineNumber">   3 </span></span>
<span class="line"><span class="LineNumber">   4 </span><span class="ResWord">if</span> <span class="ID">__name__</span> <span class="Operator">==</span> <span
class="String">"__main__"</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   5 </span>    <span class="ID">app</span> <span class="Operator">=</span> <span class="ID">wx</span><span
class="Operator">.</span><span class="ID">PySimpleApp</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   6 </span>    <span class="ID">dialog</span> <span class="Operator">=</span> <span class="ID">imagebrowser</span><span
class="Operator">.</span><span class="ID">ImageDialog</span><span class="Operator">(</span><span class="ID">None</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   7 </span>    <span class="ResWord">if</span> <span class="ID">dialog</span><span class="Operator">.</span><span
class="ID">ShowModal</span><span class="Operator">(</span><span class="Operator">)</span> <span class="Operator">==</span> <span class="ID">wx</span><span
class="Operator">.</span><span class="ID">ID_OK</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   8 </span>        <span class="ResWord">print</span> <span class="String">"You Selected File: "</span> <span
class="Operator">+</span> <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">GetFile</span><span class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   9 </span>    <span class="ID">dialog</span><span class="Operator">.</span><span class="ID">Destroy</span><span
class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-580" class="anchor"/><span id="line-581" class="anchor"/><p class="line867"><strong>图9.10</strong> <span id="line-582" class="anchor"/><span
id="line-583" class="anchor"/></p><p class="line867"><img title="attachment:w9.10.gif"
src="/moin/WxPythonInAction/ChapterNine?action=AttachFile&amp;do=get&amp;target=w9.10.gif" class="attachment"/> <span id="line-584" class="anchor"/><span id="line-585"
class="anchor"/><span id="line-586" class="anchor"/></p><p
class="line867"><tt>wx.lib.imagebrowser.ImageDialog</tt>类是十分简单的，并有相对较少的选项供程序员去设置。要改变该对话框的行为的话，请查阅改变显示的文件类型的<tt>Python</tt>源码。类的构造函数要求两个参数。
<span id="line-587" class="anchor"/><span id="line-588" class="anchor"/></p><p class="line867"><tt>ImageDialog(parent</tt>, <tt>set_dir</tt>=<tt>None)</tt> <span
id="line-589" class="anchor"/><span id="line-590" class="anchor"/></p><p
class="line867"><tt>set_dir</tt>参数是对话框显示时所在的目录。如果不设置，那么使用应用程序当前的工作目录。在对话框被关闭后，<tt>GetFile()</tt>返回所选文件的完整路径字符串，<tt>GetDirectory()</tt>只返回目录部分。
<span id="line-591" class="anchor"/><span id="line-592" class="anchor"/><span id="line-593" class="anchor"/><span id="line-594" class="anchor"/></p><p class="line867">
</p><h2 id="head-43ae28adcea0aae7c197d458fc0c46973fd66f7b">3. 创建向导</h2>
<span id="line-595" class="anchor"/><span id="line-596" class="anchor"/><span id="line-597" class="anchor"/><p
class="line874">向导是一系列被链接在一起的简单对话框，它使得用户一步步地跟随它们。通常它们被用于指导用户的安装或一个复杂的配置过程。图9.11显示了一个向导示例。 <span
id="line-598" class="anchor"/><span id="line-599" class="anchor"/><span id="line-600" class="anchor"/></p><p class="line867"><strong>图9.11</strong> <span id="line-601"
class="anchor"/><span id="line-602" class="anchor"/></p><p class="line867"><img title="attachment:w9.11.gif"
src="/moin/WxPythonInAction/ChapterNine?action=AttachFile&amp;do=get&amp;target=w9.11.gif" class="attachment"/> <span id="line-603" class="anchor"/><span id="line-604"
class="anchor"/><span id="line-605" class="anchor"/></p><p
class="line862">在<tt>wxPython</tt>中，一个向导是一系列的页面，它由类<tt>wx.wizard.Wizard</tt>的一个实例控制。向导实例管理用户的页面切换事件。这些页面自身也是类<tt>wx.wizard.WizardPageSimple</tt>或<tt>wx.wizard.WizardPage</tt>的实例。这两种类的实例，它们只不过是附加了必要的管理页面链接逻辑的<tt>wx.Panel</tt>的实例。已证明这两个实例之间的区别仅当用户按下<tt>Next</tt>按钮时。<tt>wx.wizard.WizardPage</tt>的实例使你能够动态地决定浏览哪页，而<tt>wx.wizard.WizardPageSimple</tt>的实例要求向导被显示前，顺序被预先设置。例9.11显示了产生图9.11的代码。
<span id="line-606" class="anchor"/><span id="line-607" class="anchor"/><span id="line-608" class="anchor"/></p><p class="line867"><strong>例9.11</strong>  <span
id="line-609" class="anchor"/><strong>创建一个简单的静态向导</strong> <span id="line-610" class="anchor"/><span id="line-611" class="anchor"/><span id="line-612"
class="anchor"/><span id="line-613" class="anchor"/><span id="line-614" class="anchor"/><span id="line-615" class="anchor"/><span id="line-616" class="anchor"/><span
id="line-617" class="anchor"/><span id="line-618" class="anchor"/><span id="line-619" class="anchor"/><span id="line-620" class="anchor"/><span id="line-621"
class="anchor"/><span id="line-622" class="anchor"/><span id="line-623" class="anchor"/><span id="line-624" class="anchor"/><span id="line-625" class="anchor"/><span
id="line-626" class="anchor"/><span id="line-627" class="anchor"/><span id="line-628" class="anchor"/><span id="line-629" class="anchor"/><span id="line-630"
class="anchor"/><span id="line-631" class="anchor"/><span id="line-632" class="anchor"/><span id="line-633" class="anchor"/><span id="line-634" class="anchor"/><span
id="line-635" class="anchor"/><span id="line-636" class="anchor"/><span id="line-637" class="anchor"/><span id="line-638" class="anchor"/><span id="line-639"
class="anchor"/><span id="line-640" class="anchor"/><span id="line-641" class="anchor"/><span id="line-642" class="anchor"/><span id="line-643" class="anchor"/><span
id="line-644" class="anchor"/><span id="line-645" class="anchor"/><span id="line-646" class="anchor"/><span id="line-647" class="anchor"/><span id="line-648"
class="anchor"/><span id="line-649" class="anchor"/><span id="line-650" class="anchor"/><span id="line-651" class="anchor"/><span id="line-652" class="anchor"/><span
id="line-653" class="anchor"/><span id="line-654" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-f130c673e1ac0cbcd6d29f5a16f196b9f296ce69_024\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-f130c673e1ac0cbcd6d29f5a16f196b9f296ce69_024', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-f130c673e1ac0cbcd6d29f5a16f196b9f296ce69_024" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span
class="ResWord">import</span> <span class="ID">wx</span></span>
<span class="line"><span class="LineNumber">   2 </span><span class="ResWord">import</span> <span class="ID">wx</span><span class="Operator">.</span><span
class="ID">wizard</span></span>
<span class="line"><span class="LineNumber">   3 </span></span>
<span class="line"><span class="LineNumber">   4 </span><span class="ResWord">class</span> <span class="ID">TitledPage</span><span
class="Operator">(</span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">wizard</span><span class="Operator">.</span><span
class="ID">WizardPageSimple</span><span class="Operator">)</span><span class="Operator">:</span><span class="Comment">#1 创建页面样板</span></span>
<span class="line"><span class="LineNumber">   5 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span
class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">,</span> <span
class="ID">title</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   6 </span>        <span class="ID">wx</span><span class="Operator">.</span><span class="ID">wizard</span><span
class="Operator">.</span><span class="ID">WizardPageSimple</span><span class="Operator">.</span><span class="ID">__init__</span><span
class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   7 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sizer</span>
<span class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">BoxSizer</span><span
class="Operator">(</span><span class="ID">wx</span><span class="Operator">.</span><span class="ID">VERTICAL</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   8 </span>        <span class="ID">self</span><span class="Operator">.</span><span
class="ID">SetSizer</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">sizer</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   9 </span>        <span class="ID">titleText</span> <span class="Operator">=</span> <span
class="ID">wx</span><span class="Operator">.</span><span class="ID">StaticText</span><span class="Operator">(</span><span class="ID">self</span><span
class="Operator">,</span> <span class="Operator">-</span><span class="Number">1</span><span class="Operator">,</span> <span class="ID">title</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  10 </span>        <span class="ID">titleText</span><span class="Operator">.</span><span
class="ID">SetFont</span><span class="Operator">(</span></span>
<span class="line"><span class="LineNumber">  11 </span>                <span class="ID">wx</span><span class="Operator">.</span><span
class="ID">Font</span><span class="Operator">(</span><span class="Number">18</span><span class="Operator">,</span> <span class="ID">wx</span><span
class="Operator">.</span><span class="ID">SWISS</span><span class="Operator">,</span> <span class="ID">wx</span><span class="Operator">.</span><span
class="ID">NORMAL</span><span class="Operator">,</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">BOLD</span><span
class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  12 </span>        <span class="ID">self</span><span class="Operator">.</span><span
class="ID">sizer</span><span class="Operator">.</span><span class="ID">Add</span><span class="Operator">(</span><span class="ID">titleText</span><span
class="Operator">,</span> <span class="Number">0</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">  13 </span>                <span class="ID">wx</span><span class="Operator">.</span><span
class="ID">ALIGN_CENTRE</span> <span class="Operator">|</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">ALL</span><span
class="Operator">,</span> <span class="Number">5</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  14 </span>        <span class="ID">self</span><span class="Operator">.</span><span
class="ID">sizer</span><span class="Operator">.</span><span class="ID">Add</span><span class="Operator">(</span><span class="ID">wx</span><span
class="Operator">.</span><span class="ID">StaticLine</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span
class="Operator">-</span><span class="Number">1</span><span class="Operator">)</span><span class="Operator">,</span> <span class="Number">0</span><span
class="Operator">,</span></span>
<span class="line"><span class="LineNumber">  15 </span>                <span class="ID">wx</span><span class="Operator">.</span><span
class="ID">EXPAND</span> <span class="Operator">|</span> <span class="ID">wx</span><span class="Operator">.</span><span class="ID">ALL</span><span
class="Operator">,</span> <span class="Number">5</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  16 </span></span>
<span class="line"><span class="LineNumber">  17 </span><span class="ResWord">if</span> <span class="ID">__name__</span> <span class="Operator">==</span>
<span class="String">"__main__"</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  18 </span>    <span class="ID">app</span> <span class="Operator">=</span> <span class="ID">wx</span><span
class="Operator">.</span><span class="ID">PySimpleApp</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  19 </span>    <span class="ID">wizard</span> <span class="Operator">=</span> <span class="ID">wx</span><span
class="Operator">.</span><span class="ID">wizard</span><span class="Operator">.</span><span class="ID">Wizard</span><span class="Operator">(</span><span
class="ID">None</span><span class="Operator">,</span> <span class="Operator">-</span><span class="Number">1</span><span class="Operator">,</span> <span
class="String">"Simple Wizard"</span><span class="Operator">)</span><span class="Comment"># 创建向导实例</span></span>
<span class="line"><span class="LineNumber">  20 </span></span>
<span class="line"><span class="LineNumber">  21 </span>    <span class="Comment"># 创建向导页面</span></span>
<span class="line"><span class="LineNumber">  22 </span><span class="Comment"/>    <span class="ID">page1</span> <span class="Operator">=</span> <span
class="ID">TitledPage</span><span class="Operator">(</span><span class="ID">wizard</span><span class="Operator">,</span> <span class="String">"Page
1"</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  23 </span>    <span class="ID">page2</span> <span class="Operator">=</span> <span
class="ID">TitledPage</span><span class="Operator">(</span><span class="ID">wizard</span><span class="Operator">,</span> <span class="String">"Page
2"</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  24 </span>    <span class="ID">page3</span> <span class="Operator">=</span> <span
class="ID">TitledPage</span><span class="Operator">(</span><span class="ID">wizard</span><span class="Operator">,</span> <span class="String">"Page
3"</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  25 </span>    <span class="ID">page4</span> <span class="Operator">=</span> <span
class="ID">TitledPage</span><span class="Operator">(</span><span class="ID">wizard</span><span class="Operator">,</span> <span class="String">"Page
4"</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  26 </span></span>
<span class="line"><span class="LineNumber">  27 </span>    <span class="ID">page1</span><span class="Operator">.</span><span class="ID">sizer</span><span
class="Operator">.</span><span class="ID">Add</span><span class="Operator">(</span><span class="ID">wx</span><span class="Operator">.</span><span
class="ID">StaticText</span><span class="Operator">(</span><span class="ID">page1</span><span class="Operator">,</span> <span class="Operator">-</span><span
class="Number">1</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">  28 </span>            <span class="String">"Testing the wizard"</span><span class="Operator">)</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  29 </span>    <span class="ID">page4</span><span class="Operator">.</span><span class="ID">sizer</span><span
class="Operator">.</span><span class="ID">Add</span><span class="Operator">(</span><span class="ID">wx</span><span class="Operator">.</span><span
class="ID">StaticText</span><span class="Operator">(</span><span class="ID">page4</span><span class="Operator">,</span> <span class="Operator">-</span><span
class="Number">1</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">  30 </span>            <span class="String">"This is the last page."</span><span class="Operator">)</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  31 </span></span>
<span class="line"><span class="LineNumber">  32 </span>    <span class="Comment">#2 创建页面链接</span></span>
<span class="line"><span class="LineNumber">  33 </span><span class="Comment"/>    <span class="ID">wx</span><span class="Operator">.</span><span
class="ID">wizard</span><span class="Operator">.</span><span class="ID">WizardPageSimple_Chain</span><span class="Operator">(</span><span
class="ID">page1</span><span class="Operator">,</span> <span class="ID">page2</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  34 </span>    <span class="ID">wx</span><span class="Operator">.</span><span class="ID">wizard</span><span
class="Operator">.</span><span class="ID">WizardPageSimple_Chain</span><span class="Operator">(</span><span class="ID">page2</span><span
class="Operator">,</span> <span class="ID">page3</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  35 </span>    <span class="ID">wx</span><span class="Operator">.</span><span class="ID">wizard</span><span
class="Operator">.</span><span class="ID">WizardPageSimple_Chain</span><span class="Operator">(</span><span class="ID">page3</span><span
class="Operator">,</span> <span class="ID">page4</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  36 </span></span>
<span class="line"><span class="LineNumber">  37 </span>    <span class="ID">wizard</span><span class="Operator">.</span><span
class="ID">FitToPage</span><span class="Operator">(</span><span class="ID">page1</span><span class="Operator">)</span><span class="Comment">#3
调整向导的尺寸</span></span>
<span class="line"><span class="LineNumber">  38 </span></span>
<span class="line"><span class="LineNumber">  39 </span>    <span class="ResWord">if</span> <span class="ID">wizard</span><span
class="Operator">.</span><span class="ID">RunWizard</span><span class="Operator">(</span><span class="ID">page1</span><span class="Operator">)</span><span
class="Operator">:</span><span class="Comment">#4 运行向导</span></span>
<span class="line"><span class="LineNumber">  40 </span>        <span class="ResWord">print</span> <span class="String">"Success"</span></span>
<span class="line"><span class="LineNumber">  41 </span></span>
<span class="line"><span class="LineNumber">  42 </span>    <span class="ID">wizard</span><span class="Operator">.</span><span
class="ID">Destroy</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-655" class="anchor"/><span id="line-656" class="anchor"/><p class="line867"><strong>#1</strong>
为了便于移植的目的，我们创建了一个简单的小的页面，它包含了一个静态文本标题。通常情况下，这儿还包含一些表单元素，可能还有一些要用户输入的数据。 <span
id="line-657" class="anchor"/><span id="line-658" class="anchor"/><span id="line-659" class="anchor"/></p><p class="line867"><strong>#2</strong>
<tt>wx.wizard.WizardPageSimple_Chain()</tt>函数是一个便利的方法，它以两个页面为参数相互地调用它们的<tt>SetNext()</tt>和<tt>SetPrev()</tt>方法。 <span
id="line-660" class="anchor"/><span id="line-661" class="anchor"/><span id="line-662" class="anchor"/></p><p class="line867"><strong>#3</strong>
<tt>FitToSize()</tt>根据页面参数及该页链条上的所有页面调整向导的大小。该方法只能在页面链接被创建后调用。 <span id="line-663" class="anchor"/><span
id="line-664" class="anchor"/><span id="line-665" class="anchor"/></p><p class="line867"><strong>#4</strong>
该方法的参数是向导开始时的页面。向导在它到达一个没有下一页的页面时知道去关闭。如果用户浏览了整个向导并通过按下<tt>Finish</tt>按钮退出的话，<tt>RunWizard()</tt>方法返回<tt>True</tt>。
<span id="line-666" class="anchor"/><span id="line-667" class="anchor"/></p><p
class="line862">创建<tt>wx.wizard.Wizard</tt>实例是使用向导的第一步。其构造函数如下： <span id="line-668" class="anchor"/><span id="line-669"
class="anchor"/><span id="line-670" class="anchor"/><span id="line-671" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-637258f93baf2b3b56de97bda2fde6afce23091d_025\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-637258f93baf2b3b56de97bda2fde6afce23091d_025', 1, 1);"
href="#">切换行号显示</a>
<pre lang="en" id="CA-637258f93baf2b3b56de97bda2fde6afce23091d_025" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span
class="ID">wx</span><span class="Operator">.</span><span class="ID">wizard</span><span class="Operator">.</span><span
class="ID">Wizard</span><span class="Operator">(</span><span class="ID">parent</span><span class="Operator">,</span> <span
class="ID">id</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">1</span><span
class="Operator">,</span> <span class="ID">title</span><span class="Operator">=</span><span class="ID">wx</span><span
class="Operator">.</span><span class="ID">EmptyString</span><span class="Operator">,</span></span>
<span class="line"><span class="LineNumber">   2 </span>    <span class="ID">bitmap</span><span class="Operator">=</span><span
class="ID">wx</span><span class="Operator">.</span><span class="ID">NullBitmap</span><span class="Operator">,</span> <span
class="ID">pos</span><span class="Operator">=</span><span class="ID">wx</span><span class="Operator">.</span><span
class="ID">DefaultPosition</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-672" class="anchor"/><p class="line862">在这里的<tt>parent</tt>, <tt>id</tt>, <tt>title</tt>,
<tt>pos</tt>和<tt>wx.Panel</tt>的意义相同。如果设置了<tt>bitmap</tt>参数，那么该参数将显示在每一页上。这儿只有一个样式标记：<tt>wx.wizard.WIZARD_EX_HELPBUTTON</tt>，它显示一个帮助按钮。这是一个扩展的标记，需要使用第8章所说的两步创建过程。
<span id="line-673" class="anchor"/><span id="line-674" class="anchor"/></p><p
class="line862">通常，你将调用例9.11的#3中所示的<tt>FitToSize()</tt>来管理窗口的尺寸，但是你也可以通过调用带有一个元组或<tt>wx.Size</tt>实例的<tt>SetPageSize()</tt>来设置一个最小的尺寸。<tt>GetPageSize()</tt>方法返回当前的尺寸，在这两种情况下，该尺寸仅用于对话框中的单个的页面部分，而作为一个整体的对话框将更大一些。
<span id="line-675" class="anchor"/><span id="line-676" class="anchor"/></p><p
class="line862">你可以管理该类中的页面。方法<tt>GetCurrentPage()</tt>返回当前被显示的页面，如果该向导当前没有被显示，该方法返回<tt>None</tt>。你可以通过调用<tt>HasNextPage()</tt>和<tt>HasPrevPage()</tt>来确定当前页是否有下一页或上一页。
<span id="line-677" class="anchor"/>使用<tt>RunWizard()</tt>来运行该向导，如例9.11中#4的说明。 <span id="line-678" class="anchor"/><span
id="line-679" class="anchor"/></p><p
class="line862">向导产生的命令事件如表9.5所示，你可以捕获这些事件，以便作专门的处理。这些事件对象属于类<tt>wx.wizard.WizardEvent</tt>，它们提供了两个可用的方法。<tt>GetPage()</tt>返回<tt>wx.WizardPage</tt>的实例，该实例在向导事件产生时是有效，而非作为事件结果被显示的实例。如果事件是前进一页，那么<tt>GetDirection()</tt>返回<tt>True</tt>，如果事件是后退一页，那么<tt>GetDirection()</tt>返回<tt>False</tt>。
<span id="line-680" class="anchor"/><span id="line-681" class="anchor"/><span id="line-682" class="anchor"/></p><p
class="line867"><strong>表9.5 <tt>wx.wizard.WizardDialog</tt>的事件</strong> <span id="line-683" class="anchor"/><span id="line-684"
class="anchor"/></p><div><table><tbody><tr>  <td><p class="line891"><tt>EVT_WIZARD_CANCEL</tt></p></td>
<td><p class="line862">当用户按下<tt>Cancel</tt>按钮时产生。该事件可以使用<tt>Veto()</tt>来否决，这种情况下，对话框将不会消失。</p></td>
</tr>
<tr>  <td><span id="line-685" class="anchor"/><p class="line891"><tt>EVT_WIZARD_FINISHED</tt></p></td>
<td><p class="line862">当用户按下<tt>Finish</tt>按钮时产生。</p></td>
</tr>
<tr>  <td><span id="line-686" class="anchor"/><p class="line891"><tt>EVT_WIZARD_HELP</tt></p></td>
<td><p class="line862">当用户按下<tt>Help</tt>按钮时产生。</p></td>
</tr>
<tr>  <td><span id="line-687" class="anchor"/><p class="line891"><tt>EVT_WIZARD_PAGE_CHANGED</tt></p></td>
<td><p class="line862">在页面被切换后产生。</p></td>
</tr>
<tr>  <td><span id="line-688" class="anchor"/><p class="line891"><tt>EVT_WIZARD_PAGE_CHANGING</tt></p></td>
<td><p
class="line862">当用户已请求了一个页面切换时产生，这时页面还没有发生切换。这个事件可以被否决（例如，如果页面上有一个必须被填写的字段）。</p></td>
</tr>
</tbody></table></div><span id="line-689" class="anchor"/><span id="line-690" class="anchor"/><p
class="line867"><tt>wx.wizard.WizardPageSimple</tt>类被当作一个面板一样。它的构造函数使你可以设置上一页和下一页，如下所示： <span
id="line-691" class="anchor"/><span id="line-692" class="anchor"/></p><p
class="line867"><tt>wx.wizard.WizardPageSimple(parent</tt>=<tt>None</tt>, <tt>prev</tt>=<tt>None</tt>,
<tt>next</tt>=<tt>None)</tt> <span id="line-693" class="anchor"/><span id="line-694" class="anchor"/></p><p
class="line862">如果你想在构造器中设置它们，你可以使用<tt>SetPrev()</tt>和<tt>SetNext()</tt>方法。如果那样太麻烦，你可以使用<tt>wx.wizard.WizardPageSimple_Chain()</tt>，它设置两页间的链接关系。
<span id="line-695" class="anchor"/><span id="line-696" class="anchor"/></p><p
class="line862">向导页的复杂版：<tt>wx.wizard.WizardPage</tt>，稍微不同。它没有显式地设置前一页和下一页，而是使你能够使用更复杂的逻辑去定义下一步到哪儿。它的构造函数如下：
<span id="line-697" class="anchor"/><span id="line-698" class="anchor"/><span id="line-699" class="anchor"/></p><div lang="en"
dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-e34f46b0458d967cebd150925e4d5194b08c9f7e_026\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-e34f46b0458d967cebd150925e4d5194b08c9f7e_026', 1,
1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-e34f46b0458d967cebd150925e4d5194b08c9f7e_026" dir="ltr"><span class="line"><span
class="LineNumber">   1 </span><span class="ID">wx</span><span class="Operator">.</span><span
class="ID">WizardPage</span><span class="Operator">(</span><span class="ID">parent</span><span
class="Operator">,</span> <span class="ID">bitmap</span><span class="Operator">=</span><span
class="ID">wx</span><span class="Operator">.</span><span class="ID">NullBitmap</span><span
class="Operator">,</span> <span class="ID">resource</span><span class="Operator">=</span><span
class="ID">None</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-700" class="anchor"/><p
class="line862">如果<tt>bitmap</tt>参数被设置了，那么该参数覆盖父向导中所设置的位图。<tt>resource</tt>参数从一个<tt>wxPython</tt>资源装载页面。要处理页面逻辑，就要覆盖<tt>GetPrev()</tt>和<tt>GetNext()</tt>方法来返回你想要向导下一步的位置。该类的一个典型的用法是根据用户对当前页的响应动态地决定接下来的页面。
<span id="line-701" class="anchor"/><span id="line-702" class="anchor"/><span id="line-703" class="anchor"/></p><p
class="line867">
</p><h2 id="head-b148cabf57f2fab24389968b4c1a4b887ef6604d">4. 显示启动提示</h2>
<span id="line-704" class="anchor"/><span id="line-705" class="anchor"/><span id="line-706" class="anchor"/><p
class="line862">许多应用程序都使用启动提示来作为一种向用户介绍该程序的特性等信息的方法。在<tt>wxPython</tt>中有一个非常简单的机制用来显示启动提示。图9.12显示了一个提示窗口的示例。
<span id="line-707" class="anchor"/><span id="line-708" class="anchor"/><span id="line-709" class="anchor"/></p><p
class="line867"><strong>图9.12</strong> <span id="line-710" class="anchor"/><span id="line-711"
class="anchor"/></p><p class="line867"><img title="attachment:w9.12.gif"
src="/moin/WxPythonInAction/ChapterNine?action=AttachFile&amp;do=get&amp;target=w9.12.gif" class="attachment"/>
<span id="line-712" class="anchor"/><span id="line-713" class="anchor"/><span id="line-714" class="anchor"/></p><p
class="line874">例9.12显示了相关代码 <span id="line-715" class="anchor"/><span id="line-716" class="anchor"/><span
id="line-717" class="anchor"/></p><p class="line867"><strong>例9.12</strong> <span id="line-718"
class="anchor"/><span id="line-719" class="anchor"/><span id="line-720" class="anchor"/><span id="line-721"
class="anchor"/><span id="line-722" class="anchor"/><span id="line-723" class="anchor"/><span id="line-724"
class="anchor"/><span id="line-725" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-734f4491b87494fb02090a848786b8919a482c93_027\', 1,
1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return
togglenumber('CA-734f4491b87494fb02090a848786b8919a482c93_027', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-734f4491b87494fb02090a848786b8919a482c93_027" dir="ltr"><span
class="line"><span class="LineNumber">   1 </span><span class="ResWord">import</span> <span
class="ID">wx</span></span>
<span class="line"><span class="LineNumber">   2 </span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">if</span> <span
class="ID">__name__</span> <span class="Operator">==</span> <span
class="String">"__main__"</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   4 </span>    <span class="ID">app</span> <span
class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span
class="ID">PySimpleApp</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   5 </span>    <span class="ID">provider</span> <span
class="Operator">=</span> <span class="ID">wx</span><span class="Operator">.</span><span
class="ID">CreateFileTipProvider</span><span class="Operator">(</span><span
class="String">"tips.txt"</span><span class="Operator">,</span> <span class="Number">0</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   6 </span>    <span class="ID">wx</span><span
class="Operator">.</span><span class="ID">ShowTip</span><span class="Operator">(</span><span
class="ID">None</span><span class="Operator">,</span> <span class="ID">provider</span><span
class="Operator">,</span> <span class="ID">True</span><span class="Operator">)</span><span
class="Text"/></span>
</pre></div><span id="line-726" class="anchor"/><p
class="line862">有两个便利的函数用来管理启动提示。第一个如下创建一个<tt>wx.TipProvider</tt>：
<span id="line-727" class="anchor"/><span id="line-728" class="anchor"/><span id="line-729"
class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return
togglenumber(\'CA-c29c8e5263d64e7b7f1d06573c7e67f2d6735b02_028\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return
togglenumber('CA-c29c8e5263d64e7b7f1d06573c7e67f2d6735b02_028', 1, 1);"
href="#">切换行号显示</a>
<pre lang="en" id="CA-c29c8e5263d64e7b7f1d06573c7e67f2d6735b02_028"
dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span
class="ID">wx</span><span class="Operator">.</span><span
class="ID">CreateFileTipProvider</span><span class="Operator">(</span><span
class="ID">filename</span><span class="Operator">,</span> <span
class="ID">currentTip</span><span class="Operator">)</span><span
class="Text"/></span>
</pre></div><span id="line-730" class="anchor"/><p
class="line867"><tt>filename</tt>是包含提示字符串的文件的名字。<tt>currentTip</tt>是该文件中用于一开始显示的提示字符的索引，该文件中的第一个提示字符串的索引是0。
<span id="line-731" class="anchor"/><span id="line-732" class="anchor"/></p><p
class="line874">提示文件是一个简单的文本文件，其中的每一行是一个不同的提示。空白行被忽略，以#开始的行被当作注释并也被忽略。下面是上例所使用的提示文件中的内容：
<span id="line-733" class="anchor"/><span id="line-734" class="anchor"/></p><p
class="line867"><tt>You</tt> <tt>can</tt> <tt>do</tt> <tt>startup</tt>
<tt>tips</tt> <tt>very</tt> <tt>easily.</tt>  <span id="line-735"
class="anchor"/><tt>Feel</tt> <tt>the</tt> <tt>force</tt>, <tt>Luke.</tt>  <span
id="line-736" class="anchor"/><span id="line-737" class="anchor"/></p><p
class="line862">提示的提供者（<tt>provider</tt>）是类<tt>wx.PyTipProvider</tt>的一个实例。如果你需要更细化的功能，你可以创建你自己的<tt>wx.TipProvider</tt>的子类并覆盖<tt>GetTip()</tt>函数。
<span id="line-738" class="anchor"/><span id="line-739" class="anchor"/></p><p
class="line862">显示提示的函数是<tt>wx.ShowTip():</tt> <span id="line-740"
class="anchor"/><span id="line-741" class="anchor"/><span id="line-742"
class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return
togglenumber(\'CA-07b51fc5e3bb3f4879f9d34f0087e4c2440a4af2_029\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return
togglenumber('CA-07b51fc5e3bb3f4879f9d34f0087e4c2440a4af2_029', 1,
1);" href="#">切换行号显示</a>
<pre lang="en"
id="CA-07b51fc5e3bb3f4879f9d34f0087e4c2440a4af2_029"
dir="ltr"><span class="line"><span class="LineNumber">   1
</span><span class="ID">wx</span><span
class="Operator">.</span><span class="ID">ShowTip</span><span
class="Operator">(</span><span class="ID">parent</span><span
class="Operator">,</span> <span class="ID">tipProvider</span><span
class="Operator">,</span> <span
class="ID">showAtStartup</span><span
class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-743" class="anchor"/><p
class="line867"><tt>parent</tt>是父窗口，<tt>tipProvider</tt>通常创建自<tt>wx.CreateFileTipProvider</tt>。<tt>showAtStartup</tt>控制启动提示显示时，复选框是否被选择。该函数的返回值是复选框的状态值，以便你使用该值来决定你的应用程序下次启动时是否显示启动提示。
<span id="line-744" class="anchor"/><span id="line-745"
class="anchor"/><span id="line-746" class="anchor"/><span
id="line-747" class="anchor"/></p><p class="line867">
</p><h2 id="head-e3417018292e6a982b0ff654d947828ba5f4485c">5.
使用验证器（validator）来管理对话框中的数据</h2>
<span id="line-748" class="anchor"/><span id="line-749"
class="anchor"/><span id="line-750" class="anchor"/><p
class="line862">验证器是一个特殊的<tt>wxPython</tt>对象，它简化了对话框中的数据管理。当我们在第三章中讨论事件时，我们简要的提及到如果一个窗口部件有一个验证器，那么该验证器能够被事件系统自动调用。我们已经见过了几个<tt>wxPython</tt>窗口部件类的构造函数中将验证器作为参数，但是我们还没有讨论它们。
<span id="line-751" class="anchor"/><span id="line-752"
class="anchor"/></p><p class="line874">验证器有三个不相关的功能：
<span id="line-753" class="anchor"/><span id="line-754"
class="anchor"/></p><p
class="line874">1、在对话框关闭前验证控件中的数据 <span
id="line-755" class="anchor"/>2、自动与对话框传递数据 <span
id="line-756" class="anchor"/>3、验证用户键入的数据 <span
id="line-757" class="anchor"/><span id="line-758"
class="anchor"/><span id="line-759" class="anchor"/></p><p
class="line874">=== 如何使用验证器来确保正确的?荩?=== <span
id="line-760" class="anchor"/><span id="line-761"
class="anchor"/><span id="line-762" class="anchor"/></p><p
class="line862">验证器对象是<tt>wx.Validator</tt>的子类。父类是抽象的，不能直接使用。尽管在C++
<tt>wxWidget</tt>集中有一对预定义的验证器类，但是在<tt>wxPython</tt>中，你需要定义你自己的验证器类。正如我们在别处所见的，你的<tt>Python</tt>类需要继承自<tt>Python</tt>特定的子类：<tt>wx.PyValidator</tt>，并且能够覆盖该父类的所有方法。一个自定义的验证器子类必须覆盖方法<tt>Clone()</tt>，该方法应该返回验证器的相同的副本。
<span id="line-763" class="anchor"/><span id="line-764"
class="anchor"/></p><p
class="line862">一个验证器被关联到你的系统中的一个特定的窗口部件。这可以用两种方法之一来实现。第一种方法，如果窗口部件许可的话，验证器可以被作为一个参数传递给该窗口部件的构造函数。如果该窗口部件的构造函数没有一个验证器参数，你仍然可以通过创建一个验证器实例并调用该窗口部件的<tt>SetValidator(validator)</tt>方法来关联一个验证器。
<span id="line-765" class="anchor"/><span id="line-766"
class="anchor"/></p><p
class="line862">要验证控件中的数据，你可以先在你的验证器子类中覆盖<tt>Validate(parent)</tt>方法。<tt>parent</tt>参数是验证器的窗口部件的父窗口（对话框或面板）。如果必要，可以使用这个来从对话框中其它窗口部件得到数据，或者你可以完全忽略该参数。你可以使用<tt>self.GetWindow()</tt>来得到正在被验证的窗口部件的一个引用。你的<tt>Validate(parent)</tt>方法的返回值是一个布尔值。<tt>True</tt>值表示验证器的窗口部件中的数据已验证了。<tt>False</tt>表示有问题。你可以根据<tt>Validate()</tt>方法来使用<tt>x.MessageBox()</tt>去显示一个警告，但是你不应该做其它的任何可以在<tt>wxPython</tt>应用程序中引发事件的事情。
<span id="line-767" class="anchor"/><span id="line-768"
class="anchor"/></p><p
class="line867"><tt>Validate()</tt>的返回值是很重要的。它在你使用<tt>OK</tt>按钮（该按钮使用<tt>wx.ID_OK</tt>
<tt>ID</tt>）企图关闭一个对话框时发挥作用。作为对<tt>OK</tt>按钮敲击处理的一部分，<tt>wxPython</tt>调用对话框中有验证器的窗口部件的<tt>Validate()</tt>函数。如果任一验证器返回<tt>False</tt>，那么对话框不将关闭。例9.13显示了一个带有验证器的示例对话框，它检查所有文本控件中有无数据。
<span id="line-769" class="anchor"/><span id="line-770"
class="anchor"/><span id="line-771" class="anchor"/></p><p
class="line867"><strong>例9.13</strong>  <span id="line-772"
class="anchor"/><strong>检查所有文本控件有无数据的验证器</strong>
<span id="line-773" class="anchor"/><span id="line-774"
class="anchor"/><span id="line-775" class="anchor"/><span
id="line-776" class="anchor"/><span id="line-777"
class="anchor"/><span id="line-778" class="anchor"/><span
id="line-779" class="anchor"/><span id="line-780"
class="anchor"/><span id="line-781" class="anchor"/><span
id="line-782" class="anchor"/><span id="line-783"
class="anchor"/><span id="line-784" class="anchor"/><span
id="line-785" class="anchor"/><span id="line-786"
class="anchor"/><span id="line-787" class="anchor"/><span
id="line-788" class="anchor"/><span id="line-789"
class="anchor"/><span id="line-790" class="anchor"/><span
id="line-791" class="anchor"/><span id="line-792"
class="anchor"/><span id="line-793" class="anchor"/><span
id="line-794" class="anchor"/><span id="line-795"
class="anchor"/><span id="line-796" class="anchor"/><span
id="line-797" class="anchor"/><span id="line-798"
class="anchor"/><span id="line-799" class="anchor"/><span
id="line-800" class="anchor"/><span id="line-801"
class="anchor"/><span id="line-802" class="anchor"/><span
id="line-803" class="anchor"/><span id="line-804"
class="anchor"/><span id="line-805" class="anchor"/><span
id="line-806" class="anchor"/><span id="line-807"
class="anchor"/><span id="line-808" class="anchor"/><span
id="line-809" class="anchor"/><span id="line-810"
class="anchor"/><span id="line-811" class="anchor"/><span
id="line-812" class="anchor"/><span id="line-813"
class="anchor"/><span id="line-814" class="anchor"/><span
id="line-815" class="anchor"/><span id="line-816"
class="anchor"/><span id="line-817" class="anchor"/><span
id="line-818" class="anchor"/><span id="line-819"
class="anchor"/><span id="line-820" class="anchor"/><span
id="line-821" class="anchor"/><span id="line-822"
class="anchor"/><span id="line-823" class="anchor"/><span
id="line-824" class="anchor"/><span id="line-825"
class="anchor"/><span id="line-826" class="anchor"/><span
id="line-827" class="anchor"/><span id="line-828"
class="anchor"/><span id="line-829" class="anchor"/><span
id="line-830" class="anchor"/><span id="line-831"
class="anchor"/><span id="line-832" class="anchor"/><span
id="line-833" class="anchor"/><span id="line-834"
class="anchor"/><span id="line-835" class="anchor"/><span
id="line-836" class="anchor"/><span id="line-837"
class="anchor"/><span id="line-838" class="anchor"/><span
id="line-839" class="anchor"/><span id="line-840"
class="anchor"/><span id="line-841" class="anchor"/><span
id="line-842" class="anchor"/><span id="line-843"
class="anchor"/><span id="line-844" class="anchor"/><span
id="line-845" class="anchor"/><span id="line-846"
class="anchor"/><span id="line-847" class="anchor"/><span
id="line-848" class="anchor"/><span id="line-849"
class="anchor"/><span id="line-850" class="anchor"/><span
id="line-851" class="anchor"/><span id="line-852"
class="anchor"/><span id="line-853" class="anchor"/><span
id="line-854" class="anchor"/><span id="line-855"
class="anchor"/><span id="line-856" class="anchor"/><span
id="line-857" class="anchor"/><span id="line-858"
class="anchor"/><span id="line-859" class="anchor"/><span
id="line-860" class="anchor"/><span id="line-861"
class="anchor"/><span id="line-862" class="anchor"/><span
id="line-863" class="anchor"/><span id="line-864"
class="anchor"/><span id="line-865" class="anchor"/><span
id="line-866" class="anchor"/><span id="line-867"
class="anchor"/><span id="line-868" class="anchor"/><span
id="line-869" class="anchor"/></p><div lang="en" dir="ltr"
class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return
togglenumber(\'CA-ec5cada53992bfb9d6a1417a9a09117f197a91f8_030\',
1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return
togglenumber('CA-ec5cada53992bfb9d6a1417a9a09117f197a91f8_030',
1, 1);" href="#">切换行号显示</a>
<pre lang="en"
id="CA-ec5cada53992bfb9d6a1417a9a09117f197a91f8_030"
dir="ltr"><span class="line"><span
class="LineNumber">   1 </span><span
class="ResWord">import</span> <span
class="ID">wx</span></span>
<span class="line"><span class="LineNumber">   2
</span></span>
<span class="line"><span class="LineNumber">   3
</span><span class="ID">about_txt</span> <span
class="Operator">=</span> <span
class="String">"""\</span></span>
<span class="line"><span class="LineNumber">   4
</span><span class="String">The validator used in
this example will ensure that the
text</span></span>
<span class="line"><span class="LineNumber">   5
</span><span class="String">controls are not empty
when you press the Ok button, and</span></span>
<span class="line"><span class="LineNumber">   6
</span><span class="String">will not let you leave
if any of the Validations fail."""</span></span>
<span class="line"><span class="LineNumber">   7
</span></span>
<span class="line"><span class="LineNumber">   8
</span></span>
<span class="line"><span class="LineNumber">   9
</span><span class="ResWord">class</span> <span
class="ID">NotEmptyValidator</span><span
class="Operator">(</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">PyValidator</span><span
class="Operator">)</span><span
class="Operator">:</span><span class="Comment">#
创建验证器子类</span></span>
<span class="line"><span class="LineNumber">  10
</span>     <span class="ResWord">def</span> <span
class="ID">__init__</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  11
</span>         <span class="ID">wx</span><span
class="Operator">.</span><span
class="ID">PyValidator</span><span
class="Operator">.</span><span
class="ID">__init__</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  12
</span></span>
<span class="line"><span class="LineNumber">  13
</span>     <span class="ResWord">def</span> <span
class="ID">Clone</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  14
</span>         <span
class="String">"""</span></span>
<span class="line"><span class="LineNumber">  15
</span><span class="String">         Note that
every validator must implement the Clone()
method.</span></span>
<span class="line"><span class="LineNumber">  16
</span><span class="String">
"""</span></span>
<span class="line"><span class="LineNumber">  17
</span>         <span
class="ResWord">return</span> <span
class="ID">NotEmptyValidator</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  18
</span></span>
<span class="line"><span class="LineNumber">  19
</span>     <span class="ResWord">def</span> <span
class="ID">Validate</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="ID">win</span><span
class="Operator">)</span><span
class="Operator">:</span><span class="Comment">#1
使用验证器方法</span></span>
<span class="line"><span class="LineNumber">  20
</span>         <span class="ID">textCtrl</span>
<span class="Operator">=</span> <span
class="ID">self</span><span
class="Operator">.</span><span
class="ID">GetWindow</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  21
</span>         <span class="ID">text</span> <span
class="Operator">=</span> <span
class="ID">textCtrl</span><span
class="Operator">.</span><span
class="ID">GetValue</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  22
</span></span>
<span class="line"><span class="LineNumber">  23
</span>         <span class="ResWord">if</span>
<span class="ID">len</span><span
class="Operator">(</span><span
class="ID">text</span><span
class="Operator">)</span> <span
class="Operator">==</span> <span
class="Number">0</span><span
class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  24
</span>             <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">MessageBox</span><span
class="Operator">(</span><span
class="String">"This field must contain some
text!"</span><span class="Operator">,</span> <span
class="String">"Error"</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  25
</span>             <span
class="ID">textCtrl</span><span
class="Operator">.</span><span
class="ID">SetBackgroundColour</span><span
class="Operator">(</span><span
class="String">"pink"</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  26
</span>             <span
class="ID">textCtrl</span><span
class="Operator">.</span><span
class="ID">SetFocus</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  27
</span>             <span
class="ID">textCtrl</span><span
class="Operator">.</span><span
class="ID">Refresh</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  28
</span>             <span
class="ResWord">return</span> <span
class="ID">False</span></span>
<span class="line"><span class="LineNumber">  29
</span>         <span
class="ResWord">else</span><span
class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  30
</span>             <span
class="ID">textCtrl</span><span
class="Operator">.</span><span
class="ID">SetBackgroundColour</span><span
class="Operator">(</span></span>
<span class="line"><span class="LineNumber">  31
</span>                 <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">SystemSettings_GetColour</span><span
class="Operator">(</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">SYS_COLOUR_WINDOW</span><span
class="Operator">)</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  32
</span>             <span
class="ID">textCtrl</span><span
class="Operator">.</span><span
class="ID">Refresh</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  33
</span>             <span
class="ResWord">return</span> <span
class="ID">True</span></span>
<span class="line"><span class="LineNumber">  34
</span></span>
<span class="line"><span class="LineNumber">  35
</span>     <span class="ResWord">def</span> <span
class="ID">TransferToWindow</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  36
</span>         <span
class="ResWord">return</span> <span
class="ID">True</span></span>
<span class="line"><span class="LineNumber">  37
</span></span>
<span class="line"><span class="LineNumber">  38
</span>     <span class="ResWord">def</span> <span
class="ID">TransferFromWindow</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  39
</span>         <span
class="ResWord">return</span> <span
class="ID">True</span></span>
<span class="line"><span class="LineNumber">  40
</span></span>
<span class="line"><span class="LineNumber">  41
</span></span>
<span class="line"><span class="LineNumber">  42
</span></span>
<span class="line"><span class="LineNumber">  43
</span><span class="ResWord">class</span> <span
class="ID">MyDialog</span><span
class="Operator">(</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">Dialog</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  44
</span>    <span class="ResWord">def</span> <span
class="ID">__init__</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  45
</span>        <span class="ID">wx</span><span
class="Operator">.</span><span
class="ID">Dialog</span><span
class="Operator">.</span><span
class="ID">__init__</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="ID">None</span><span
class="Operator">,</span> <span
class="Operator">-</span><span
class="Number">1</span><span
class="Operator">,</span> <span
class="String">"Validators:
validating"</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  46
</span></span>
<span class="line"><span class="LineNumber">  47
</span>        <span class="Comment"># Create the
text controls</span></span>
<span class="line"><span class="LineNumber">  48
</span><span class="Comment"/>        <span
class="ID">about</span>   <span
class="Operator">=</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StaticText</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="Operator">-</span><span
class="Number">1</span><span
class="Operator">,</span> <span
class="ID">about_txt</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  49
</span>        <span class="ID">name_l</span>
<span class="Operator">=</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StaticText</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="Operator">-</span><span
class="Number">1</span><span
class="Operator">,</span> <span
class="String">"Name:"</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  50
</span>        <span class="ID">email_l</span>
<span class="Operator">=</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StaticText</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="Operator">-</span><span
class="Number">1</span><span
class="Operator">,</span> <span
class="String">"Email:"</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  51
</span>        <span class="ID">phone_l</span>
<span class="Operator">=</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StaticText</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="Operator">-</span><span
class="Number">1</span><span
class="Operator">,</span> <span
class="String">"Phone:"</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  52
</span></span>
<span class="line"><span class="LineNumber">  53
</span>        <span class="Comment">#2
使用验证器</span></span>
<span class="line"><span class="LineNumber">  54
</span><span class="Comment"/>        <span
class="ID">name_t</span>  <span
class="Operator">=</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">TextCtrl</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="ID">validator</span><span
class="Operator">=</span><span
class="ID">NotEmptyValidator</span><span
class="Operator">(</span><span
class="Operator">)</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  55
</span>        <span class="ID">email_t</span>
<span class="Operator">=</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">TextCtrl</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="ID">validator</span><span
class="Operator">=</span><span
class="ID">NotEmptyValidator</span><span
class="Operator">(</span><span
class="Operator">)</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  56
</span>        <span class="ID">phone_t</span>
<span class="Operator">=</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">TextCtrl</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="ID">validator</span><span
class="Operator">=</span><span
class="ID">NotEmptyValidator</span><span
class="Operator">(</span><span
class="Operator">)</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  57
</span></span>
<span class="line"><span class="LineNumber">  58
</span>        <span class="Comment"># Use
standard button IDs</span></span>
<span class="line"><span class="LineNumber">  59
</span><span class="Comment"/>        <span
class="ID">okay</span>   <span
class="Operator">=</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">Button</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ID_OK</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  60
</span>        <span class="ID">okay</span><span
class="Operator">.</span><span
class="ID">SetDefault</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  61
</span>        <span class="ID">cancel</span>
<span class="Operator">=</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">Button</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ID_CANCEL</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  62
</span></span>
<span class="line"><span class="LineNumber">  63
</span>        <span class="Comment"># Layout with
sizers</span></span>
<span class="line"><span class="LineNumber">  64
</span><span class="Comment"/>        <span
class="ID">sizer</span> <span
class="Operator">=</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">BoxSizer</span><span
class="Operator">(</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">VERTICAL</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  65
</span>        <span class="ID">sizer</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">about</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALL</span><span
class="Operator">,</span> <span
class="Number">5</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  66
</span>        <span class="ID">sizer</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StaticLine</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">|</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALL</span><span
class="Operator">,</span> <span
class="Number">5</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  67
</span></span>
<span class="line"><span class="LineNumber">  68
</span>        <span class="ID">fgs</span> <span
class="Operator">=</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">FlexGridSizer</span><span
class="Operator">(</span><span
class="Number">3</span><span
class="Operator">,</span> <span
class="Number">2</span><span
class="Operator">,</span> <span
class="Number">5</span><span
class="Operator">,</span> <span
class="Number">5</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  69
</span>        <span class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">name_l</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALIGN_RIGHT</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  70
</span>        <span class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">name_t</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  71
</span>        <span class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">email_l</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALIGN_RIGHT</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  72
</span>        <span class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">email_t</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  73
</span>        <span class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">phone_l</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALIGN_RIGHT</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  74
</span>        <span class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">phone_t</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  75
</span>        <span class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">AddGrowableCol</span><span
class="Operator">(</span><span
class="Number">1</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  76
</span>        <span class="ID">sizer</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">fgs</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">|</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALL</span><span
class="Operator">,</span> <span
class="Number">5</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  77
</span></span>
<span class="line"><span class="LineNumber">  78
</span>        <span class="ID">btns</span> <span
class="Operator">=</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StdDialogButtonSizer</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  79
</span>        <span class="ID">btns</span><span
class="Operator">.</span><span
class="ID">AddButton</span><span
class="Operator">(</span><span
class="ID">okay</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  80
</span>        <span class="ID">btns</span><span
class="Operator">.</span><span
class="ID">AddButton</span><span
class="Operator">(</span><span
class="ID">cancel</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  81
</span>        <span class="ID">btns</span><span
class="Operator">.</span><span
class="ID">Realize</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  82
</span>        <span class="ID">sizer</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">btns</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">|</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALL</span><span
class="Operator">,</span> <span
class="Number">5</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  83
</span></span>
<span class="line"><span class="LineNumber">  84
</span>        <span class="ID">self</span><span
class="Operator">.</span><span
class="ID">SetSizer</span><span
class="Operator">(</span><span
class="ID">sizer</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  85
</span>        <span class="ID">sizer</span><span
class="Operator">.</span><span
class="ID">Fit</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  86
</span></span>
<span class="line"><span class="LineNumber">  87
</span></span>
<span class="line"><span class="LineNumber">  88
</span><span class="ID">app</span> <span
class="Operator">=</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">PySimpleApp</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  89
</span></span>
<span class="line"><span class="LineNumber">  90
</span><span class="ID">dlg</span> <span
class="Operator">=</span> <span
class="ID">MyDialog</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  91
</span><span class="ID">dlg</span><span
class="Operator">.</span><span
class="ID">ShowModal</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  92
</span><span class="ID">dlg</span><span
class="Operator">.</span><span
class="ID">Destroy</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  93
</span></span>
<span class="line"><span class="LineNumber">  94
</span><span class="ID">app</span><span
class="Operator">.</span><span
class="ID">MainLoop</span><span
class="Operator">(</span><span
class="Operator">)</span><span
class="Text"/></span>
</pre></div><span id="line-870"
class="anchor"/><span id="line-871"
class="anchor"/><p
class="line867"><strong>#1</strong>
该方法测试基本的控件有无数据。如果没有，相应的控件的背景色变为粉红色。
<span id="line-872" class="anchor"/><span
id="line-873" class="anchor"/><span id="line-874"
class="anchor"/></p><p
class="line867"><strong>#2</strong>
这几行，对话框中的每个文本控件都关联一个验证器。
<span id="line-875" class="anchor"/><span
id="line-876" class="anchor"/></p><p
class="line874">图9.13显示了一个文本域为空就企图关闭的对话框。
<span id="line-877" class="anchor"/><span
id="line-878" class="anchor"/><span id="line-879"
class="anchor"/></p><p
class="line867"><strong>图9.13</strong> <span
id="line-880" class="anchor"/><span id="line-881"
class="anchor"/></p><p class="line867"><img
title="attachment:w9.13.gif"
src="/moin/WxPythonInAction/ChapterNine?action=AttachFile&amp;do=get&amp;target=w9.13.gif"
class="attachment"/> <span id="line-882"
class="anchor"/><span id="line-883"
class="anchor"/><span id="line-884"
class="anchor"/></p><p
class="line862">明确地告诉对话框去核对验证器的代码没有出现在示例中，因为它是<tt>wxPython</tt>事件系统的一部分。对话框与框架之间的另一区别是对话框有内建的验证器行为，而框架没有。如果你喜欢将验证器用于不在对话框内的控件，那么调用父窗口的<tt>Validate()</tt>方法。如果父窗口已设置了<tt>wx.WS_EX_VALIDATE_RECURSIVELY</tt>额外样式，那么所有的子窗口的<tt>Validate()</tt>方法也被调用。如果任一验证失败，那么<tt>Validate</tt>返回<tt>False</tt>。接下来，我们将讨论如何将验证器用于数据传输。
<span id="line-885" class="anchor"/><span
id="line-886" class="anchor"/><span id="line-887"
class="anchor"/><span id="line-888"
class="anchor"/></p><p class="line867">
</p><h3
id="head-fa78cca85c0337589654260c500595619d045e66">5.1.
如何使用验证器传递数据？</h3>
<span id="line-889" class="anchor"/><span
id="line-890" class="anchor"/><span id="line-891"
class="anchor"/><p
class="line874">验证器的第二个重要的功能是，当对话框打开时，它自动将数据传送给对话框显示，当该对话框关闭时，自动从对话框把数据传输到一个外部资源。图9.14显示了一个示例对话框。
<span id="line-892" class="anchor"/><span
id="line-893" class="anchor"/><span id="line-894"
class="anchor"/></p><p
class="line867"><strong>图9.14</strong> <span
id="line-895" class="anchor"/><span id="line-896"
class="anchor"/></p><p class="line867"><img
title="attachment:w9.14.gif"
src="/moin/WxPythonInAction/ChapterNine?action=AttachFile&amp;do=get&amp;target=w9.14.gif"
class="attachment"/> <span id="line-897"
class="anchor"/><span id="line-898"
class="anchor"/><span id="line-899"
class="anchor"/></p><p
class="line862">要实现这个，你必须在你的验证器子类中覆盖两个方法。方法<tt>TransferToWindow()</tt>在对话框打开时自动被调用。你必须使用这个方法把数据放入有验证器的窗口部件。<tt>TransferFromWindow()</tt>方法在使用<tt>OK</tt>按钮关闭对话框窗口时且数据已被验证后被自动调用。你必须使用这个方法来将数据从窗口部件移动给其它的资源。
<span id="line-900" class="anchor"/><span
id="line-901" class="anchor"/></p><p
class="line874">数据传输必须发生的事实意味着验证器必须对一个外部的数据对象有一些了解，如例9.14所示。在这个例子中，每个验证器都使用一个全局数据字典的引用和一个字典内的对于相关控件重要的关键字来被初始化。
<span id="line-902" class="anchor"/><span
id="line-903" class="anchor"/></p><p
class="line862">当对话框打开时，<tt>TransferToWindow()</tt>方法从字典中根据关键字读取数据并把数据放入文本域。当对话框关闭时，<tt>TransferFromWindow()</tt>方法反向处理并把数据写入字典。这个例子的对话框显示你传输的数据。
<span id="line-904" class="anchor"/><span
id="line-905" class="anchor"/><span id="line-906"
class="anchor"/></p><p
class="line867"><strong>例9.14</strong>  <span
id="line-907"
class="anchor"/><strong>一个数据传输验证器</strong>
<span id="line-908" class="anchor"/><span
id="line-909" class="anchor"/><span id="line-910"
class="anchor"/><span id="line-911"
class="anchor"/><span id="line-912"
class="anchor"/><span id="line-913"
class="anchor"/><span id="line-914"
class="anchor"/><span id="line-915"
class="anchor"/><span id="line-916"
class="anchor"/><span id="line-917"
class="anchor"/><span id="line-918"
class="anchor"/><span id="line-919"
class="anchor"/><span id="line-920"
class="anchor"/><span id="line-921"
class="anchor"/><span id="line-922"
class="anchor"/><span id="line-923"
class="anchor"/><span id="line-924"
class="anchor"/><span id="line-925"
class="anchor"/><span id="line-926"
class="anchor"/><span id="line-927"
class="anchor"/><span id="line-928"
class="anchor"/><span id="line-929"
class="anchor"/><span id="line-930"
class="anchor"/><span id="line-931"
class="anchor"/><span id="line-932"
class="anchor"/><span id="line-933"
class="anchor"/><span id="line-934"
class="anchor"/><span id="line-935"
class="anchor"/><span id="line-936"
class="anchor"/><span id="line-937"
class="anchor"/><span id="line-938"
class="anchor"/><span id="line-939"
class="anchor"/><span id="line-940"
class="anchor"/><span id="line-941"
class="anchor"/><span id="line-942"
class="anchor"/><span id="line-943"
class="anchor"/><span id="line-944"
class="anchor"/><span id="line-945"
class="anchor"/><span id="line-946"
class="anchor"/><span id="line-947"
class="anchor"/><span id="line-948"
class="anchor"/><span id="line-949"
class="anchor"/><span id="line-950"
class="anchor"/><span id="line-951"
class="anchor"/><span id="line-952"
class="anchor"/><span id="line-953"
class="anchor"/><span id="line-954"
class="anchor"/><span id="line-955"
class="anchor"/><span id="line-956"
class="anchor"/><span id="line-957"
class="anchor"/><span id="line-958"
class="anchor"/><span id="line-959"
class="anchor"/><span id="line-960"
class="anchor"/><span id="line-961"
class="anchor"/><span id="line-962"
class="anchor"/><span id="line-963"
class="anchor"/><span id="line-964"
class="anchor"/><span id="line-965"
class="anchor"/><span id="line-966"
class="anchor"/><span id="line-967"
class="anchor"/><span id="line-968"
class="anchor"/><span id="line-969"
class="anchor"/><span id="line-970"
class="anchor"/><span id="line-971"
class="anchor"/><span id="line-972"
class="anchor"/><span id="line-973"
class="anchor"/><span id="line-974"
class="anchor"/><span id="line-975"
class="anchor"/><span id="line-976"
class="anchor"/><span id="line-977"
class="anchor"/><span id="line-978"
class="anchor"/><span id="line-979"
class="anchor"/><span id="line-980"
class="anchor"/><span id="line-981"
class="anchor"/><span id="line-982"
class="anchor"/><span id="line-983"
class="anchor"/><span id="line-984"
class="anchor"/><span id="line-985"
class="anchor"/><span id="line-986"
class="anchor"/><span id="line-987"
class="anchor"/><span id="line-988"
class="anchor"/><span id="line-989"
class="anchor"/><span id="line-990"
class="anchor"/><span id="line-991"
class="anchor"/><span id="line-992"
class="anchor"/><span id="line-993"
class="anchor"/><span id="line-994"
class="anchor"/><span id="line-995"
class="anchor"/><span id="line-996"
class="anchor"/><span id="line-997"
class="anchor"/><span id="line-998"
class="anchor"/><span id="line-999"
class="anchor"/><span id="line-1000"
class="anchor"/><span id="line-1001"
class="anchor"/></p><div lang="en" dir="ltr"
class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return
togglenumber(\'CA-a06735917c5c905e10fd464f918d72abf397f9fb_031\',
1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers"
onclick="return
togglenumber('CA-a06735917c5c905e10fd464f918d72abf397f9fb_031',
1, 1);" href="#">切换行号显示</a>
<pre lang="en"
id="CA-a06735917c5c905e10fd464f918d72abf397f9fb_031"
dir="ltr"><span class="line"><span
class="LineNumber">   1
</span><span
class="ResWord">import</span>
<span class="ID">wx</span></span>
<span class="line"><span
class="LineNumber">   2
</span><span
class="ResWord">import</span>
<span
class="ID">pprint</span></span>
<span class="line"><span
class="LineNumber">   3
</span></span>
<span class="line"><span
class="LineNumber">   4
</span><span
class="ID">about_txt</span> <span
class="Operator">=</span> <span
class="String">"""\</span></span>
<span class="line"><span
class="LineNumber">   5
</span><span class="String">The
validator used in this example
shows how the
validator</span></span>
<span class="line"><span
class="LineNumber">   6
</span><span class="String">can be
used to transfer data to and from
each text control</span></span>
<span class="line"><span
class="LineNumber">   7
</span><span
class="String">automatically when
the dialog is shown and
dismissed."""</span></span>
<span class="line"><span
class="LineNumber">   8
</span></span>
<span class="line"><span
class="LineNumber">   9
</span></span>
<span class="line"><span
class="LineNumber">  10
</span><span
class="ResWord">class</span> <span
class="ID">DataXferValidator</span><span
class="Operator">(</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">PyValidator</span><span
class="Operator">)</span><span
class="Operator">:</span><span
class="Comment">#
声明验证器</span></span>
<span class="line"><span
class="LineNumber">  11 </span>
<span class="ResWord">def</span>
<span
class="ID">__init__</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="ID">data</span><span
class="Operator">,</span> <span
class="ID">key</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span class="line"><span
class="LineNumber">  12 </span>
<span class="ID">wx</span><span
class="Operator">.</span><span
class="ID">PyValidator</span><span
class="Operator">.</span><span
class="ID">__init__</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  13 </span>
<span class="ID">self</span><span
class="Operator">.</span><span
class="ID">data</span> <span
class="Operator">=</span> <span
class="ID">data</span></span>
<span class="line"><span
class="LineNumber">  14 </span>
<span class="ID">self</span><span
class="Operator">.</span><span
class="ID">key</span> <span
class="Operator">=</span> <span
class="ID">key</span></span>
<span class="line"><span
class="LineNumber">  15
</span></span>
<span class="line"><span
class="LineNumber">  16 </span>
<span class="ResWord">def</span>
<span class="ID">Clone</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span class="line"><span
class="LineNumber">  17 </span>
<span
class="String">"""</span></span>
<span class="line"><span
class="LineNumber">  18
</span><span class="String">
Note that every validator must
implement the Clone()
method.</span></span>
<span class="line"><span
class="LineNumber">  19
</span><span class="String">
"""</span></span>
<span class="line"><span
class="LineNumber">  20 </span>
<span
class="ResWord">return</span>
<span
class="ID">DataXferValidator</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">.</span><span
class="ID">data</span><span
class="Operator">,</span> <span
class="ID">self</span><span
class="Operator">.</span><span
class="ID">key</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  21
</span></span>
<span class="line"><span
class="LineNumber">  22 </span>
<span class="ResWord">def</span>
<span
class="ID">Validate</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="ID">win</span><span
class="Operator">)</span><span
class="Operator">:</span><span
class="Comment">#
没有验证数据</span></span>
<span class="line"><span
class="LineNumber">  23 </span>
<span
class="ResWord">return</span>
<span
class="ID">True</span></span>
<span class="line"><span
class="LineNumber">  24
</span></span>
<span class="line"><span
class="LineNumber">  25 </span>
<span class="ResWord">def</span>
<span
class="ID">TransferToWindow</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span><span
class="Operator">:</span><span
class="Comment">#
对话框打开时被调用</span></span>
<span class="line"><span
class="LineNumber">  26 </span>
<span class="ID">textCtrl</span>
<span class="Operator">=</span>
<span class="ID">self</span><span
class="Operator">.</span><span
class="ID">GetWindow</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  27 </span>
<span
class="ID">textCtrl</span><span
class="Operator">.</span><span
class="ID">SetValue</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">.</span><span
class="ID">data</span><span
class="Operator">.</span><span
class="ID">get</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">.</span><span
class="ID">key</span><span
class="Operator">,</span> <span
class="String">""</span><span
class="Operator">)</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  28 </span>
<span
class="ResWord">return</span>
<span
class="ID">True</span></span>
<span class="line"><span
class="LineNumber">  29
</span></span>
<span class="line"><span
class="LineNumber">  30 </span>
<span class="ResWord">def</span>
<span
class="ID">TransferFromWindow</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span><span
class="Operator">:</span><span
class="Comment">#
对话框关闭时被调用</span></span>
<span class="line"><span
class="LineNumber">  31 </span>
<span class="ID">textCtrl</span>
<span class="Operator">=</span>
<span class="ID">self</span><span
class="Operator">.</span><span
class="ID">GetWindow</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  32 </span>
<span class="ID">self</span><span
class="Operator">.</span><span
class="ID">data</span><span
class="Operator">[</span><span
class="ID">self</span><span
class="Operator">.</span><span
class="ID">key</span><span
class="Operator">]</span> <span
class="Operator">=</span> <span
class="ID">textCtrl</span><span
class="Operator">.</span><span
class="ID">GetValue</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  33 </span>
<span
class="ResWord">return</span>
<span
class="ID">True</span></span>
<span class="line"><span
class="LineNumber">  34
</span></span>
<span class="line"><span
class="LineNumber">  35
</span></span>
<span class="line"><span
class="LineNumber">  36
</span></span>
<span class="line"><span
class="LineNumber">  37
</span><span
class="ResWord">class</span> <span
class="ID">MyDialog</span><span
class="Operator">(</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">Dialog</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span class="line"><span
class="LineNumber">  38 </span>
<span class="ResWord">def</span>
<span
class="ID">__init__</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="ID">data</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span class="line"><span
class="LineNumber">  39 </span>
<span class="ID">wx</span><span
class="Operator">.</span><span
class="ID">Dialog</span><span
class="Operator">.</span><span
class="ID">__init__</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="ID">None</span><span
class="Operator">,</span> <span
class="Operator">-</span><span
class="Number">1</span><span
class="Operator">,</span> <span
class="String">"Validators: data
transfer"</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  40
</span></span>
<span class="line"><span
class="LineNumber">  41 </span>
<span class="Comment"># Create the
text controls</span></span>
<span class="line"><span
class="LineNumber">  42
</span><span class="Comment"/>
<span class="ID">about</span>
<span class="Operator">=</span>
<span class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StaticText</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="Operator">-</span><span
class="Number">1</span><span
class="Operator">,</span> <span
class="ID">about_txt</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  43 </span>
<span class="ID">name_l</span>
<span class="Operator">=</span>
<span class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StaticText</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="Operator">-</span><span
class="Number">1</span><span
class="Operator">,</span> <span
class="String">"Name:"</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  44 </span>
<span class="ID">email_l</span>
<span class="Operator">=</span>
<span class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StaticText</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="Operator">-</span><span
class="Number">1</span><span
class="Operator">,</span> <span
class="String">"Email:"</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  45 </span>
<span class="ID">phone_l</span>
<span class="Operator">=</span>
<span class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StaticText</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="Operator">-</span><span
class="Number">1</span><span
class="Operator">,</span> <span
class="String">"Phone:"</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  46
</span></span>
<span class="line"><span
class="LineNumber">  47 </span>
<span class="Comment">#
将验证器与窗口部件相关联</span></span>
<span class="line"><span
class="LineNumber">  48
</span><span class="Comment"/>
<span class="ID">name_t</span>
<span class="Operator">=</span>
<span class="ID">wx</span><span
class="Operator">.</span><span
class="ID">TextCtrl</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="ID">validator</span><span
class="Operator">=</span><span
class="ID">DataXferValidator</span><span
class="Operator">(</span><span
class="ID">data</span><span
class="Operator">,</span> <span
class="String">"name"</span><span
class="Operator">)</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  49 </span>
<span class="ID">email_t</span>
<span class="Operator">=</span>
<span class="ID">wx</span><span
class="Operator">.</span><span
class="ID">TextCtrl</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="ID">validator</span><span
class="Operator">=</span><span
class="ID">DataXferValidator</span><span
class="Operator">(</span><span
class="ID">data</span><span
class="Operator">,</span> <span
class="String">"email"</span><span
class="Operator">)</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  50 </span>
<span class="ID">phone_t</span>
<span class="Operator">=</span>
<span class="ID">wx</span><span
class="Operator">.</span><span
class="ID">TextCtrl</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="ID">validator</span><span
class="Operator">=</span><span
class="ID">DataXferValidator</span><span
class="Operator">(</span><span
class="ID">data</span><span
class="Operator">,</span> <span
class="String">"phone"</span><span
class="Operator">)</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  51
</span></span>
<span class="line"><span
class="LineNumber">  52 </span>
<span class="Comment"># Use
standard button IDs</span></span>
<span class="line"><span
class="LineNumber">  53
</span><span class="Comment"/>
<span class="ID">okay</span>
<span class="Operator">=</span>
<span class="ID">wx</span><span
class="Operator">.</span><span
class="ID">Button</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ID_OK</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  54 </span>
<span class="ID">okay</span><span
class="Operator">.</span><span
class="ID">SetDefault</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  55 </span>
<span class="ID">cancel</span>
<span class="Operator">=</span>
<span class="ID">wx</span><span
class="Operator">.</span><span
class="ID">Button</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ID_CANCEL</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  56
</span></span>
<span class="line"><span
class="LineNumber">  57 </span>
<span class="Comment"># Layout
with sizers</span></span>
<span class="line"><span
class="LineNumber">  58
</span><span class="Comment"/>
<span class="ID">sizer</span>
<span class="Operator">=</span>
<span class="ID">wx</span><span
class="Operator">.</span><span
class="ID">BoxSizer</span><span
class="Operator">(</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">VERTICAL</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  59 </span>
<span class="ID">sizer</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">about</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALL</span><span
class="Operator">,</span> <span
class="Number">5</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  60 </span>
<span class="ID">sizer</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StaticLine</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">|</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALL</span><span
class="Operator">,</span> <span
class="Number">5</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  61
</span></span>
<span class="line"><span
class="LineNumber">  62 </span>
<span class="ID">fgs</span> <span
class="Operator">=</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">FlexGridSizer</span><span
class="Operator">(</span><span
class="Number">3</span><span
class="Operator">,</span> <span
class="Number">2</span><span
class="Operator">,</span> <span
class="Number">5</span><span
class="Operator">,</span> <span
class="Number">5</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  63 </span>
<span class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">name_l</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALIGN_RIGHT</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  64 </span>
<span class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">name_t</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  65 </span>
<span class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">email_l</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALIGN_RIGHT</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  66 </span>
<span class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">email_t</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  67 </span>
<span class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">phone_l</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALIGN_RIGHT</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  68 </span>
<span class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">phone_t</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  69 </span>
<span class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">AddGrowableCol</span><span
class="Operator">(</span><span
class="Number">1</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  70 </span>
<span class="ID">sizer</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">fgs</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">|</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALL</span><span
class="Operator">,</span> <span
class="Number">5</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  71
</span></span>
<span class="line"><span
class="LineNumber">  72 </span>
<span class="ID">btns</span> <span
class="Operator">=</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StdDialogButtonSizer</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  73 </span>
<span class="ID">btns</span><span
class="Operator">.</span><span
class="ID">AddButton</span><span
class="Operator">(</span><span
class="ID">okay</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  74 </span>
<span class="ID">btns</span><span
class="Operator">.</span><span
class="ID">AddButton</span><span
class="Operator">(</span><span
class="ID">cancel</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  75 </span>
<span class="ID">btns</span><span
class="Operator">.</span><span
class="ID">Realize</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  76 </span>
<span class="ID">sizer</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">btns</span><span
class="Operator">,</span> <span
class="Number">0</span><span
class="Operator">,</span> <span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">|</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALL</span><span
class="Operator">,</span> <span
class="Number">5</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  77
</span></span>
<span class="line"><span
class="LineNumber">  78 </span>
<span class="ID">self</span><span
class="Operator">.</span><span
class="ID">SetSizer</span><span
class="Operator">(</span><span
class="ID">sizer</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  79 </span>
<span class="ID">sizer</span><span
class="Operator">.</span><span
class="ID">Fit</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  80
</span></span>
<span class="line"><span
class="LineNumber">  81
</span></span>
<span class="line"><span
class="LineNumber">  82
</span><span class="ID">app</span>
<span class="Operator">=</span>
<span class="ID">wx</span><span
class="Operator">.</span><span
class="ID">PySimpleApp</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  83
</span></span>
<span class="line"><span
class="LineNumber">  84
</span><span
class="ID">data</span> <span
class="Operator">=</span> <span
class="Operator">{</span> <span
class="String">"name"</span> <span
class="Operator">:</span> <span
class="String">"Jordyn
Dunn"</span> <span
class="Operator">}</span></span>
<span class="line"><span
class="LineNumber">  85
</span><span class="ID">dlg</span>
<span class="Operator">=</span>
<span
class="ID">MyDialog</span><span
class="Operator">(</span><span
class="ID">data</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  86
</span><span
class="ID">dlg</span><span
class="Operator">.</span><span
class="ID">ShowModal</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  87
</span><span
class="ID">dlg</span><span
class="Operator">.</span><span
class="ID">Destroy</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  88
</span></span>
<span class="line"><span
class="LineNumber">  89
</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">MessageBox</span><span
class="Operator">(</span><span
class="String">"You entered these
values:\n\n"</span> <span
class="Operator">+</span></span>
<span class="line"><span
class="LineNumber">  90 </span>
<span
class="ID">pprint</span><span
class="Operator">.</span><span
class="ID">pformat</span><span
class="Operator">(</span><span
class="ID">data</span><span
class="Operator">)</span><span
class="Operator">)</span></span>
<span class="line"><span
class="LineNumber">  91
</span></span>
<span class="line"><span
class="LineNumber">  92
</span><span
class="ID">app</span><span
class="Operator">.</span><span
class="ID">MainLoop</span><span
class="Operator">(</span><span
class="Operator">)</span><span
class="Text"/></span>
</pre></div><span id="line-1002"
class="anchor"/><p
class="line862">对话框中验证器的传输数据方法的调用自动发生。要在非对话框窗口中使用验证器来传输数据，必须调用父窗口部件的<tt>TransDataFromWindow()</tt>和<tt>TransferDataToWindow()</tt>方法。如果该窗口设置了<tt>wx.WS_EX_VALIDATE_RECURSIVELY</tt>额外样式，那么在所有的子窗口部件上也将调用该传输函数。
<span id="line-1003"
class="anchor"/><span
id="line-1004"
class="anchor"/><span
id="line-1005"
class="anchor"/><span
id="line-1006"
class="anchor"/><span
id="line-1007"
class="anchor"/></p><p
class="line867">
</p><h3
id="head-7d5f67eb485af9cf8bf1fc6d5965767f0f36bb90">5.2.
如何在数据被键入时验证数据？</h3>
<span id="line-1008"
class="anchor"/><span
id="line-1009"
class="anchor"/><span
id="line-1010" class="anchor"/><p
class="line874">在数据被传给窗口部件之前，你也可使用验证器来在用户输入数据时验证所输入的数据。这是非常有用的，因为它可以防止将得到的坏的数据传入你的应用程序。图9.12显示了一个例子，其中对话框的文本阐明了该思想。
<span id="line-1011"
class="anchor"/><span
id="line-1012"
class="anchor"/><span
id="line-1013"
class="anchor"/></p><p
class="line867"><strong>图9.15</strong>
<span id="line-1014"
class="anchor"/><span
id="line-1015"
class="anchor"/></p><p
class="line867"><img
title="attachment:w9.15.gif"
src="/moin/WxPythonInAction/ChapterNine?action=AttachFile&amp;do=get&amp;target=w9.15.gif"
class="attachment"/> <span
id="line-1016"
class="anchor"/><span
id="line-1017"
class="anchor"/><span
id="line-1018"
class="anchor"/></p><p
class="line874">验证数据的方法的自动化成份少于其它的机制。你必须显式绑定验证器的窗口部件的字符事件给一个函数，如下所示：
<span id="line-1019"
class="anchor"/><span
id="line-1020"
class="anchor"/></p><p
class="line867"><tt>self.Bind(wx.EVT_CHAR</tt>,
<tt>self.OnChar)</tt> <span
id="line-1021"
class="anchor"/><span
id="line-1022"
class="anchor"/></p><p
class="line874">该窗口部件假设事件源属于验证器。例9.15显示了这个绑定。
<span id="line-1023"
class="anchor"/><span
id="line-1024"
class="anchor"/><span
id="line-1025"
class="anchor"/></p><p
class="line867"><strong>例9.15
实时验证</strong> <span
id="line-1026"
class="anchor"/><span
id="line-1027"
class="anchor"/><span
id="line-1028"
class="anchor"/><span
id="line-1029"
class="anchor"/><span
id="line-1030"
class="anchor"/><span
id="line-1031"
class="anchor"/><span
id="line-1032"
class="anchor"/><span
id="line-1033"
class="anchor"/><span
id="line-1034"
class="anchor"/><span
id="line-1035"
class="anchor"/><span
id="line-1036"
class="anchor"/><span
id="line-1037"
class="anchor"/><span
id="line-1038"
class="anchor"/><span
id="line-1039"
class="anchor"/><span
id="line-1040"
class="anchor"/><span
id="line-1041"
class="anchor"/><span
id="line-1042"
class="anchor"/><span
id="line-1043"
class="anchor"/><span
id="line-1044"
class="anchor"/><span
id="line-1045"
class="anchor"/><span
id="line-1046"
class="anchor"/><span
id="line-1047"
class="anchor"/><span
id="line-1048"
class="anchor"/><span
id="line-1049"
class="anchor"/><span
id="line-1050"
class="anchor"/><span
id="line-1051"
class="anchor"/><span
id="line-1052"
class="anchor"/><span
id="line-1053"
class="anchor"/><span
id="line-1054"
class="anchor"/><span
id="line-1055"
class="anchor"/><span
id="line-1056"
class="anchor"/><span
id="line-1057"
class="anchor"/><span
id="line-1058"
class="anchor"/><span
id="line-1059"
class="anchor"/><span
id="line-1060"
class="anchor"/><span
id="line-1061"
class="anchor"/><span
id="line-1062"
class="anchor"/><span
id="line-1063"
class="anchor"/><span
id="line-1064"
class="anchor"/><span
id="line-1065"
class="anchor"/><span
id="line-1066"
class="anchor"/><span
id="line-1067"
class="anchor"/><span
id="line-1068"
class="anchor"/><span
id="line-1069"
class="anchor"/><span
id="line-1070"
class="anchor"/><span
id="line-1071"
class="anchor"/><span
id="line-1072"
class="anchor"/><span
id="line-1073"
class="anchor"/><span
id="line-1074"
class="anchor"/><span
id="line-1075"
class="anchor"/><span
id="line-1076"
class="anchor"/><span
id="line-1077"
class="anchor"/><span
id="line-1078"
class="anchor"/><span
id="line-1079"
class="anchor"/><span
id="line-1080"
class="anchor"/><span
id="line-1081"
class="anchor"/><span
id="line-1082"
class="anchor"/><span
id="line-1083"
class="anchor"/><span
id="line-1084"
class="anchor"/><span
id="line-1085"
class="anchor"/><span
id="line-1086"
class="anchor"/><span
id="line-1087"
class="anchor"/><span
id="line-1088"
class="anchor"/><span
id="line-1089"
class="anchor"/><span
id="line-1090"
class="anchor"/><span
id="line-1091"
class="anchor"/><span
id="line-1092"
class="anchor"/><span
id="line-1093"
class="anchor"/><span
id="line-1094"
class="anchor"/><span
id="line-1095"
class="anchor"/><span
id="line-1096"
class="anchor"/><span
id="line-1097"
class="anchor"/><span
id="line-1098"
class="anchor"/><span
id="line-1099"
class="anchor"/><span
id="line-1100"
class="anchor"/><span
id="line-1101"
class="anchor"/><span
id="line-1102"
class="anchor"/><span
id="line-1103"
class="anchor"/><span
id="line-1104"
class="anchor"/><span
id="line-1105"
class="anchor"/><span
id="line-1106"
class="anchor"/><span
id="line-1107"
class="anchor"/><span
id="line-1108"
class="anchor"/><span
id="line-1109"
class="anchor"/><span
id="line-1110"
class="anchor"/><span
id="line-1111"
class="anchor"/><span
id="line-1112"
class="anchor"/><span
id="line-1113"
class="anchor"/><span
id="line-1114"
class="anchor"/><span
id="line-1115"
class="anchor"/><span
id="line-1116"
class="anchor"/><span
id="line-1117"
class="anchor"/><span
id="line-1118"
class="anchor"/><span
id="line-1119"
class="anchor"/><span
id="line-1120"
class="anchor"/><span
id="line-1121"
class="anchor"/></p><div lang="en"
dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#"
onclick="return
togglenumber(\'CA-7a8af584dd3a707407103a2bd78254043087f5d6_032\',
1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a
class="codenumbers"
onclick="return
togglenumber('CA-7a8af584dd3a707407103a2bd78254043087f5d6_032',
1, 1);"
href="#">切换行号显示</a>
<pre lang="en"
id="CA-7a8af584dd3a707407103a2bd78254043087f5d6_032"
dir="ltr"><span
class="line"><span
class="LineNumber">
1 </span><span
class="ResWord">import</span>
<span
class="ID">wx</span></span>
<span
class="line"><span
class="LineNumber">
2 </span><span
class="ResWord">import</span>
<span
class="ID">string</span></span>
<span
class="line"><span
class="LineNumber">
3 </span></span>
<span
class="line"><span
class="LineNumber">
4 </span><span
class="ID">about_txt</span>
<span
class="Operator">=</span>
<span
class="String">"""\</span></span>
<span
class="line"><span
class="LineNumber">
5 </span><span
class="String">The
validator used in
this example will
validate the input
on the
fly</span></span>
<span
class="line"><span
class="LineNumber">
6 </span><span
class="String">instead
of waiting until
the okay button is
pressed.  The
first
field</span></span>
<span
class="line"><span
class="LineNumber">
7 </span><span
class="String">will
not allow digits
to be typed, the
second will allow
anything</span></span>
<span
class="line"><span
class="LineNumber">
8 </span><span
class="String">and
the third will not
allow alphabetic
characters to be
entered.</span></span>
<span
class="line"><span
class="LineNumber">
9 </span><span
class="String">"""</span></span>
<span
class="line"><span
class="LineNumber">
10 </span></span>
<span
class="line"><span
class="LineNumber">
11 </span></span>
<span
class="line"><span
class="LineNumber">
12 </span><span
class="ResWord">class</span>
<span
class="ID">CharValidator</span><span
class="Operator">(</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">PyValidator</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span
class="line"><span
class="LineNumber">
13 </span>
<span
class="ResWord">def</span>
<span
class="ID">__init__</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span>
<span
class="ID">flag</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span
class="line"><span
class="LineNumber">
14 </span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">PyValidator</span><span
class="Operator">.</span><span
class="ID">__init__</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
15 </span>
<span
class="ID">self</span><span
class="Operator">.</span><span
class="ID">flag</span>
<span
class="Operator">=</span>
<span
class="ID">flag</span></span>
<span
class="line"><span
class="LineNumber">
16 </span>
<span
class="ID">self</span><span
class="Operator">.</span><span
class="ID">Bind</span><span
class="Operator">(</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EVT_CHAR</span><span
class="Operator">,</span>
<span
class="ID">self</span><span
class="Operator">.</span><span
class="ID">OnChar</span><span
class="Operator">)</span><span
class="Comment">#
绑定字符事件</span></span>
<span
class="line"><span
class="LineNumber">
17 </span></span>
<span
class="line"><span
class="LineNumber">
18 </span>
<span
class="ResWord">def</span>
<span
class="ID">Clone</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span
class="line"><span
class="LineNumber">
19 </span>
<span
class="String">"""</span></span>
<span
class="line"><span
class="LineNumber">
20 </span><span
class="String">
Note that every
validator must
implement the
Clone()
method.</span></span>
<span
class="line"><span
class="LineNumber">
21 </span><span
class="String">
"""</span></span>
<span
class="line"><span
class="LineNumber">
22 </span>
<span
class="ResWord">return</span>
<span
class="ID">CharValidator</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">.</span><span
class="ID">flag</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
23 </span></span>
<span
class="line"><span
class="LineNumber">
24 </span>
<span
class="ResWord">def</span>
<span
class="ID">Validate</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span>
<span
class="ID">win</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span
class="line"><span
class="LineNumber">
25 </span>
<span
class="ResWord">return</span>
<span
class="ID">True</span></span>
<span
class="line"><span
class="LineNumber">
26 </span></span>
<span
class="line"><span
class="LineNumber">
27 </span>
<span
class="ResWord">def</span>
<span
class="ID">TransferToWindow</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span
class="line"><span
class="LineNumber">
28 </span>
<span
class="ResWord">return</span>
<span
class="ID">True</span></span>
<span
class="line"><span
class="LineNumber">
29 </span></span>
<span
class="line"><span
class="LineNumber">
30 </span>
<span
class="ResWord">def</span>
<span
class="ID">TransferFromWindow</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span
class="line"><span
class="LineNumber">
31 </span>
<span
class="ResWord">return</span>
<span
class="ID">True</span></span>
<span
class="line"><span
class="LineNumber">
32 </span></span>
<span
class="line"><span
class="LineNumber">
33 </span>
<span
class="ResWord">def</span>
<span
class="ID">OnChar</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span>
<span
class="ID">evt</span><span
class="Operator">)</span><span
class="Operator">:</span><span
class="Comment">#
数据处理</span></span>
<span
class="line"><span
class="LineNumber">
34 </span>
<span
class="ID">key</span>
<span
class="Operator">=</span>
<span
class="ID">chr</span><span
class="Operator">(</span><span
class="ID">evt</span><span
class="Operator">.</span><span
class="ID">GetKeyCode</span><span
class="Operator">(</span><span
class="Operator">)</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
35 </span>
<span
class="ResWord">if</span>
<span
class="ID">self</span><span
class="Operator">.</span><span
class="ID">flag</span>
<span
class="Operator">==</span>
<span
class="String">"no-alpha"</span>
<span
class="ResWord">and</span>
<span
class="ID">key</span>
<span
class="ResWord">in</span>
<span
class="ID">string</span><span
class="Operator">.</span><span
class="ID">letters</span><span
class="Operator">:</span></span>
<span
class="line"><span
class="LineNumber">
36 </span>
<span
class="ResWord">return</span></span>
<span
class="line"><span
class="LineNumber">
37 </span>
<span
class="ResWord">if</span>
<span
class="ID">self</span><span
class="Operator">.</span><span
class="ID">flag</span>
<span
class="Operator">==</span>
<span
class="String">"no-digit"</span>
<span
class="ResWord">and</span>
<span
class="ID">key</span>
<span
class="ResWord">in</span>
<span
class="ID">string</span><span
class="Operator">.</span><span
class="ID">digits</span><span
class="Operator">:</span></span>
<span
class="line"><span
class="LineNumber">
38 </span>
<span
class="ResWord">return</span></span>
<span
class="line"><span
class="LineNumber">
39 </span>
<span
class="ID">evt</span><span
class="Operator">.</span><span
class="ID">Skip</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
40 </span></span>
<span
class="line"><span
class="LineNumber">
41 </span></span>
<span
class="line"><span
class="LineNumber">
42 </span><span
class="ResWord">class</span>
<span
class="ID">MyDialog</span><span
class="Operator">(</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">Dialog</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span
class="line"><span
class="LineNumber">
43 </span>
<span
class="ResWord">def</span>
<span
class="ID">__init__</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span><span
class="Operator">:</span></span>
<span
class="line"><span
class="LineNumber">
44 </span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">Dialog</span><span
class="Operator">.</span><span
class="ID">__init__</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span>
<span
class="ID">None</span><span
class="Operator">,</span>
<span
class="Operator">-</span><span
class="Number">1</span><span
class="Operator">,</span>
<span
class="String">"Validators:
behavior
modification"</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
45 </span></span>
<span
class="line"><span
class="LineNumber">
46 </span>
<span
class="Comment">#
Create the text
controls</span></span>
<span
class="line"><span
class="LineNumber">
47 </span><span
class="Comment"/>
<span
class="ID">about</span>
<span
class="Operator">=</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StaticText</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span>
<span
class="Operator">-</span><span
class="Number">1</span><span
class="Operator">,</span>
<span
class="ID">about_txt</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
48 </span>
<span
class="ID">name_l</span>
<span
class="Operator">=</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StaticText</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span>
<span
class="Operator">-</span><span
class="Number">1</span><span
class="Operator">,</span>
<span
class="String">"Name:"</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
49 </span>
<span
class="ID">email_l</span>
<span
class="Operator">=</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StaticText</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span>
<span
class="Operator">-</span><span
class="Number">1</span><span
class="Operator">,</span>
<span
class="String">"Email:"</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
50 </span>
<span
class="ID">phone_l</span>
<span
class="Operator">=</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StaticText</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span>
<span
class="Operator">-</span><span
class="Number">1</span><span
class="Operator">,</span>
<span
class="String">"Phone:"</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
51 </span></span>
<span
class="line"><span
class="LineNumber">
52 </span>
<span
class="Comment">#
绑定验证器</span></span>
<span
class="line"><span
class="LineNumber">
53 </span><span
class="Comment"/>
<span
class="ID">name_t</span>
<span
class="Operator">=</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">TextCtrl</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span>
<span
class="ID">validator</span><span
class="Operator">=</span><span
class="ID">CharValidator</span><span
class="Operator">(</span><span
class="String">"no-digit"</span><span
class="Operator">)</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
54 </span>
<span
class="ID">email_t</span>
<span
class="Operator">=</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">TextCtrl</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span>
<span
class="ID">validator</span><span
class="Operator">=</span><span
class="ID">CharValidator</span><span
class="Operator">(</span><span
class="String">"any"</span><span
class="Operator">)</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
55 </span>
<span
class="ID">phone_t</span>
<span
class="Operator">=</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">TextCtrl</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span>
<span
class="ID">validator</span><span
class="Operator">=</span><span
class="ID">CharValidator</span><span
class="Operator">(</span><span
class="String">"no-alpha"</span><span
class="Operator">)</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
56 </span></span>
<span
class="line"><span
class="LineNumber">
57 </span>
<span
class="Comment">#
Use standard
button
IDs</span></span>
<span
class="line"><span
class="LineNumber">
58 </span><span
class="Comment"/>
<span
class="ID">okay</span>
<span
class="Operator">=</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">Button</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ID_OK</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
59 </span>
<span
class="ID">okay</span><span
class="Operator">.</span><span
class="ID">SetDefault</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
60 </span>
<span
class="ID">cancel</span>
<span
class="Operator">=</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">Button</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">,</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ID_CANCEL</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
61 </span></span>
<span
class="line"><span
class="LineNumber">
62 </span>
<span
class="Comment">#
Layout with
sizers</span></span>
<span
class="line"><span
class="LineNumber">
63 </span><span
class="Comment"/>
<span
class="ID">sizer</span>
<span
class="Operator">=</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">BoxSizer</span><span
class="Operator">(</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">VERTICAL</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
64 </span>
<span
class="ID">sizer</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">about</span><span
class="Operator">,</span>
<span
class="Number">0</span><span
class="Operator">,</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALL</span><span
class="Operator">,</span>
<span
class="Number">5</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
65 </span>
<span
class="ID">sizer</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StaticLine</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span><span
class="Operator">,</span>
<span
class="Number">0</span><span
class="Operator">,</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">|</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALL</span><span
class="Operator">,</span>
<span
class="Number">5</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
66 </span></span>
<span
class="line"><span
class="LineNumber">
67 </span>
<span
class="ID">fgs</span>
<span
class="Operator">=</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">FlexGridSizer</span><span
class="Operator">(</span><span
class="Number">3</span><span
class="Operator">,</span>
<span
class="Number">2</span><span
class="Operator">,</span>
<span
class="Number">5</span><span
class="Operator">,</span>
<span
class="Number">5</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
68 </span>
<span
class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">name_l</span><span
class="Operator">,</span>
<span
class="Number">0</span><span
class="Operator">,</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALIGN_RIGHT</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
69 </span>
<span
class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">name_t</span><span
class="Operator">,</span>
<span
class="Number">0</span><span
class="Operator">,</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
70 </span>
<span
class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">email_l</span><span
class="Operator">,</span>
<span
class="Number">0</span><span
class="Operator">,</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALIGN_RIGHT</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
71 </span>
<span
class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">email_t</span><span
class="Operator">,</span>
<span
class="Number">0</span><span
class="Operator">,</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
72 </span>
<span
class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">phone_l</span><span
class="Operator">,</span>
<span
class="Number">0</span><span
class="Operator">,</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALIGN_RIGHT</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
73 </span>
<span
class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">phone_t</span><span
class="Operator">,</span>
<span
class="Number">0</span><span
class="Operator">,</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
74 </span>
<span
class="ID">fgs</span><span
class="Operator">.</span><span
class="ID">AddGrowableCol</span><span
class="Operator">(</span><span
class="Number">1</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
75 </span>
<span
class="ID">sizer</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">fgs</span><span
class="Operator">,</span>
<span
class="Number">0</span><span
class="Operator">,</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">|</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALL</span><span
class="Operator">,</span>
<span
class="Number">5</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
76 </span></span>
<span
class="line"><span
class="LineNumber">
77 </span>
<span
class="ID">btns</span>
<span
class="Operator">=</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">StdDialogButtonSizer</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
78 </span>
<span
class="ID">btns</span><span
class="Operator">.</span><span
class="ID">AddButton</span><span
class="Operator">(</span><span
class="ID">okay</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
79 </span>
<span
class="ID">btns</span><span
class="Operator">.</span><span
class="ID">AddButton</span><span
class="Operator">(</span><span
class="ID">cancel</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
80 </span>
<span
class="ID">btns</span><span
class="Operator">.</span><span
class="ID">Realize</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
81 </span>
<span
class="ID">sizer</span><span
class="Operator">.</span><span
class="ID">Add</span><span
class="Operator">(</span><span
class="ID">btns</span><span
class="Operator">,</span>
<span
class="Number">0</span><span
class="Operator">,</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">EXPAND</span><span
class="Operator">|</span><span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">ALL</span><span
class="Operator">,</span>
<span
class="Number">5</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
82 </span></span>
<span
class="line"><span
class="LineNumber">
83 </span>
<span
class="ID">self</span><span
class="Operator">.</span><span
class="ID">SetSizer</span><span
class="Operator">(</span><span
class="ID">sizer</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
84 </span>
<span
class="ID">sizer</span><span
class="Operator">.</span><span
class="ID">Fit</span><span
class="Operator">(</span><span
class="ID">self</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
85 </span></span>
<span
class="line"><span
class="LineNumber">
86 </span></span>
<span
class="line"><span
class="LineNumber">
87 </span><span
class="ID">app</span>
<span
class="Operator">=</span>
<span
class="ID">wx</span><span
class="Operator">.</span><span
class="ID">PySimpleApp</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
88 </span></span>
<span
class="line"><span
class="LineNumber">
89 </span><span
class="ID">dlg</span>
<span
class="Operator">=</span>
<span
class="ID">MyDialog</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
90 </span><span
class="ID">dlg</span><span
class="Operator">.</span><span
class="ID">ShowModal</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
91 </span><span
class="ID">dlg</span><span
class="Operator">.</span><span
class="ID">Destroy</span><span
class="Operator">(</span><span
class="Operator">)</span></span>
<span
class="line"><span
class="LineNumber">
92 </span></span>
<span
class="line"><span
class="LineNumber">
93 </span><span
class="ID">app</span><span
class="Operator">.</span><span
class="ID">MainLoop</span><span
class="Operator">(</span><span
class="Operator">)</span><span
class="Text"/></span>
</pre></div><span
id="line-1122"
class="anchor"/><p
class="line862">由于<tt>OnChar()</tt>方法是在一个验证器中，所以它在窗口部件响应字符事件之间被调用。该方法让你可以通过使用<tt>Skip()</tt>来将事件传送给窗口部件。你必须调用<tt>Skip()</tt>，否则验证器将妨碍正常的事件处理。验证器执行一个测试来查看用于该控件的字符是否有效。如果该字符无效，那么<tt>Skip()</tt>不被调用，并且事件处理停止。如果有必须的话，除了<tt>wx.EVT_CHAR</tt>之外的其它事件也可以被绑定，并在窗口部件响应之前验证器处理那些事件。
<span
id="line-1123"
class="anchor"/><span
id="line-1124"
class="anchor"/></p><p
class="line862">对于处理你<tt>wxPython</tt>应用程序中的数据，验证器是一个强大且灵活的机制。适当地使用它们，可以让你的应用程序的开发和维护更加的顺畅。
<span
id="line-1125"
class="anchor"/><span
id="line-1126"
class="anchor"/><span
id="line-1127"
class="anchor"/></p><p
class="line867">
</p><h2
id="head-d729c362c9abd817c46dbd41c3339b1423e90c98">6.
本章小结</h2>
<span
id="line-1128"
class="anchor"/><span
id="line-1129"
class="anchor"/><span
id="line-1130"
class="anchor"/><p
class="line862">1、对话框被用于在有一套特殊的信息需要被获取的情况下，处理与用户的交互，这种交互通常很快被完成。在<tt>wxPython</tt>中，你可以使用通用的<tt>wx.Dialog</tt>类来创建你自己的对话框，或者你也可以使用预定义的对话框。大多数情况下，通常被使用的对话框都有相应的便利函数，使得这种对话框的使用更容易。
<span
id="line-1131"
class="anchor"/><span
id="line-1132"
class="anchor"/></p><p
class="line862">2、对话框可以显示为模式对话框，这意味在对话框可见时，该应用程序中的用户所有的其它输入将被阻塞。模式对话框通过使用<tt>ShowModal()</tt>方法来被调用，它的返回值依据用户所按的按钮而定（<tt>OK</tt>或<tt>Cancel</tt>）。关闭模式对话框并不会销毁它，该对话框的实例可以被再用。
<span
id="line-1133"
class="anchor"/><span
id="line-1134"
class="anchor"/></p><p
class="line862">3、在<tt>wxPython</tt>中有三个通用的简单对话框。<tt>wx.MessageDialog</tt>显示一个消息对话框。<tt>wx.TextEntryDialog</tt>使用户能够键入文本，<tt>wx.SingleChoiceDialog</tt>给用户一个基于列表项的选择。
<span
id="line-1135"
class="anchor"/><span
id="line-1136"
class="anchor"/></p><p
class="line862">4、当正在执行一个长时间的后台的任务时，你可以使用<tt>wx.ProgressDialog</tt>来给用户显示进度信息。用户可以通过<tt>wx.FileDialog</tt>使用标准文件对话框来选择一个文件。可以使用<tt>wx.DirDialog</tt>来创建一个标准目录树，它使得用户可以选择一个目录。
<span
id="line-1137"
class="anchor"/><span
id="line-1138"
class="anchor"/></p><p
class="line862">5、你可以使用<tt>wx.FontDialog</tt>和<tt>wx.ColorDialog</tt>来访问标准的字体选择器和颜色选择器。在这两种情况中，对话框的行为和用户的响应是由一个单独的数据类来控制的。
<span
id="line-1139"
class="anchor"/><span
id="line-1140"
class="anchor"/></p><p
class="line862">6、要浏览缩略图，可以使用<tt>wxPython</tt>特定的类<tt>wx.lib.imagebrowser.ImageDialog</tt>。这个类使用户能够通过文件系统并选择一个图像。
<span
id="line-1141"
class="anchor"/><span
id="line-1142"
class="anchor"/></p><p
class="line862">7、你可以通过使用<tt>wx.wizard.Wizard</tt>创建一个向导来将一组相关的对话框表单链接起来。对话框表单是<tt>wx.wizard.WizardSimplePage</tt>或<tt>wx.wizard.WizardPage</tt>的实例。两者的区别是，<tt>wx.wizard.WizardSimplePage</tt>的页到页的路线需要在向导被显示之前就安排好，而<tt>wx.wizard.WizardPage</tt>使你能够在运行时管理页到页的路线的逻辑。
<span
id="line-1143"
class="anchor"/><span
id="line-1144"
class="anchor"/></p><p
class="line862">8、使用<tt>wx.CreateFileTipProvider</tt>和<tt>wx.ShowTip</tt>函数可以很容易地显示启动提示。
<span
id="line-1145"
class="anchor"/><span
id="line-1146"
class="anchor"/></p><p
class="line874">9、验证器是很有用的对象，如果输入的数据不正确的话，它可以自动阻止对话框的关闭。他们也可以在一个显示的对话框和一个外部的对象之间传输数据，并且能够实时地验证数据的输入。
<span
id="line-1147"
class="anchor"/><span
id="line-1148"
class="anchor"/><span
id="line-1149"
class="anchor"/><span
id="line-1150"
class="anchor"/><span
id="line-1151"
class="anchor"/><span
id="bottom"
class="anchor"/></p></div>
