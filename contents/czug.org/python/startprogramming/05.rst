<div lang="en" id="content" dir="ltr"><span id="top" class="anchor"/>
<span id="line-3" class="anchor"/><p class="line867"><strong> <span id="line-4" class="anchor"/><a href="/moin/StartProgramming"> （首页）开始编程之旅</a> <span id="line-5" class="anchor"/>翻译自Lee Harr的<a href="http://staff.easthighschool.net/lee/computers/book/Start_Programming.html" class="http">Start Programming</a> <span id="line-6" class="anchor"/><span id="line-7" class="anchor"/></strong></p><p class="line862"><strong>本文是使用<a href="http://www.nongnu.org/pygsear/" class="http">pygsear</a>+<a href="http://pygame.org" class="http">pygame</a>作为开发环境，以初级用户角度来分步分阶段学习<a href="http://www.python.org"
class="http">PYTHON</a>基本概念，并以小游戏开发项目为具体案例，介绍的十分详细。编写风格清新朴实，没有象一般教科书那样枯燥，极其适合初级用户来激发兴趣时使用。 <span id="line-8" class="anchor"/></strong> <span id="line-9" class="anchor"/></p>

<div class="table-of-contents"><p class="table-of-contents-heading">目录</p><ol><li><a href="#head-f197469d921d3f7dff527a9052e102e75af58de1">StartProgramming-4-1 Paddle</a></li>
<li><a href="#head-4d28d9fb5aab69dd1fbd17a083386de9137cb693">StartProgramming-4-2 Ball</a></li>
<li><a href="#head-c33985586d4ea6239637b278f6ae6ef815b50dfe">StartProgramming-4-3 Game</a></li>
<li><a href="#head-fe51c86f5cbae360f263eab0a63522e27fe3be43">StartProgramming-4-4 Tweak</a></li></ol></div>

<span id="line-10" class="anchor"/>
<h2 id="head-f197469d921d3f7dff527a9052e102e75af58de1">1. StartProgramming-4-1 Paddle</h2>
<span id="line-11" class="anchor"/><span id="line-12" class="anchor"/><p class="line862">We got a nice demo from <tt class="backtick">WhoaBall</tt> and <tt class="backtick">BallGame</tt>, but that is not really a game. Let's keep going and see if we can make this in to a real game. <span id="line-13" class="anchor"/><span id="line-14" class="anchor"/></p><p class="line867"><strong>我们从<tt class="backtick">WhoaBall</tt>和<tt class="backtick">BallGame</tt>获得了一个很好的演示，但是那并不是一个真正的游戏。让我们继续下去并且看看我们能否把这些变成一个真正的游戏。</strong> <span id="line-15" class="anchor"/><span id="line-16" class="anchor"/></p><p class="line874">Pong was the first real video game. Let's do that. <span id="line-17" class="anchor"/><span id="line-18"
class="anchor"/></p><p class="line867"><strong>Pong 是第一个真正的视频游戏。让我们开始做吧。</strong> <span id="line-19" class="anchor"/><span id="line-20" class="anchor"/></p><p class="line874">First, a paddle. <span id="line-21" class="anchor"/><span id="line-22" class="anchor"/></p><p class="line867"><strong>首先，一个paddle</strong> <span id="line-23" class="anchor"/><span id="line-24" class="anchor"/></p><p class="line867"><span id="line-25" class="anchor"/><span id="line-26" class="anchor"/><span id="line-27" class="anchor"/><span id="line-28" class="anchor"/><span id="line-29" class="anchor"/><span id="line-30" class="anchor"/><span id="line-31" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
function isnumbered(obj) {
return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
var nlen = Math.max(0,chrs-(''+num).length), res = '';
while (nlen>0) { res += ' '; nlen-- }
return res+num+add;
}
function addnumber(did, nstart, nstep) {
var c = document.getElementById(did), l = c.firstChild, n = 1;
if (!isnumbered(c))
if (typeof nstart == 'undefined') nstart = 1;
if (typeof nstep  == 'undefined') nstep = 1;
n = nstart;
while (l != null) {
if (l.tagName == 'SPAN') {
var s = document.createElement('SPAN');
s.className = 'LineNumber'
s.appendChild(document.createTextNode(nformat(n,4,' ')));
n += nstep;
if (l.childNodes.length)
l.insertBefore(s, l.firstChild)
else
l.appendChild(s)
}
l = l.nextSibling;
}
return false;
}
function remnumber(did) {
var c = document.getElementById(did), l = c.firstChild;
if (isnumbered(c))
while (l != null) {
if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
l = l.nextSibling;
}
return false;
}
function togglenumber(did, nstart, nstep) {
var c = document.getElementById(did);
if (isnumbered(c)) {
remnumber(did);
} else {
addnumber(did,nstart,nstep);
}
return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-92440df9d69120eab8945c44ac657bb7763271dc_000\', 1, 1);" \
class="codenumbers">Toggle line numbers<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-92440df9d69120eab8945c44ac657bb7763271dc_000', 1, 1);" href="#">Toggle line numbers</a>
<pre lang="en" id="CA-92440df9d69120eab8945c44ac657bb7763271dc_000" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Drawable</span> <span class="ResWord">import</span> <span class="ID">Rectangle</span></span>
<span class="line"><span class="LineNumber">   2 </span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">class</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="ID">Rectangle</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   4 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   5 </span>        <span class="ID">Rectangle</span><span class="Operator">.</span><span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">width</span><span class="Operator">=</span><span class="Number">15</span><span class="Operator">,</span> <span class="ID">height</span><span class="Operator">=</span><span class="Number">50</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   6 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">center</span><span class="Operator">(</span><span class="ID">x</span><span class="Operator">=</span><span class="Number">10</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-32" class="anchor"/><span id="line-33" class="anchor"/><p class="line874">You can put this and all of the pong code in to one file Pong.py <span id="line-34" class="anchor"/><span id="line-35" class="anchor"/></p><p class="line867"><strong>你可以把这些代码和所有pong的代码写入一个文件Pong.py中</strong> <span id="line-36" class="anchor"/><span id="line-37" class="anchor"/></p><p class="line874">Your Paddle will need some control from the player. <span id="line-38" class="anchor"/><span id="line-39" class="anchor"/></p><p
class="line867"><strong>你的Paddle将需要一些控制提供给玩家。</strong> <span id="line-40" class="anchor"/><span id="line-41" class="anchor"/></p><p class="line874">To convert input from the keyboard in to motion of the paddle, we will use events. Events let you create functions which will be called whenever something external happens. We will use the up and down arrow keys to control to movement of the paddle. <span id="line-42" class="anchor"/><span id="line-43" class="anchor"/></p><p
class="line867"><strong>要转换输入从键盘到paddle的动作，我们将用事件。事件使你能在当外部活动发生时创建函数。我们将使用向上键和向下键来控制paddle的行动。</strong> <span id="line-44" class="anchor"/><span id="line-45" class="anchor"/></p><p class="line874">In the Paddle we will set up the functions that need to be called, and a couple of flags which will remember the state of the controls. <span id="line-46" class="anchor"/><span id="line-47" class="anchor"/></p><p class="line867"><strong>在Paddle中我们将设置需要调用的函数，和一对能够记住控制状态的标志。</strong> <span id="line-48" class="anchor"/><span
id="line-49" class="anchor"/></p><p class="line867"><span id="line-50" class="anchor"/><span id="line-51" class="anchor"/><span id="line-52" class="anchor"/><span id="line-53" class="anchor"/><span id="line-54" class="anchor"/><span id="line-55" class="anchor"/><span id="line-56" class="anchor"/><span id="line-57" class="anchor"/><span id="line-58" class="anchor"/><span id="line-59" class="anchor"/><span id="line-60" class="anchor"/><span id="line-61" class="anchor"/><span id="line-62" class="anchor"/><span id="line-63" class="anchor"/><span id="line-64" class="anchor"/><span id="line-65"
class="anchor"/><span id="line-66" class="anchor"/><span id="line-67" class="anchor"/><span id="line-68" class="anchor"/><span id="line-69" class="anchor"/><span id="line-70" class="anchor"/><span id="line-71" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-489ef1e87a619e72d734b4723409ead034cdedbc_001\', 1, 1);" \
class="codenumbers">Toggle line numbers<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-489ef1e87a619e72d734b4723409ead034cdedbc_001', 1, 1);" href="#">Toggle line numbers</a>
<pre lang="en" id="CA-489ef1e87a619e72d734b4723409ead034cdedbc_001" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Drawable</span> <span class="ResWord">import</span> <span class="ID">Rectangle</span></span>
<span class="line"><span class="LineNumber">   2 </span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">class</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="ID">Rectangle</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   4 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   5 </span>        <span class="ID">Rectangle</span><span class="Operator">.</span><span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">width</span><span class="Operator">=</span><span class="Number">15</span><span class="Operator">,</span> <span class="ID">height</span><span class="Operator">=</span><span class="Number">50</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   6 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">center</span><span class="Operator">(</span><span class="ID">x</span><span class="Operator">=</span><span class="Number">10</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   7 </span></span>
<span class="line"><span class="LineNumber">   8 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">   9 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  10 </span></span>
<span class="line"><span class="LineNumber">  11 </span>    <span class="ResWord">def</span> <span class="ID">up</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  12 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="Operator">=</span> <span class="Number">1</span></span>
<span class="line"><span class="LineNumber">  13 </span></span>
<span class="line"><span class="LineNumber">  14 </span>    <span class="ResWord">def</span> <span class="ID">noup</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  15 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  16 </span></span>
<span class="line"><span class="LineNumber">  17 </span>    <span class="ResWord">def</span> <span class="ID">down</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  18 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="Operator">=</span> <span class="Number">1</span></span>
<span class="line"><span class="LineNumber">  19 </span></span>
<span class="line"><span class="LineNumber">  20 </span>    <span class="ResWord">def</span> <span class="ID">nodown</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  21 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="Operator">=</span> <span class="Number">0</span><span class="Text"/></span>
</pre></div><span id="line-72" class="anchor"/><span id="line-73" class="anchor"/><p class="line874">We are going through a bit of a roundabout here because we want to do the right thing when the player pushes or holds down both the up and down controls at the same time. Instead of actually setting the velocity of the paddle each time a control is pressed, we change the state of a flag which tells which controls are being pressed. <span id="line-74" class="anchor"/><span id="line-75" class="anchor"/></p><p
class="line867"><strong>我们现在做的有些绕弯，因为我们希望当玩家推或者同时压住向上和向下的控制键时做正确的事情。每次控制键按下代替实际设置paddle速度的，当控制键按下时我们改变标志的状态。</strong> <span id="line-76" class="anchor"/><span id="line-77" class="anchor"/></p><p class="line874">We will change the velocity in the move() method. <span id="line-78" class="anchor"/><span id="line-79" class="anchor"/></p><p class="line867"><strong>我们将会在方法move()中改变速度。</strong> <span id="line-80" class="anchor"/><span id="line-81" class="anchor"/></p><p class="line867"><span
id="line-82" class="anchor"/><span id="line-83" class="anchor"/><span id="line-84" class="anchor"/><span id="line-85" class="anchor"/><span id="line-86" class="anchor"/><span id="line-87" class="anchor"/><span id="line-88" class="anchor"/><span id="line-89" class="anchor"/><span id="line-90" class="anchor"/><span id="line-91" class="anchor"/><span id="line-92" class="anchor"/><span id="line-93" class="anchor"/><span id="line-94" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-690156e00123b49e51b9fa23883f78fafc2a7b1b_002\', 1, 1);" \
class="codenumbers">Toggle line numbers<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-690156e00123b49e51b9fa23883f78fafc2a7b1b_002', 1, 1);" href="#">Toggle line numbers</a>
<pre lang="en" id="CA-690156e00123b49e51b9fa23883f78fafc2a7b1b_002" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">class</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="ID">Rectangle</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   2 </span>    <span class="ResWord">def</span> <span class="ID">set_vel</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   3 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="ResWord">and</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   4 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   5 </span>        <span class="ResWord">elif</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="ResWord">and</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   6 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   7 </span>        <span class="ResWord">else</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   8 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Number">0</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   9 </span></span>
<span class="line"><span class="LineNumber">  10 </span>    <span class="ResWord">def</span> <span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  11 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">set_vel</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  12 </span>        <span class="ID">Rectangle</span><span class="Operator">.</span><span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-95" class="anchor"/><span id="line-96" class="anchor"/><p class="line874">Also, we want the Paddle to be always onscreen: <span id="line-97" class="anchor"/><span id="line-98" class="anchor"/></p><p class="line867"><strong>同样的，我们希望Paddle总是在屏幕上：</strong> <span id="line-99" class="anchor"/><span id="line-100" class="anchor"/></p><p class="line867"><span id="line-101" class="anchor"/><span id="line-102" class="anchor"/><span id="line-103" class="anchor"/><span id="line-104" class="anchor"/><span id="line-105" class="anchor"/><span
id="line-106" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-ac407bdf6ce1125a149502e9691a5a9f4a69b3ad_003\', 1, 1);" \
class="codenumbers">Toggle line numbers<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-ac407bdf6ce1125a149502e9691a5a9f4a69b3ad_003', 1, 1);" href="#">Toggle line numbers</a>
<pre lang="en" id="CA-ac407bdf6ce1125a149502e9691a5a9f4a69b3ad_003" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">class</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="ID">Rectangle</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   2 </span>    <span class="ResWord">def</span> <span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   3 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">set_vel</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   4 </span>        <span class="ID">Rectangle</span><span class="Operator">.</span><span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   5 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">top</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">bottom</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">jail</span><span class="Operator">=</span><span
class="Number">1</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-107" class="anchor"/><span id="line-108" class="anchor"/><p class="line874">This change restricts the motion of the paddle between 5 pixels from the top edge of the screen and 5 pixels from the bottom edge of the screen. <span id="line-109" class="anchor"/><span id="line-110" class="anchor"/></p><p class="line867"><strong>这次改变限制paddle的行动在距离5像素的上边缘和距离5像素的下边缘的屏幕中。</strong> <span id="line-111" class="anchor"/><span id="line-112" class="anchor"/></p><p class="line874">Now let's put the Paddle in to
a Game and see what happens. Put this right in the same file: <span id="line-113" class="anchor"/><span id="line-114" class="anchor"/></p><p class="line867"><strong>现在让我们把Paddle做成一个游戏并且看看会发生什么。把这些同样放入同一个文件中：</strong> <span id="line-115" class="anchor"/><span id="line-116" class="anchor"/></p><p class="line867"><span id="line-117" class="anchor"/><span id="line-118" class="anchor"/><span id="line-119" class="anchor"/><span id="line-120" class="anchor"/><span id="line-121" class="anchor"/><span id="line-122"
class="anchor"/><span id="line-123" class="anchor"/><span id="line-124" class="anchor"/><span id="line-125" class="anchor"/><span id="line-126" class="anchor"/><span id="line-127" class="anchor"/><span id="line-128" class="anchor"/><span id="line-129" class="anchor"/><span id="line-130" class="anchor"/><span id="line-131" class="anchor"/><span id="line-132" class="anchor"/><span id="line-133" class="anchor"/><span id="line-134" class="anchor"/><span id="line-135" class="anchor"/><span id="line-136" class="anchor"/></p><div lang="en" dir="ltr"
class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-ff0abdeb954c8125b1f345fd1488c692f89fd10d_004\', 1, 1);" \
class="codenumbers">Toggle line numbers<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-ff0abdeb954c8125b1f345fd1488c692f89fd10d_004', 1, 1);" href="#">Toggle line numbers</a>
<pre lang="en" id="CA-ff0abdeb954c8125b1f345fd1488c692f89fd10d_004" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">from</span> <span class="ID">pygame</span><span class="Operator">.</span><span class="ID">locals</span> <span class="ResWord">import</span> <span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">K_DOWN</span></span>
<span class="line"><span class="LineNumber">   2 </span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Game</span> <span class="ResWord">import</span> <span class="ID">Game</span></span>
<span class="line"><span class="LineNumber">   4 </span><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Event</span> <span class="ResWord">import</span> <span class="ID">KEYDOWN_Event</span><span class="Operator">,</span> <span class="ID">KEYUP_Event</span></span>
<span class="line"><span class="LineNumber">   5 </span></span>
<span class="line"><span class="LineNumber">   6 </span><span class="ResWord">class</span> <span class="ID">Pong</span><span class="Operator">(</span><span class="ID">Game</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   7 </span>    <span class="ResWord">def</span> <span class="ID">initialize</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   8 </span>        <span class="ID">paddle</span> <span class="Operator">=</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   9 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">paddle</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  10 </span></span>
<span class="line"><span class="LineNumber">  11 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYDOWN_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span
class="Operator">.</span><span class="ID">up</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  12 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYUP_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span
class="Operator">.</span><span class="ID">noup</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  13 </span></span>
<span class="line"><span class="LineNumber">  14 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYDOWN_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_DOWN</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span
class="Operator">.</span><span class="ID">down</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  15 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYUP_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_DOWN</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span
class="Operator">.</span><span class="ID">nodown</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  16 </span></span>
<span class="line"><span class="LineNumber">  17 </span><span class="ResWord">if</span> <span class="ID">__name__</span> <span class="Operator">==</span> <span class="String">'__main__'</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  18 </span>    <span class="ID">game</span> <span class="Operator">=</span> <span class="ID">Pong</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  19 </span>    <span class="ID">game</span><span class="Operator">.</span><span class="ID">mainloop</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-137" class="anchor"/><span id="line-138" class="anchor"/><p class="line874">So, here is what we have so far. You can download the code by clicking on the link, and run it with python Pong-0.1.py <span id="line-139" class="anchor"/><span id="line-140" class="anchor"/></p><p class="line867"><strong>这样，这些是我们目前所有的。你可以点击链接下载这些代码，并且用python Pong-0.1.py运行它。</strong> <span id="line-141" class="anchor"/><span id="line-142" class="anchor"/></p><p class="line867"><span id="line-143"
class="anchor"/><span id="line-144" class="anchor"/><span id="line-145" class="anchor"/><span id="line-146" class="anchor"/><span id="line-147" class="anchor"/><span id="line-148" class="anchor"/><span id="line-149" class="anchor"/><span id="line-150" class="anchor"/><span id="line-151" class="anchor"/><span id="line-152" class="anchor"/><span id="line-153" class="anchor"/><span id="line-154" class="anchor"/><span id="line-155" class="anchor"/><span id="line-156" class="anchor"/><span id="line-157" class="anchor"/><span id="line-158"
class="anchor"/><span id="line-159" class="anchor"/><span id="line-160" class="anchor"/><span id="line-161" class="anchor"/><span id="line-162" class="anchor"/><span id="line-163" class="anchor"/><span id="line-164" class="anchor"/><span id="line-165" class="anchor"/><span id="line-166" class="anchor"/><span id="line-167" class="anchor"/><span id="line-168" class="anchor"/><span id="line-169" class="anchor"/><span id="line-170" class="anchor"/><span id="line-171" class="anchor"/><span id="line-172" class="anchor"/><span id="line-173"
class="anchor"/><span id="line-174" class="anchor"/><span id="line-175" class="anchor"/><span id="line-176" class="anchor"/><span id="line-177" class="anchor"/><span id="line-178" class="anchor"/><span id="line-179" class="anchor"/><span id="line-180" class="anchor"/><span id="line-181" class="anchor"/><span id="line-182" class="anchor"/><span id="line-183" class="anchor"/><span id="line-184" class="anchor"/><span id="line-185" class="anchor"/><span id="line-186" class="anchor"/><span id="line-187" class="anchor"/><span id="line-188"
class="anchor"/><span id="line-189" class="anchor"/><span id="line-190" class="anchor"/><span id="line-191" class="anchor"/><span id="line-192" class="anchor"/><span id="line-193" class="anchor"/><span id="line-194" class="anchor"/><span id="line-195" class="anchor"/><span id="line-196" class="anchor"/><span id="line-197" class="anchor"/><span id="line-198" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-a8d9ecf80eb25d26e3abf29160d9c7374a0bc554_005\', 1, 1);" \
class="codenumbers">Toggle line numbers<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-a8d9ecf80eb25d26e3abf29160d9c7374a0bc554_005', 1, 1);" href="#">Toggle line numbers</a>
<pre lang="en" id="CA-a8d9ecf80eb25d26e3abf29160d9c7374a0bc554_005" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="Comment"># Pong-0.1.py</span></span>
<span class="line"><span class="LineNumber">   2 </span><span class="Comment"/><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Drawable</span> <span class="ResWord">import</span> <span class="ID">Rectangle</span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Game</span> <span class="ResWord">import</span> <span class="ID">Game</span></span>
<span class="line"><span class="LineNumber">   4 </span><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Event</span> <span class="ResWord">import</span> <span class="ID">KEYDOWN_Event</span><span class="Operator">,</span> <span class="ID">KEYUP_Event</span></span>
<span class="line"><span class="LineNumber">   5 </span></span>
<span class="line"><span class="LineNumber">   6 </span><span class="ResWord">from</span> <span class="ID">pygame</span><span class="Operator">.</span><span class="ID">locals</span> <span class="ResWord">import</span> <span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">K_q</span><span class="Operator">,</span> <span class="ID">K_DOWN</span><span class="Operator">,</span> <span class="ID">K_a</span></span>
<span class="line"><span class="LineNumber">   7 </span></span>
<span class="line"><span class="LineNumber">   8 </span><span class="ResWord">class</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="ID">Rectangle</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   9 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  10 </span>        <span class="ID">Rectangle</span><span class="Operator">.</span><span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">width</span><span class="Operator">=</span><span class="Number">15</span><span class="Operator">,</span> <span class="ID">height</span><span class="Operator">=</span><span class="Number">50</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  11 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">center</span><span class="Operator">(</span><span class="ID">x</span><span class="Operator">=</span><span class="Number">10</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  12 </span></span>
<span class="line"><span class="LineNumber">  13 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  14 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  15 </span></span>
<span class="line"><span class="LineNumber">  16 </span>    <span class="ResWord">def</span> <span class="ID">up</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">ev</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  17 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="Operator">=</span> <span class="Number">1</span></span>
<span class="line"><span class="LineNumber">  18 </span></span>
<span class="line"><span class="LineNumber">  19 </span>    <span class="ResWord">def</span> <span class="ID">noup</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">ev</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  20 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  21 </span></span>
<span class="line"><span class="LineNumber">  22 </span>    <span class="ResWord">def</span> <span class="ID">down</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">ev</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  23 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="Operator">=</span> <span class="Number">1</span></span>
<span class="line"><span class="LineNumber">  24 </span></span>
<span class="line"><span class="LineNumber">  25 </span>    <span class="ResWord">def</span> <span class="ID">nodown</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">ev</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  26 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  27 </span></span>
<span class="line"><span class="LineNumber">  28 </span>    <span class="ResWord">def</span> <span class="ID">set_vel</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  29 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="ResWord">and</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  30 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  31 </span>        <span class="ResWord">elif</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="ResWord">and</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  32 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  33 </span>        <span class="ResWord">else</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  34 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Number">0</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  35 </span></span>
<span class="line"><span class="LineNumber">  36 </span>    <span class="ResWord">def</span> <span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  37 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">set_vel</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  38 </span>        <span class="ID">Rectangle</span><span class="Operator">.</span><span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  39 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">top</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">bottom</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">jail</span><span
class="Operator">=</span><span class="Number">1</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  40 </span></span>
<span class="line"><span class="LineNumber">  41 </span></span>
<span class="line"><span class="LineNumber">  42 </span><span class="ResWord">class</span> <span class="ID">Pong</span><span class="Operator">(</span><span class="ID">Game</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  43 </span>    <span class="ResWord">def</span> <span class="ID">initialize</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  44 </span>        <span class="ID">paddle</span> <span class="Operator">=</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  45 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">paddle</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  46 </span></span>
<span class="line"><span class="LineNumber">  47 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYDOWN_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="Operator">(</span><span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">K_q</span><span class="Operator">)</span><span
class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span class="ID">up</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  48 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYUP_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="Operator">(</span><span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">K_q</span><span class="Operator">)</span><span
class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span class="ID">noup</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  49 </span></span>
<span class="line"><span class="LineNumber">  50 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYDOWN_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="Operator">(</span><span class="ID">K_DOWN</span><span class="Operator">,</span> <span class="ID">K_a</span><span class="Operator">)</span><span
class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span class="ID">down</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  51 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYUP_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="Operator">(</span><span class="ID">K_DOWN</span><span class="Operator">,</span> <span class="ID">K_a</span><span class="Operator">)</span><span
class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span class="ID">nodown</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  52 </span></span>
<span class="line"><span class="LineNumber">  53 </span><span class="ResWord">if</span> <span class="ID">__name__</span> <span class="Operator">==</span> <span class="String">'__main__'</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  54 </span>    <span class="ID">game</span> <span class="Operator">=</span> <span class="ID">Pong</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  55 </span>    <span class="ID">game</span><span class="Operator">.</span><span class="ID">mainloop</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-199" class="anchor"/><span id="line-200" class="anchor"/><p class="line874">Notice that in this version, you can also control the paddle with the 'Q' and 'A' keys, in addition to the up and down arrows. <span id="line-201" class="anchor"/><span id="line-202" class="anchor"/></p><p class="line867"><strong>注意在这个版本中，你仍然可以用'Q'和'A'键控制paddle，此外还有向上方向键和向下方向键。</strong> <span id="line-203" class="anchor"/><span id="bottom" class="anchor"/></p></div>

<div lang="en" id="content" dir="ltr"><span id="top" class="anchor"/>
<span id="line-3" class="anchor"/><p class="line867"><strong> <span id="line-4" class="anchor"/><a href="/moin/StartProgramming"> （首页）开始编程之旅</a> <span id="line-5" class="anchor"/>翻译自Lee Harr的<a href="http://staff.easthighschool.net/lee/computers/book/Start_Programming.html" class="http">Start Programming</a> <span id="line-6" class="anchor"/><span id="line-7" class="anchor"/></strong></p><p class="line862"><strong>本文是使用<a href="http://www.nongnu.org/pygsear/" class="http">pygsear</a>+<a href="http://pygame.org" class="http">pygame</a>作为开发环境，以初级用户角度来分步分阶段学习<a href="http://www.python.org"
class="http">PYTHON</a>基本概念，并以小游戏开发项目为具体案例，介绍的十分详细。编写风格清新朴实，没有象一般教科书那样枯燥，极其适合初级用户来激发兴趣时使用。 <span id="line-8" class="anchor"/></strong> <span id="line-9" class="anchor"/></p>

<span id="line-10" class="anchor"/>
<h2 id="head-4d28d9fb5aab69dd1fbd17a083386de9137cb693">1. StartProgramming-4-2 Ball</h2>
<span id="line-11" class="anchor"/><span id="line-12" class="anchor"/><p class="line862">We have experience with a ball from the <tt class="backtick">WhoaBall</tt> class. <span id="line-13" class="anchor"/><span id="line-14" class="anchor"/></p><p class="line867"><strong>我们已经从 <tt class="backtick">WhoaBall</tt> 获得了一个球的经验。</strong> <span id="line-15" class="anchor"/><span id="line-16" class="anchor"/></p><p class="line862">We can draw on that experience, but I am not going to inherit from <tt class="backtick">WhoaBall</tt> for the Pong ball. It is just too different. <span id="line-17" class="anchor"/><span id="line-18" class="anchor"/></p><p class="line867"><strong>我们可以从那个经验开始画起，但是我不打算从 <tt class="backtick">WhoaBall</tt> 继承到 Pong ball
，这有太多的差异。</strong> <span id="line-19" class="anchor"/><span id="line-20" class="anchor"/></p><p class="line867"><span id="line-21" class="anchor"/><span id="line-22" class="anchor"/><span id="line-23" class="anchor"/><span id="line-24" class="anchor"/><span id="line-25" class="anchor"/><span id="line-26" class="anchor"/><span id="line-27" class="anchor"/><span id="line-28" class="anchor"/><span id="line-29" class="anchor"/><span id="line-30" class="anchor"/><span id="line-31" class="anchor"/><span id="line-32" class="anchor"/><span id="line-33" class="anchor"/><span id="line-34" class="anchor"/><span id="line-35" class="anchor"/><span id="line-36" class="anchor"/><span id="line-37" class="anchor"/><span id="line-38" class="anchor"/><span id="line-39"
class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
function isnumbered(obj) {
return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
var nlen = Math.max(0,chrs-(''+num).length), res = '';
while (nlen>0) { res += ' '; nlen-- }
return res+num+add;
}
function addnumber(did, nstart, nstep) {
var c = document.getElementById(did), l = c.firstChild, n = 1;
if (!isnumbered(c))
if (typeof nstart == 'undefined') nstart = 1;
if (typeof nstep  == 'undefined') nstep = 1;
n = nstart;
while (l != null) {
if (l.tagName == 'SPAN') {
var s = document.createElement('SPAN');
s.className = 'LineNumber'
s.appendChild(document.createTextNode(nformat(n,4,' ')));
n += nstep;
if (l.childNodes.length)
l.insertBefore(s, l.firstChild)
else
l.appendChild(s)
}
l = l.nextSibling;
}
return false;
}
function remnumber(did) {
var c = document.getElementById(did), l = c.firstChild;
if (isnumbered(c))
while (l != null) {
if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
l = l.nextSibling;
}
return false;
}
function togglenumber(did, nstart, nstep) {
var c = document.getElementById(did);
if (isnumbered(c)) {
remnumber(did);
} else {
addnumber(did,nstart,nstep);
}
return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-3d19f78f82b9406af38fa22560cbdba95e54789a_000\', 1, 1);" \
class="codenumbers">Toggle line numbers<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-3d19f78f82b9406af38fa22560cbdba95e54789a_000', 1, 1);" href="#">Toggle line numbers</a>
<pre lang="en" id="CA-3d19f78f82b9406af38fa22560cbdba95e54789a_000" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Drawable</span> <span class="ResWord">import</span> <span class="ID">Square</span></span>
<span class="line"><span class="LineNumber">   2 </span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">class</span> <span class="ID">Ball</span><span class="Operator">(</span><span class="ID">Square</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   4 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   5 </span>        <span class="ID">Square</span><span class="Operator">.</span><span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">size</span><span class="Operator">=</span><span class="Number">15</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   6 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">center</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   7 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">=</span><span class="Number">150</span><span class="Operator">,</span> <span class="ID">vy</span><span class="Operator">=</span><span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   8 </span></span>
<span class="line"><span class="LineNumber">   9 </span>    <span class="ResWord">def</span> <span class="ID">walls</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  10 </span>        <span class="ID">vx</span><span class="Operator">,</span> <span class="ID">vy</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">get_velocity</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  11 </span>        <span class="ResWord">if</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">top</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">bottom</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">jail</span><span
class="Operator">=</span><span class="Number">1</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  12 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Operator">-</span><span class="ID">vy</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  13 </span>        <span class="ResWord">if</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">right</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">jail</span><span class="Operator">=</span><span class="Number">1</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  14 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">=</span><span class="Operator">-</span><span class="ID">vx</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  15 </span></span>
<span class="line"><span class="LineNumber">  16 </span>    <span class="ResWord">def</span> <span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  17 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">walls</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  18 </span>        <span class="ID">Square</span><span class="Operator">.</span><span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-40" class="anchor"/><span id="line-41" class="anchor"/><p class="line874">Now we can add the new Ball in to our Pong game and see what happens. <span id="line-42" class="anchor"/><span id="line-43" class="anchor"/></p><p class="line867"><strong>现在我们可以把新 Ball 添加到我们的 Pong 游戏中并且看看发生了什么。</strong> <span id="line-44" class="anchor"/><span id="line-45" class="anchor"/></p><p class="line867"><span id="line-46" class="anchor"/><span id="line-47" class="anchor"/><span id="line-48" class="anchor"/><span id="line-49" class="anchor"/><span id="line-50"
class="anchor"/><span id="line-51" class="anchor"/><span id="line-52" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-2c5072d7a9c7a671201f75585d909d9f08969651_001\', 1, 1);" \
class="codenumbers">Toggle line numbers<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-2c5072d7a9c7a671201f75585d909d9f08969651_001', 1, 1);" href="#">Toggle line numbers</a>
<pre lang="en" id="CA-2c5072d7a9c7a671201f75585d909d9f08969651_001" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">class</span> <span class="ID">Pong</span><span class="Operator">(</span><span class="ID">Game</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   2 </span>    <span class="ResWord">def</span> <span class="ID">initialize</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   3 </span>        <span class="ID">paddle</span> <span class="Operator">=</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   4 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">paddle</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   5 </span>        <span class="ID">ball</span> <span class="Operator">=</span> <span class="ID">Ball</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   6 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">ball</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-53" class="anchor"/><span id="line-54" class="anchor"/><p class="line874">Here is our progress so far. We have the paddle and the ball: <span id="line-55" class="anchor"/><span id="line-56" class="anchor"/></p><p class="line867"><strong>这是我们目前的进程。我们有了 paddle 和 ball：</strong> <span id="line-57" class="anchor"/><span id="line-58" class="anchor"/></p><p class="line867"><span id="line-59" class="anchor"/><span id="line-60" class="anchor"/><span id="line-61" class="anchor"/><span id="line-62" class="anchor"/><span id="line-63" class="anchor"/><span
id="line-64" class="anchor"/><span id="line-65" class="anchor"/><span id="line-66" class="anchor"/><span id="line-67" class="anchor"/><span id="line-68" class="anchor"/><span id="line-69" class="anchor"/><span id="line-70" class="anchor"/><span id="line-71" class="anchor"/><span id="line-72" class="anchor"/><span id="line-73" class="anchor"/><span id="line-74" class="anchor"/><span id="line-75" class="anchor"/><span id="line-76" class="anchor"/><span id="line-77" class="anchor"/><span id="line-78" class="anchor"/><span id="line-79" class="anchor"/><span id="line-80"
class="anchor"/><span id="line-81" class="anchor"/><span id="line-82" class="anchor"/><span id="line-83" class="anchor"/><span id="line-84" class="anchor"/><span id="line-85" class="anchor"/><span id="line-86" class="anchor"/><span id="line-87" class="anchor"/><span id="line-88" class="anchor"/><span id="line-89" class="anchor"/><span id="line-90" class="anchor"/><span id="line-91" class="anchor"/><span id="line-92" class="anchor"/><span id="line-93" class="anchor"/><span id="line-94" class="anchor"/><span id="line-95" class="anchor"/><span id="line-96" class="anchor"/><span
id="line-97" class="anchor"/><span id="line-98" class="anchor"/><span id="line-99" class="anchor"/><span id="line-100" class="anchor"/><span id="line-101" class="anchor"/><span id="line-102" class="anchor"/><span id="line-103" class="anchor"/><span id="line-104" class="anchor"/><span id="line-105" class="anchor"/><span id="line-106" class="anchor"/><span id="line-107" class="anchor"/><span id="line-108" class="anchor"/><span id="line-109" class="anchor"/><span id="line-110" class="anchor"/><span id="line-111" class="anchor"/><span id="line-112" class="anchor"/><span id="line-113"
class="anchor"/><span id="line-114" class="anchor"/><span id="line-115" class="anchor"/><span id="line-116" class="anchor"/><span id="line-117" class="anchor"/><span id="line-118" class="anchor"/><span id="line-119" class="anchor"/><span id="line-120" class="anchor"/><span id="line-121" class="anchor"/><span id="line-122" class="anchor"/><span id="line-123" class="anchor"/><span id="line-124" class="anchor"/><span id="line-125" class="anchor"/><span id="line-126" class="anchor"/><span id="line-127" class="anchor"/><span id="line-128" class="anchor"/><span id="line-129"
class="anchor"/><span id="line-130" class="anchor"/><span id="line-131" class="anchor"/><span id="line-132" class="anchor"/><span id="line-133" class="anchor"/><span id="line-134" class="anchor"/><span id="line-135" class="anchor"/><span id="line-136" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-9e565b686edc1c0172bc50f99ea5070421d56617_002\', 1, 1);" \
class="codenumbers">Toggle line numbers<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-9e565b686edc1c0172bc50f99ea5070421d56617_002', 1, 1);" href="#">Toggle line numbers</a>
<pre lang="en" id="CA-9e565b686edc1c0172bc50f99ea5070421d56617_002" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="Comment"># Pong-0.2.py</span></span>
<span class="line"><span class="LineNumber">   2 </span><span class="Comment"/><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Drawable</span> <span class="ResWord">import</span> <span class="ID">Rectangle</span><span class="Operator">,</span> <span class="ID">Square</span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Game</span> <span class="ResWord">import</span> <span class="ID">Game</span></span>
<span class="line"><span class="LineNumber">   4 </span><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Event</span> <span class="ResWord">import</span> <span class="ID">KEYDOWN_Event</span><span class="Operator">,</span> <span class="ID">KEYUP_Event</span></span>
<span class="line"><span class="LineNumber">   5 </span></span>
<span class="line"><span class="LineNumber">   6 </span><span class="ResWord">from</span> <span class="ID">pygame</span><span class="Operator">.</span><span class="ID">locals</span> <span class="ResWord">import</span> <span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">K_DOWN</span></span>
<span class="line"><span class="LineNumber">   7 </span></span>
<span class="line"><span class="LineNumber">   8 </span></span>
<span class="line"><span class="LineNumber">   9 </span><span class="ResWord">class</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="ID">Rectangle</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  10 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  11 </span>        <span class="ID">Rectangle</span><span class="Operator">.</span><span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">width</span><span class="Operator">=</span><span class="Number">15</span><span class="Operator">,</span> <span class="ID">height</span><span class="Operator">=</span><span class="Number">50</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  12 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">center</span><span class="Operator">(</span><span class="ID">x</span><span class="Operator">=</span><span class="Number">10</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  13 </span></span>
<span class="line"><span class="LineNumber">  14 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  15 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  16 </span></span>
<span class="line"><span class="LineNumber">  17 </span>    <span class="ResWord">def</span> <span class="ID">up</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">ev</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  18 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="Operator">=</span> <span class="Number">1</span></span>
<span class="line"><span class="LineNumber">  19 </span></span>
<span class="line"><span class="LineNumber">  20 </span>    <span class="ResWord">def</span> <span class="ID">noup</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">ev</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  21 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  22 </span></span>
<span class="line"><span class="LineNumber">  23 </span>    <span class="ResWord">def</span> <span class="ID">down</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">ev</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  24 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="Operator">=</span> <span class="Number">1</span></span>
<span class="line"><span class="LineNumber">  25 </span></span>
<span class="line"><span class="LineNumber">  26 </span>    <span class="ResWord">def</span> <span class="ID">nodown</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">ev</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  27 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  28 </span></span>
<span class="line"><span class="LineNumber">  29 </span>    <span class="ResWord">def</span> <span class="ID">setVel</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  30 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="ResWord">and</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  31 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  32 </span>        <span class="ResWord">elif</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="ResWord">and</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  33 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  34 </span>        <span class="ResWord">else</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  35 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Number">0</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  36 </span></span>
<span class="line"><span class="LineNumber">  37 </span>    <span class="ResWord">def</span> <span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  38 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">setVel</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  39 </span>        <span class="ID">Rectangle</span><span class="Operator">.</span><span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  40 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">top</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">bottom</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">jail</span><span class="Operator">=</span><span
class="Number">1</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  41 </span></span>
<span class="line"><span class="LineNumber">  42 </span></span>
<span class="line"><span class="LineNumber">  43 </span><span class="ResWord">class</span> <span class="ID">Ball</span><span class="Operator">(</span><span class="ID">Square</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  44 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  45 </span>        <span class="ID">Square</span><span class="Operator">.</span><span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">side</span><span class="Operator">=</span><span class="Number">15</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  46 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">center</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  47 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">=</span><span class="Number">150</span><span class="Operator">,</span> <span class="ID">vy</span><span class="Operator">=</span><span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  48 </span></span>
<span class="line"><span class="LineNumber">  49 </span>    <span class="ResWord">def</span> <span class="ID">walls</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  50 </span>        <span class="ID">vx</span><span class="Operator">,</span> <span class="ID">vy</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">get_velocity</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  51 </span>        <span class="ResWord">if</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">top</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">bottom</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span
class="ID">jail</span><span class="Operator">=</span><span class="Number">1</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  52 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Operator">-</span><span class="ID">vy</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  53 </span>        <span class="ResWord">if</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">right</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">jail</span><span class="Operator">=</span><span class="Number">1</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  54 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">=</span><span class="Operator">-</span><span class="ID">vx</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  55 </span></span>
<span class="line"><span class="LineNumber">  56 </span>    <span class="ResWord">def</span> <span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  57 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">walls</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  58 </span>        <span class="ID">Square</span><span class="Operator">.</span><span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  59 </span></span>
<span class="line"><span class="LineNumber">  60 </span></span>
<span class="line"><span class="LineNumber">  61 </span><span class="ResWord">class</span> <span class="ID">Pong</span><span class="Operator">(</span><span class="ID">Game</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  62 </span>    <span class="ResWord">def</span> <span class="ID">initialize</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  63 </span>        <span class="ID">paddle</span> <span class="Operator">=</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  64 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">paddle</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  65 </span>        <span class="ID">ball</span> <span class="Operator">=</span> <span class="ID">Ball</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  66 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">ball</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  67 </span></span>
<span class="line"><span class="LineNumber">  68 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYDOWN_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span
class="ID">up</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  69 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYUP_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span
class="ID">noup</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  70 </span></span>
<span class="line"><span class="LineNumber">  71 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYDOWN_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_DOWN</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span
class="ID">down</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  72 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYUP_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_DOWN</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span
class="ID">nodown</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  73 </span></span>
<span class="line"><span class="LineNumber">  74 </span></span>
<span class="line"><span class="LineNumber">  75 </span><span class="ResWord">if</span> <span class="ID">__name__</span> <span class="Operator">==</span> <span class="String">'__main__'</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  76 </span>    <span class="ID">game</span> <span class="Operator">=</span> <span class="ID">Pong</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  77 </span>    <span class="ID">game</span><span class="Operator">.</span><span class="ID">mainloop</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-137" class="anchor"/><span id="line-138" class="anchor"/><p class="line874">You can run the new game with: <span id="line-139" class="anchor"/><span id="line-140" class="anchor"/></p><p class="line867"><strong>你可以运行你的新游戏用：</strong> <span id="line-141" class="anchor"/><span id="line-142" class="anchor"/></p><p class="line867"><span id="line-143" class="anchor"/></p><pre>python Pong-0.2.py
<span id="line-144" class="anchor"/></pre><span id="line-145" class="anchor"/><span id="line-146" class="anchor"/><p class="line874">The only problem is that the ball passes right through the paddle! <span id="line-147" class="anchor"/><span id="line-148" class="anchor"/></p><p class="line867"><strong>唯一的问题是 ball 正常穿越了 paddle !</strong> <span id="line-149" class="anchor"/><span id="line-150" class="anchor"/></p><p class="line874">To fix this we need to introduce collisions.  <span id="line-151" class="anchor"/><span id="line-152" class="anchor"/></p><p
class="line867"><strong>要修复这个问题我们需要介绍碰撞。</strong> <span id="line-153" class="anchor"/><span id="bottom" class="anchor"/></p></div>

<div lang="en" id="content" dir="ltr"><span id="top" class="anchor"/>
<span id="line-3" class="anchor"/><p class="line867"><strong> <span id="line-4" class="anchor"/><a href="/moin/StartProgramming"> （首页）开始编程之旅</a> <span id="line-5" class="anchor"/>翻译自Lee Harr的<a href="http://staff.easthighschool.net/lee/computers/book/Start_Programming.html" class="http">Start Programming</a> <span id="line-6" class="anchor"/><span id="line-7" class="anchor"/></strong></p><p class="line862"><strong>本文是使用<a href="http://www.nongnu.org/pygsear/" class="http">pygsear</a>+<a href="http://pygame.org" class="http">pygame</a>作为开发环境，以初级用户角度来分步分阶段学习<a href="http://www.python.org"
class="http">PYTHON</a>基本概念，并以小游戏开发项目为具体案例，介绍的十分详细。编写风格清新朴实，没有象一般教科书那样枯燥，极其适合初级用户来激发兴趣时使用。 <span id="line-8" class="anchor"/></strong> <span id="line-9" class="anchor"/></p>

<span id="line-10" class="anchor"/>
<h2 id="head-c33985586d4ea6239637b278f6ae6ef815b50dfe">1. StartProgramming-4-3 Game</h2>
<span id="line-11" class="anchor"/><span id="line-12" class="anchor"/><p class="line874">In the simplest case, every Drawable object is a rectangle. <span id="line-13" class="anchor"/><span id="line-14" class="anchor"/></p><p class="line867"><strong>在这个简单的例子中，每个可画的对象都是长方形的。</strong> <span id="line-15" class="anchor"/><span id="line-16" class="anchor"/></p><p class="line874">Even when the image that you see is not just a rectangle, the sprite is considered to be the rectangle which would cover the entire image. pygsear defines two different colors you can use for transparency, or it can use the transparency created by an image program like GIMP. <span id="line-17" class="anchor"/><span id="line-18" class="anchor"/></p><p
class="line867"><strong>即使你看到的图像正好不是个正方形，它们的影子也将被转化成完整的图片当作长方形。 pygsear 定义了你可以用于透明的两个不同的颜色，或者你可以用象GIMP那样的图形程序创建透明图形。</strong> <span id="line-19" class="anchor"/><span id="line-20" class="anchor"/></p><p class="line867"><a href="/moin/StartProgramming-4-3?action=AttachFile&amp;rename=image_sprite.png">上载新附件"image_sprite.png"</a> <span id="line-21" class="anchor"/><span id="line-22" class="anchor"/></p><p class="line874">A collision is when two of these rectangles overlap. <span id="line-23" class="anchor"/><span id="line-24" class="anchor"/></p><p class="line867"><strong>当这些长方形重叠时就会有一个碰撞。</strong> <span id="line-25" class="anchor"/><span id="line-26" class="anchor"/></p><p
class="line867"><a href="/moin/StartProgramming-4-3?action=AttachFile&amp;rename=overlap_collision.png">上载新附件"overlap_collision.png"</a> <span id="line-27" class="anchor"/><span id="line-28" class="anchor"/></p><p class="line874">Notice here that even though the images themselves do not touch, these two sprites are colliding. In most cases this will not be a problem, since sprites tend to be small and move relatively fast. <span id="line-29" class="anchor"/><span id="line-30" class="anchor"/></p><p class="line867"><strong>注意这里尽管这些图片自身并没有接触，这些影子是碰到了。在大多数情况下这样做不会产生错误，因为影子一般是倾向比较的小并且移动相对比较快。</strong> <span id="line-31" class="anchor"/><span id="line-32" class="anchor"/></p><p class="line874">In Pong the only
collision we are worried about is between the Paddle and the Ball. <span id="line-33" class="anchor"/><span id="line-34" class="anchor"/></p><p class="line867"><strong>在 Pong 中我们担心的仅有的一次碰撞是在 <tt class="backtick">Paddle</tt> 和 <tt class="backtick">Ball</tt> 之间。</strong> <span id="line-35" class="anchor"/><span id="line-36" class="anchor"/></p><p class="line867"><span id="line-37" class="anchor"/><span id="line-38" class="anchor"/><span id="line-39" class="anchor"/><span id="line-40" class="anchor"/><span id="line-41" class="anchor"/><span id="line-42" class="anchor"/><span id="line-43" class="anchor"/><span id="line-44" class="anchor"/><span id="line-45" class="anchor"/><span id="line-46" class="anchor"/><span id="line-47" class="anchor"/><span id="line-48"
class="anchor"/><span id="line-49" class="anchor"/><span id="line-50" class="anchor"/><span id="line-51" class="anchor"/><span id="line-52" class="anchor"/><span id="line-53" class="anchor"/><span id="line-54" class="anchor"/><span id="line-55" class="anchor"/><span id="line-56" class="anchor"/><span id="line-57" class="anchor"/><span id="line-58" class="anchor"/><span id="line-59" class="anchor"/><span id="line-60" class="anchor"/><span id="line-61" class="anchor"/><span id="line-62" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
function isnumbered(obj) {
return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
var nlen = Math.max(0,chrs-(''+num).length), res = '';
while (nlen>0) { res += ' '; nlen-- }
return res+num+add;
}
function addnumber(did, nstart, nstep) {
var c = document.getElementById(did), l = c.firstChild, n = 1;
if (!isnumbered(c))
if (typeof nstart == 'undefined') nstart = 1;
if (typeof nstep  == 'undefined') nstep = 1;
n = nstart;
while (l != null) {
if (l.tagName == 'SPAN') {
var s = document.createElement('SPAN');
s.className = 'LineNumber'
s.appendChild(document.createTextNode(nformat(n,4,' ')));
n += nstep;
if (l.childNodes.length)
l.insertBefore(s, l.firstChild)
else
l.appendChild(s)
}
l = l.nextSibling;
}
return false;
}
function remnumber(did) {
var c = document.getElementById(did), l = c.firstChild;
if (isnumbered(c))
while (l != null) {
if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
l = l.nextSibling;
}
return false;
}
function togglenumber(did, nstart, nstep) {
var c = document.getElementById(did);
if (isnumbered(c)) {
remnumber(did);
} else {
addnumber(did,nstart,nstep);
}
return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-53d45930b29513f01eefa578deebbf9094ce0898_000\', 1, 1);" \
class="codenumbers">Toggle line numbers<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-53d45930b29513f01eefa578deebbf9094ce0898_000', 1, 1);" href="#">Toggle line numbers</a>
<pre lang="en" id="CA-53d45930b29513f01eefa578deebbf9094ce0898_000" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">class</span> <span class="ID">Ball</span><span class="Operator">(</span><span class="ID">Square</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   2 </span>    <span class="ResWord">def</span> <span class="ID">hit</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   3 </span>        <span class="ID">vx</span><span class="Operator">,</span> <span class="ID">vy</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">get_velocity</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   4 </span>        <span class="ID">vx</span> <span class="Operator">=</span> <span class="ID">abs</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   5 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">=</span><span class="ID">vx</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   6 </span></span>
<span class="line"><span class="LineNumber">   7 </span><span class="ResWord">class</span> <span class="ID">Pong</span><span class="Operator">(</span><span class="ID">Game</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   8 </span>    <span class="ResWord">def</span> <span class="ID">initialize</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   9 </span>        <span class="ID">paddle</span> <span class="Operator">=</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  10 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">paddle</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  11 </span>        <span class="ID">ball</span> <span class="Operator">=</span> <span class="ID">Ball</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  12 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">ball</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  13 </span></span>
<span class="line"><span class="LineNumber">  14 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYDOWN_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span class="ID">up</span><span
class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  15 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYUP_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span class="ID">noup</span><span
class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  16 </span></span>
<span class="line"><span class="LineNumber">  17 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYDOWN_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_DOWN</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span class="ID">down</span><span
class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  18 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYUP_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_DOWN</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span class="ID">nodown</span><span
class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  19 </span></span>
<span class="line"><span class="LineNumber">  20 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">paddle</span> <span class="Operator">=</span> <span class="ID">paddle</span></span>
<span class="line"><span class="LineNumber">  21 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span> <span class="Operator">=</span> <span class="ID">ball</span></span>
<span class="line"><span class="LineNumber">  22 </span></span>
<span class="line"><span class="LineNumber">  23 </span>    <span class="ResWord">def</span> <span class="ID">checkCollisions</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  24 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">collide</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">paddle</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  25 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">hit</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-63" class="anchor"/><span id="line-64" class="anchor"/><p class="line874">Each time through the mainloop() loop, the Game will call checkCollisions() <span id="line-65" class="anchor"/><span id="line-66" class="anchor"/></p><p class="line867"><strong>每次经过 <tt class="backtick">mailloop()</tt> 循环，游戏将调用 <tt class="backtick">checkCollisions()</tt> 过程</strong> <span id="line-67" class="anchor"/><span id="line-68" class="anchor"/></p><p class="line874">Our checkCollisions() will check to see if the Ball has hit the Paddle and if so, it will call the hit() for the
Ball. <span id="line-69" class="anchor"/><span id="line-70" class="anchor"/></p><p class="line867"><strong>我们的 <tt class="backtick">checkCollisions()</tt> 将检查并发现 <tt class="backtick">Ball</tt> 是否撞击到了 <tt class="backtick">Paddle</tt> 上，如果是它将为 <tt class="backtick">Ball</tt> 调用 <tt class="backtick">hit()</tt> 函数。</strong> <span id="line-71" class="anchor"/><span id="line-72" class="anchor"/></p><p class="line874">Important: Notice how we need to modify the initialize() method to keep a handle on the Ball and the Paddle. If the Game did not hold on to those, it would have no
way of checking the collisions. <span id="line-73" class="anchor"/><span id="line-74" class="anchor"/></p><p class="line867"><strong>重要：注意我们如何需要修改 <tt class="backtick">initialize()</tt> 方法来保持一个句柄在 <tt class="backtick">Ball</tt> 和 <tt class="backtick">Paddle</tt> 中。如果游戏不能保持住这些，它将没有办法检测到碰撞。</strong> <span id="line-75" class="anchor"/><span id="line-76" class="anchor"/></p><p class="line874">Once we know there has been a collision, we know the Ball should end up moving to the right, and so that is all hit() does. It makes sure vx is positive, using the
absolute value function. <span id="line-77" class="anchor"/><span id="line-78" class="anchor"/></p><p class="line867"><strong>一旦我们知道这里发生了一次碰撞，我们知道 <tt class="backtick">Ball</tt> 最终将向右面移动，并且那是 <tt class="backtick">hit()</tt> 所做的事。它使得 vx 是正值，用绝对值函数。</strong> <span id="line-79" class="anchor"/><span id="line-80" class="anchor"/></p><p class="line874">The only thing left is to check for the Ball exiting the screen to the left, and to show the score. <span id="line-81" class="anchor"/><span id="line-82" class="anchor"/></p><p
class="line867"><strong>剩下的最后一件事就是检查当球从左边飞出了屏幕，则显示得分。</strong> <span id="line-83" class="anchor"/><span id="line-84" class="anchor"/></p><p class="line867"><span id="line-85" class="anchor"/><span id="line-86" class="anchor"/><span id="line-87" class="anchor"/><span id="line-88" class="anchor"/><span id="line-89" class="anchor"/><span id="line-90" class="anchor"/><span id="line-91" class="anchor"/><span id="line-92" class="anchor"/><span id="line-93" class="anchor"/><span id="line-94" class="anchor"/><span id="line-95" class="anchor"/><span id="line-96"
class="anchor"/><span id="line-97" class="anchor"/><span id="line-98" class="anchor"/><span id="line-99" class="anchor"/><span id="line-100" class="anchor"/><span id="line-101" class="anchor"/><span id="line-102" class="anchor"/><span id="line-103" class="anchor"/><span id="line-104" class="anchor"/><span id="line-105" class="anchor"/><span id="line-106" class="anchor"/><span id="line-107" class="anchor"/><span id="line-108" class="anchor"/><span id="line-109" class="anchor"/><span id="line-110" class="anchor"/><span id="line-111" class="anchor"/><span id="line-112" class="anchor"/><span id="line-113"
class="anchor"/><span id="line-114" class="anchor"/><span id="line-115" class="anchor"/><span id="line-116" class="anchor"/><span id="line-117" class="anchor"/><span id="line-118" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-101c4ab4095b37c4a595f2bba31cd41715227ad5_001\', 1, 1);" \
class="codenumbers">Toggle line numbers<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-101c4ab4095b37c4a595f2bba31cd41715227ad5_001', 1, 1);" href="#">Toggle line numbers</a>
<pre lang="en" id="CA-101c4ab4095b37c4a595f2bba31cd41715227ad5_001" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Drawable</span> <span class="ResWord">import</span> <span class="ID">Score</span></span>
<span class="line"><span class="LineNumber">   2 </span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">class</span> <span class="ID">Pong</span><span class="Operator">(</span><span class="ID">Game</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   4 </span>    <span class="ResWord">def</span> <span class="ID">initialize</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   5 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">window</span><span class="Operator">.</span><span class="ID">border</span><span class="Operator">(</span><span class="ID">left</span><span class="Operator">=</span><span class="Number">0</span><span class="Operator">,</span> <span class="ID">top</span><span class="Operator">=</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">right</span><span class="Operator">=</span><span class="Number">5</span><span
class="Operator">,</span> <span class="ID">bottom</span><span class="Operator">=</span><span class="Number">5</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   6 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">window</span><span class="Operator">.</span><span class="ID">setTitle</span><span class="Operator">(</span><span class="String">'Pong!'</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   7 </span></span>
<span class="line"><span class="LineNumber">   8 </span>        <span class="ID">paddle</span> <span class="Operator">=</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   9 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">paddle</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  10 </span>        <span class="ID">ball</span> <span class="Operator">=</span> <span class="ID">Ball</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  11 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">ball</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  12 </span></span>
<span class="line"><span class="LineNumber">  13 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span> <span class="Operator">=</span> <span class="ID">Score</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  14 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  15 </span></span>
<span class="line"><span class="LineNumber">  16 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYDOWN_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span class="ID">up</span><span
class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  17 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYUP_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span class="ID">noup</span><span
class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  18 </span></span>
<span class="line"><span class="LineNumber">  19 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYDOWN_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_DOWN</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span class="ID">down</span><span
class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  20 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYUP_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_DOWN</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span class="ID">nodown</span><span
class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  21 </span></span>
<span class="line"><span class="LineNumber">  22 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">paddle</span> <span class="Operator">=</span> <span class="ID">paddle</span></span>
<span class="line"><span class="LineNumber">  23 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span> <span class="Operator">=</span> <span class="ID">ball</span></span>
<span class="line"><span class="LineNumber">  24 </span></span>
<span class="line"><span class="LineNumber">  25 </span>    <span class="ResWord">def</span> <span class="ID">checkCollisions</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  26 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">collide</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">paddle</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  27 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">hit</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  28 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">.</span><span class="ID">addPoints</span><span class="Operator">(</span><span class="Number">1</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  29 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">.</span><span class="ID">updateScore</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  30 </span></span>
<span class="line"><span class="LineNumber">  31 </span>        <span class="ResWord">if</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">left</span><span class="Operator">=</span><span class="Number">10</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  32 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">center</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  33 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">=</span><span class="Number">150</span><span class="Operator">,</span> <span class="ID">vy</span><span class="Operator">=</span><span class="Number">100</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-119" class="anchor"/><span id="line-120" class="anchor"/><p class="line874">Actually, while I was in there, I also set a title for the window and added a border around the screen. <span id="line-121" class="anchor"/><span id="line-122" class="anchor"/></p><p class="line867"><strong>实际上，直到现在，我也设置窗口的标题并为屏幕四周加上边框。</strong> <span id="line-123" class="anchor"/><span id="line-124" class="anchor"/></p><p class="line874">That border might make it a bit more clear why all of the onscreen() calls were checking for the ball to be 5 pixels
from the edge. <span id="line-125" class="anchor"/><span id="line-126" class="anchor"/></p><p class="line867"><strong>边框能够使为什么 <tt class="backtick">onscreen()</tt> 调用检查球距离边缘是5像素变得更清楚。</strong> <span id="line-127" class="anchor"/><span id="line-128" class="anchor"/></p><p class="line874">Here is the full source for the game. You can click on the link to download the file: <span id="line-129" class="anchor"/><span id="line-130" class="anchor"/></p><p class="line867"><strong>这里是游戏的完整代码。你可以点击链接下载文件：</strong> <span id="line-131"
class="anchor"/><span id="line-132" class="anchor"/></p><p class="line867"><span id="line-133" class="anchor"/><span id="line-134" class="anchor"/><span id="line-135" class="anchor"/><span id="line-136" class="anchor"/><span id="line-137" class="anchor"/><span id="line-138" class="anchor"/><span id="line-139" class="anchor"/><span id="line-140" class="anchor"/><span id="line-141" class="anchor"/><span id="line-142" class="anchor"/><span id="line-143" class="anchor"/><span id="line-144" class="anchor"/><span id="line-145" class="anchor"/><span id="line-146" class="anchor"/><span
id="line-147" class="anchor"/><span id="line-148" class="anchor"/><span id="line-149" class="anchor"/><span id="line-150" class="anchor"/><span id="line-151" class="anchor"/><span id="line-152" class="anchor"/><span id="line-153" class="anchor"/><span id="line-154" class="anchor"/><span id="line-155" class="anchor"/><span id="line-156" class="anchor"/><span id="line-157" class="anchor"/><span id="line-158" class="anchor"/><span id="line-159" class="anchor"/><span id="line-160" class="anchor"/><span id="line-161" class="anchor"/><span id="line-162" class="anchor"/><span id="line-163"
class="anchor"/><span id="line-164" class="anchor"/><span id="line-165" class="anchor"/><span id="line-166" class="anchor"/><span id="line-167" class="anchor"/><span id="line-168" class="anchor"/><span id="line-169" class="anchor"/><span id="line-170" class="anchor"/><span id="line-171" class="anchor"/><span id="line-172" class="anchor"/><span id="line-173" class="anchor"/><span id="line-174" class="anchor"/><span id="line-175" class="anchor"/><span id="line-176" class="anchor"/><span id="line-177" class="anchor"/><span id="line-178" class="anchor"/><span id="line-179"
class="anchor"/><span id="line-180" class="anchor"/><span id="line-181" class="anchor"/><span id="line-182" class="anchor"/><span id="line-183" class="anchor"/><span id="line-184" class="anchor"/><span id="line-185" class="anchor"/><span id="line-186" class="anchor"/><span id="line-187" class="anchor"/><span id="line-188" class="anchor"/><span id="line-189" class="anchor"/><span id="line-190" class="anchor"/><span id="line-191" class="anchor"/><span id="line-192" class="anchor"/><span id="line-193" class="anchor"/><span id="line-194" class="anchor"/><span id="line-195"
class="anchor"/><span id="line-196" class="anchor"/><span id="line-197" class="anchor"/><span id="line-198" class="anchor"/><span id="line-199" class="anchor"/><span id="line-200" class="anchor"/><span id="line-201" class="anchor"/><span id="line-202" class="anchor"/><span id="line-203" class="anchor"/><span id="line-204" class="anchor"/><span id="line-205" class="anchor"/><span id="line-206" class="anchor"/><span id="line-207" class="anchor"/><span id="line-208" class="anchor"/><span id="line-209" class="anchor"/><span id="line-210" class="anchor"/><span id="line-211"
class="anchor"/><span id="line-212" class="anchor"/><span id="line-213" class="anchor"/><span id="line-214" class="anchor"/><span id="line-215" class="anchor"/><span id="line-216" class="anchor"/><span id="line-217" class="anchor"/><span id="line-218" class="anchor"/><span id="line-219" class="anchor"/><span id="line-220" class="anchor"/><span id="line-221" class="anchor"/><span id="line-222" class="anchor"/><span id="line-223" class="anchor"/><span id="line-224" class="anchor"/><span id="line-225" class="anchor"/><span id="line-226" class="anchor"/><span id="line-227"
class="anchor"/><span id="line-228" class="anchor"/><span id="line-229" class="anchor"/><span id="line-230" class="anchor"/><span id="line-231" class="anchor"/><span id="line-232" class="anchor"/><span id="line-233" class="anchor"/><span id="line-234" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-3c388dc7c83c3aeae610c241b9c84ae34972ee0b_002\', 1, 1);" \
class="codenumbers">Toggle line numbers<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-3c388dc7c83c3aeae610c241b9c84ae34972ee0b_002', 1, 1);" href="#">Toggle line numbers</a>
<pre lang="en" id="CA-3c388dc7c83c3aeae610c241b9c84ae34972ee0b_002" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="Comment"># Pong-1.0.py</span></span>
<span class="line"><span class="LineNumber">   2 </span><span class="Comment"/><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Drawable</span> <span class="ResWord">import</span> <span class="ID">Rectangle</span><span class="Operator">,</span> <span class="ID">Square</span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Widget</span> <span class="ResWord">import</span> <span class="ID">Score</span></span>
<span class="line"><span class="LineNumber">   4 </span><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Game</span> <span class="ResWord">import</span> <span class="ID">Game</span></span>
<span class="line"><span class="LineNumber">   5 </span><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Event</span> <span class="ResWord">import</span> <span class="ID">KEYDOWN_Event</span><span class="Operator">,</span> <span class="ID">KEYUP_Event</span></span>
<span class="line"><span class="LineNumber">   6 </span></span>
<span class="line"><span class="LineNumber">   7 </span><span class="ResWord">from</span> <span class="ID">pygame</span><span class="Operator">.</span><span class="ID">locals</span> <span class="ResWord">import</span> <span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">K_DOWN</span></span>
<span class="line"><span class="LineNumber">   8 </span></span>
<span class="line"><span class="LineNumber">   9 </span><span class="ResWord">class</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="ID">Rectangle</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  10 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  11 </span>        <span class="ID">Rectangle</span><span class="Operator">.</span><span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">width</span><span class="Operator">=</span><span class="Number">15</span><span class="Operator">,</span> <span class="ID">height</span><span class="Operator">=</span><span class="Number">50</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  12 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">center</span><span class="Operator">(</span><span class="ID">x</span><span class="Operator">=</span><span class="Number">10</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  13 </span></span>
<span class="line"><span class="LineNumber">  14 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  15 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  16 </span></span>
<span class="line"><span class="LineNumber">  17 </span>    <span class="ResWord">def</span> <span class="ID">up</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">ev</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  18 </span>         <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="Operator">=</span> <span class="Number">1</span></span>
<span class="line"><span class="LineNumber">  19 </span></span>
<span class="line"><span class="LineNumber">  20 </span>    <span class="ResWord">def</span> <span class="ID">noup</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">ev</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  21 </span>         <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  22 </span></span>
<span class="line"><span class="LineNumber">  23 </span>    <span class="ResWord">def</span> <span class="ID">down</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">ev</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  24 </span>         <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="Operator">=</span> <span class="Number">1</span></span>
<span class="line"><span class="LineNumber">  25 </span></span>
<span class="line"><span class="LineNumber">  26 </span>    <span class="ResWord">def</span> <span class="ID">nodown</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">ev</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  27 </span>         <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  28 </span></span>
<span class="line"><span class="LineNumber">  29 </span>    <span class="ResWord">def</span> <span class="ID">setVel</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  30 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="ResWord">and</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  31 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  32 </span>        <span class="ResWord">elif</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="ResWord">and</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  33 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  34 </span>        <span class="ResWord">else</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  35 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Number">0</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  36 </span></span>
<span class="line"><span class="LineNumber">  37 </span>    <span class="ResWord">def</span> <span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  38 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">setVel</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  39 </span>        <span class="ID">Rectangle</span><span class="Operator">.</span><span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  40 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">top</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">bottom</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">jail</span><span class="Operator">=</span><span
class="Number">1</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  41 </span></span>
<span class="line"><span class="LineNumber">  42 </span></span>
<span class="line"><span class="LineNumber">  43 </span><span class="ResWord">class</span> <span class="ID">Ball</span><span class="Operator">(</span><span class="ID">Square</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  44 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  45 </span>        <span class="ID">Square</span><span class="Operator">.</span><span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">side</span><span class="Operator">=</span><span class="Number">15</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  46 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">center</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  47 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">=</span><span class="Number">150</span><span class="Operator">,</span> <span class="ID">vy</span><span class="Operator">=</span><span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  48 </span></span>
<span class="line"><span class="LineNumber">  49 </span>    <span class="ResWord">def</span> <span class="ID">walls</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  50 </span>        <span class="ID">vx</span><span class="Operator">,</span> <span class="ID">vy</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">get_velocity</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  51 </span>        <span class="ResWord">if</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">top</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">bottom</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span
class="ID">jail</span><span class="Operator">=</span><span class="Number">1</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  52 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Operator">-</span><span class="ID">vy</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  53 </span>        <span class="ResWord">if</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">right</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">jail</span><span class="Operator">=</span><span class="Number">1</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  54 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">=</span><span class="Operator">-</span><span class="ID">vx</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  55 </span></span>
<span class="line"><span class="LineNumber">  56 </span>    <span class="ResWord">def</span> <span class="ID">hit</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  57 </span>        <span class="ID">vx</span><span class="Operator">,</span> <span class="ID">vy</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">get_velocity</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  58 </span>        <span class="ID">vx</span> <span class="Operator">=</span> <span class="ID">abs</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  59 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">=</span><span class="ID">vx</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  60 </span></span>
<span class="line"><span class="LineNumber">  61 </span>    <span class="ResWord">def</span> <span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  62 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">walls</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  63 </span>        <span class="ID">Square</span><span class="Operator">.</span><span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  64 </span></span>
<span class="line"><span class="LineNumber">  65 </span></span>
<span class="line"><span class="LineNumber">  66 </span><span class="ResWord">class</span> <span class="ID">Pong</span><span class="Operator">(</span><span class="ID">Game</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  67 </span>    <span class="ResWord">def</span> <span class="ID">initialize</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  68 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">window</span><span class="Operator">.</span><span class="ID">border</span><span class="Operator">(</span><span class="ID">left</span><span class="Operator">=</span><span class="Number">0</span><span class="Operator">,</span> <span class="ID">top</span><span class="Operator">=</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">right</span><span class="Operator">=</span><span
class="Number">5</span><span class="Operator">,</span> <span class="ID">bottom</span><span class="Operator">=</span><span class="Number">5</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  69 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">window</span><span class="Operator">.</span><span class="ID">set_title</span><span class="Operator">(</span><span class="String">'Pong!'</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  70 </span></span>
<span class="line"><span class="LineNumber">  71 </span>        <span class="ID">paddle</span> <span class="Operator">=</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  72 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">paddle</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  73 </span>        <span class="ID">ball</span> <span class="Operator">=</span> <span class="ID">Ball</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  74 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">ball</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  75 </span></span>
<span class="line"><span class="LineNumber">  76 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span> <span class="Operator">=</span> <span class="ID">Score</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  77 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  78 </span></span>
<span class="line"><span class="LineNumber">  79 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYDOWN_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span
class="ID">up</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  80 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYUP_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span
class="ID">noup</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  81 </span></span>
<span class="line"><span class="LineNumber">  82 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYDOWN_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_DOWN</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span
class="ID">down</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  83 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYUP_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_DOWN</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span
class="ID">nodown</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  84 </span></span>
<span class="line"><span class="LineNumber">  85 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">paddle</span> <span class="Operator">=</span> <span class="ID">paddle</span></span>
<span class="line"><span class="LineNumber">  86 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span> <span class="Operator">=</span> <span class="ID">ball</span></span>
<span class="line"><span class="LineNumber">  87 </span></span>
<span class="line"><span class="LineNumber">  88 </span>    <span class="ResWord">def</span> <span class="ID">checkCollisions</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  89 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">collide</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">paddle</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  90 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">hit</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  91 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">.</span><span class="ID">addPoints</span><span class="Operator">(</span><span class="Number">1</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  92 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">.</span><span class="ID">updateScore</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  93 </span></span>
<span class="line"><span class="LineNumber">  94 </span>        <span class="ResWord">if</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">left</span><span class="Operator">=</span><span class="Number">10</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  95 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">center</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  96 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">=</span><span class="Number">150</span><span class="Operator">,</span> <span class="ID">vy</span><span class="Operator">=</span><span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  97 </span></span>
<span class="line"><span class="LineNumber">  98 </span></span>
<span class="line"><span class="LineNumber">  99 </span><span class="ResWord">if</span> <span class="ID">__name__</span> <span class="Operator">==</span> <span class="String">'__main__'</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 100 </span>    <span class="ID">game</span> <span class="Operator">=</span> <span class="ID">Pong</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 101 </span>    <span class="ID">game</span><span class="Operator">.</span><span class="ID">mainloop</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-235" class="anchor"/><span id="bottom" class="anchor"/></div>

<div lang="en" id="content" dir="ltr"><span id="top" class="anchor"/>
<span id="line-3" class="anchor"/><p class="line867"><strong> <span id="line-4" class="anchor"/><a href="/moin/StartProgramming"> （首页）开始编程之旅</a> <span id="line-5" class="anchor"/>翻译自Lee Harr的<a href="http://staff.easthighschool.net/lee/computers/book/Start_Programming.html" class="http">Start Programming</a> <span id="line-6" class="anchor"/><span id="line-7" class="anchor"/></strong></p><p class="line862"><strong>本文是使用<a href="http://www.nongnu.org/pygsear/" class="http">pygsear</a>+<a href="http://pygame.org" class="http">pygame</a>作为开发环境，以初级用户角度来分步分阶段学习<a href="http://www.python.org"
class="http">PYTHON</a>基本概念，并以小游戏开发项目为具体案例，介绍的十分详细。编写风格清新朴实，没有象一般教科书那样枯燥，极其适合初级用户来激发兴趣时使用。 <span id="line-8" class="anchor"/></strong> <span id="line-9" class="anchor"/></p>

<span id="line-10" class="anchor"/>
<h2 id="head-fe51c86f5cbae360f263eab0a63522e27fe3be43">1. StartProgramming-4-4 Tweak</h2>
<span id="line-11" class="anchor"/><span id="line-12" class="anchor"/><p class="line874">Ok, that is a pretty good start. We have a ball and a paddle and everything basically works. <span id="line-13" class="anchor"/><span id="line-14" class="anchor"/></p><p class="line867"><strong>好的，那是一个非常好的开始。我们有了一个球和一个挡板并且基本上所有的都工作了。</strong> <span id="line-15" class="anchor"/><span id="line-16" class="anchor"/></p><p class="line874">The game is not much fun though. What we need is to shake things up a little bit. Let's see how we can make the game better. <span id="line-17" class="anchor"/><span id="line-18" class="anchor"/></p><p class="line867"><strong>这个游戏并不够有趣。我们需要使事物有一点变化不定。让我们看看如何使游戏更好。</strong> <span
id="line-19" class="anchor"/><span id="line-20" class="anchor"/></p><p class="line874">How about each time you hit the ball, it speeds up and goes in a random direction? <span id="line-21" class="anchor"/><span id="line-22" class="anchor"/></p><p class="line867"><strong>每次你击球，它加快速度并向一个随机的方向移动怎么样？</strong> <span id="line-23" class="anchor"/><span id="line-24" class="anchor"/></p><p class="line867"><span id="line-25" class="anchor"/><span id="line-26" class="anchor"/><span id="line-27" class="anchor"/><span id="line-28" class="anchor"/><span id="line-29" class="anchor"/><span id="line-30" class="anchor"/><span id="line-31" class="anchor"/><span id="line-32" class="anchor"/><span id="line-33" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
function isnumbered(obj) {
return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
var nlen = Math.max(0,chrs-(''+num).length), res = '';
while (nlen>0) { res += ' '; nlen-- }
return res+num+add;
}
function addnumber(did, nstart, nstep) {
var c = document.getElementById(did), l = c.firstChild, n = 1;
if (!isnumbered(c))
if (typeof nstart == 'undefined') nstart = 1;
if (typeof nstep  == 'undefined') nstep = 1;
n = nstart;
while (l != null) {
if (l.tagName == 'SPAN') {
var s = document.createElement('SPAN');
s.className = 'LineNumber'
s.appendChild(document.createTextNode(nformat(n,4,' ')));
n += nstep;
if (l.childNodes.length)
l.insertBefore(s, l.firstChild)
else
l.appendChild(s)
}
l = l.nextSibling;
}
return false;
}
function remnumber(did) {
var c = document.getElementById(did), l = c.firstChild;
if (isnumbered(c))
while (l != null) {
if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
l = l.nextSibling;
}
return false;
}
function togglenumber(did, nstart, nstep) {
var c = document.getElementById(did);
if (isnumbered(c)) {
remnumber(did);
} else {
addnumber(did,nstart,nstep);
}
return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-c94ea0c014a92a6ae3242cfcc9aa08c8321f819c_000\', 1, 1);" \
class="codenumbers">Toggle line numbers<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-c94ea0c014a92a6ae3242cfcc9aa08c8321f819c_000', 1, 1);" href="#">Toggle line numbers</a>
<pre lang="en" id="CA-c94ea0c014a92a6ae3242cfcc9aa08c8321f819c_000" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">import</span> <span class="ID">random</span></span>
<span class="line"><span class="LineNumber">   2 </span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ResWord">class</span> <span class="ID">Ball</span><span class="Operator">(</span><span class="ID">Square</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   4 </span>    <span class="ResWord">def</span> <span class="ID">hit</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   5 </span>        <span class="ID">vx</span><span class="Operator">,</span> <span class="ID">vy</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">get_velocity</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   6 </span>        <span class="ID">vx</span> <span class="Operator">=</span> <span class="ID">abs</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">)</span> <span class="Operator">+</span> <span class="Number">20</span></span>
<span class="line"><span class="LineNumber">   7 </span>        <span class="ID">vy</span> <span class="Operator">=</span> <span class="ID">random</span><span class="Operator">.</span><span class="ID">uniform</span><span class="Operator">(</span><span class="Operator">-</span><span class="Number">100</span><span class="Operator">,</span> <span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   8 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">,</span> <span class="ID">vy</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-34" class="anchor"/><span id="line-35" class="anchor"/><p class="line874">That should make things a bit more exciting. Especially after you have hit the ball a few times. <span id="line-36" class="anchor"/><span id="line-37" class="anchor"/></p><p class="line867"><strong>那将使事情有一点刺激。特别是你在很短的时间击球之后。</strong> <span id="line-38" class="anchor"/><span id="line-39" class="anchor"/></p><p class="line874">In fact, if you try it out, it soon becomes impossible to hit the ball. We need to speed the paddle up as the ball goes faster. <span id="line-40"
class="anchor"/><span id="line-41" class="anchor"/></p><p class="line867"><strong>事实上，如果你尝试那样做，它不久就会不可能击到球。我们需要加快挡板的速度就像球加速一样。</strong> <span id="line-42" class="anchor"/><span id="line-43" class="anchor"/></p><p class="line867"><span id="line-44" class="anchor"/><span id="line-45" class="anchor"/><span id="line-46" class="anchor"/><span id="line-47" class="anchor"/><span id="line-48" class="anchor"/><span id="line-49" class="anchor"/><span id="line-50" class="anchor"/><span id="line-51" class="anchor"/><span id="line-52" class="anchor"/><span id="line-53"
class="anchor"/><span id="line-54" class="anchor"/><span id="line-55" class="anchor"/><span id="line-56" class="anchor"/><span id="line-57" class="anchor"/><span id="line-58" class="anchor"/><span id="line-59" class="anchor"/><span id="line-60" class="anchor"/><span id="line-61" class="anchor"/><span id="line-62" class="anchor"/><span id="line-63" class="anchor"/><span id="line-64" class="anchor"/><span id="line-65" class="anchor"/><span id="line-66" class="anchor"/><span id="line-67" class="anchor"/><span id="line-68" class="anchor"/><span id="line-69" class="anchor"/><span id="line-70"
class="anchor"/><span id="line-71" class="anchor"/><span id="line-72" class="anchor"/><span id="line-73" class="anchor"/><span id="line-74" class="anchor"/><span id="line-75" class="anchor"/><span id="line-76" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-6c79f51ef825c946d2556495259bde5cb212890b_001\', 1, 1);" \
class="codenumbers">Toggle line numbers<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-6c79f51ef825c946d2556495259bde5cb212890b_001', 1, 1);" href="#">Toggle line numbers</a>
<pre lang="en" id="CA-6c79f51ef825c946d2556495259bde5cb212890b_001" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">class</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="ID">Rectangle</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   2 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   3 </span>        <span class="ID">Rectangle</span><span class="Operator">.</span><span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">width</span><span class="Operator">=</span><span class="Number">15</span><span class="Operator">,</span> <span class="ID">height</span><span class="Operator">=</span><span class="Number">50</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   4 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">center</span><span class="Operator">(</span><span class="ID">x</span><span class="Operator">=</span><span class="Number">10</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   5 </span></span>
<span class="line"><span class="LineNumber">   6 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">speed</span> <span class="Operator">=</span> <span class="Number">100</span></span>
<span class="line"><span class="LineNumber">   7 </span></span>
<span class="line"><span class="LineNumber">   8 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">   9 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  10 </span></span>
<span class="line"><span class="LineNumber">  11 </span>    <span class="ResWord">def</span> <span class="ID">hit</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  12 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">speed</span> <span class="Operator">+=</span> <span class="Number">4</span></span>
<span class="line"><span class="LineNumber">  13 </span></span>
<span class="line"><span class="LineNumber">  14 </span>    <span class="ResWord">def</span> <span class="ID">setVel</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  15 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="ResWord">and</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  16 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Operator">-</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">speed</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  17 </span>        <span class="ResWord">elif</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="ResWord">and</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  18 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">speed</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  19 </span>        <span class="ResWord">else</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  20 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Number">0</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  21 </span></span>
<span class="line"><span class="LineNumber">  22 </span><span class="ResWord">class</span> <span class="ID">Pong</span><span class="Operator">(</span><span class="ID">Game</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  23 </span>    <span class="ResWord">def</span> <span class="ID">checkCollisions</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  24 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">collide</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">paddle</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  25 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">hit</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  26 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">paddle</span><span class="Operator">.</span><span class="ID">hit</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  27 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">.</span><span class="ID">addPoints</span><span class="Operator">(</span><span class="Number">1</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  28 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">.</span><span class="ID">updateScore</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  29 </span></span>
<span class="line"><span class="LineNumber">  30 </span>        <span class="ResWord">if</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">left</span><span class="Operator">=</span><span class="Number">10</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  31 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">center</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  32 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">=</span><span class="Number">150</span><span class="Operator">,</span> <span class="ID">vy</span><span class="Operator">=</span><span class="Number">100</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-77" class="anchor"/><span id="line-78" class="anchor"/><p class="line874">Finally, to make the game ever so slightly addictive, I want to keep track of the high score so far. <span id="line-79" class="anchor"/><span id="line-80" class="anchor"/></p><p class="line867"><strong>最后，要使游戏每次都那么的吸引人，我想保持继续了解目前为止最高的分数。</strong> <span id="line-81" class="anchor"/><span id="line-82" class="anchor"/></p><p class="line867"><span id="line-83" class="anchor"/><span id="line-84" class="anchor"/><span id="line-85" class="anchor"/><span
id="line-86" class="anchor"/><span id="line-87" class="anchor"/><span id="line-88" class="anchor"/><span id="line-89" class="anchor"/><span id="line-90" class="anchor"/><span id="line-91" class="anchor"/><span id="line-92" class="anchor"/><span id="line-93" class="anchor"/><span id="line-94" class="anchor"/><span id="line-95" class="anchor"/><span id="line-96" class="anchor"/><span id="line-97" class="anchor"/><span id="line-98" class="anchor"/><span id="line-99" class="anchor"/><span id="line-100" class="anchor"/><span id="line-101" class="anchor"/><span id="line-102"
class="anchor"/><span id="line-103" class="anchor"/><span id="line-104" class="anchor"/><span id="line-105" class="anchor"/><span id="line-106" class="anchor"/><span id="line-107" class="anchor"/><span id="line-108" class="anchor"/><span id="line-109" class="anchor"/><span id="line-110" class="anchor"/><span id="line-111" class="anchor"/><span id="line-112" class="anchor"/><span id="line-113" class="anchor"/><span id="line-114" class="anchor"/><span id="line-115" class="anchor"/><span id="line-116" class="anchor"/><span id="line-117" class="anchor"/><span id="line-118"
class="anchor"/><span id="line-119" class="anchor"/><span id="line-120" class="anchor"/><span id="line-121" class="anchor"/><span id="line-122" class="anchor"/><span id="line-123" class="anchor"/><span id="line-124" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-9e633986ac17a697afd0f403433c20c923fd7110_002\', 1, 1);" \
class="codenumbers">Toggle line numbers<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-9e633986ac17a697afd0f403433c20c923fd7110_002', 1, 1);" href="#">Toggle line numbers</a>
<pre lang="en" id="CA-9e633986ac17a697afd0f403433c20c923fd7110_002" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">class</span> <span class="ID">Pong</span><span class="Operator">(</span><span class="ID">Game</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   2 </span>    <span class="ResWord">def</span> <span class="ID">initialize</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   3 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">window</span><span class="Operator">.</span><span class="ID">border</span><span class="Operator">(</span><span class="ID">left</span><span class="Operator">=</span><span class="Number">0</span><span class="Operator">,</span> <span class="ID">top</span><span class="Operator">=</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">right</span><span class="Operator">=</span><span
class="Number">5</span><span class="Operator">,</span> <span class="ID">bottom</span><span class="Operator">=</span><span class="Number">5</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   4 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">window</span><span class="Operator">.</span><span class="ID">setTitle</span><span class="Operator">(</span><span class="String">'Pong!'</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   5 </span></span>
<span class="line"><span class="LineNumber">   6 </span>        <span class="ID">paddle</span> <span class="Operator">=</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   7 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">paddle</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   8 </span>        <span class="ID">ball</span> <span class="Operator">=</span> <span class="ID">Ball</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   9 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">ball</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  10 </span></span>
<span class="line"><span class="LineNumber">  11 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span> <span class="Operator">=</span> <span class="ID">Score</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  12 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  13 </span></span>
<span class="line"><span class="LineNumber">  14 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYDOWN_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span
class="ID">up</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  15 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYUP_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span
class="ID">noup</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  16 </span></span>
<span class="line"><span class="LineNumber">  17 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYDOWN_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_DOWN</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span
class="ID">down</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  18 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYUP_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_DOWN</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span
class="ID">nodown</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  19 </span></span>
<span class="line"><span class="LineNumber">  20 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">paddle</span> <span class="Operator">=</span> <span class="ID">paddle</span></span>
<span class="line"><span class="LineNumber">  21 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span> <span class="Operator">=</span> <span class="ID">ball</span></span>
<span class="line"><span class="LineNumber">  22 </span></span>
<span class="line"><span class="LineNumber">  23 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">hscore</span> <span class="Operator">=</span> <span class="ID">Score</span><span class="Operator">(</span><span class="ID">text</span><span class="Operator">=</span><span class="String">'High:'</span><span class="Operator">,</span> <span class="ID">position</span><span class="Operator">=</span><span class="Operator">(</span><span class="Number">100</span><span class="Operator">,</span><span class="Number">70</span><span
class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  24 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">hscore</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  25 </span></span>
<span class="line"><span class="LineNumber">  26 </span>    <span class="ResWord">def</span> <span class="ID">checkCollisions</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  27 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">collide</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">paddle</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  28 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">hit</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  29 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">paddle</span><span class="Operator">.</span><span class="ID">hit</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  30 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">.</span><span class="ID">addPoints</span><span class="Operator">(</span><span class="Number">1</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  31 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">.</span><span class="ID">updateScore</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  32 </span></span>
<span class="line"><span class="LineNumber">  33 </span>        <span class="ResWord">if</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">left</span><span class="Operator">=</span><span class="Number">10</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  34 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">center</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  35 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">=</span><span class="Number">150</span><span class="Operator">,</span> <span class="ID">vy</span><span class="Operator">=</span><span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  36 </span></span>
<span class="line"><span class="LineNumber">  37 </span>            <span class="ID">high</span> <span class="Operator">=</span> <span class="ID">max</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">.</span><span class="ID">points</span><span class="Operator">,</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">hscore</span><span class="Operator">.</span><span class="ID">points</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  38 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">hscore</span><span class="Operator">.</span><span class="ID">setPoints</span><span class="Operator">(</span><span class="ID">high</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  39 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">maxscore</span><span class="Operator">.</span><span class="ID">updateScore</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  40 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">.</span><span class="ID">setPoints</span><span class="Operator">(</span><span class="Number">0</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  41 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">.</span><span class="ID">updateScore</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-125" class="anchor"/><span id="line-126" class="anchor"/><p class="line874">So, here is the code for our tweaked pong game: <span id="line-127" class="anchor"/><span id="line-128" class="anchor"/></p><p class="line867"><strong>因此，这是我们 tweaked pong 的游戏的代码：</strong> <span id="line-129" class="anchor"/><span id="line-130" class="anchor"/></p><p class="line867"><span id="line-131" class="anchor"/><span id="line-132" class="anchor"/><span id="line-133" class="anchor"/><span id="line-134" class="anchor"/><span id="line-135"
class="anchor"/><span id="line-136" class="anchor"/><span id="line-137" class="anchor"/><span id="line-138" class="anchor"/><span id="line-139" class="anchor"/><span id="line-140" class="anchor"/><span id="line-141" class="anchor"/><span id="line-142" class="anchor"/><span id="line-143" class="anchor"/><span id="line-144" class="anchor"/><span id="line-145" class="anchor"/><span id="line-146" class="anchor"/><span id="line-147" class="anchor"/><span id="line-148" class="anchor"/><span id="line-149" class="anchor"/><span id="line-150" class="anchor"/><span id="line-151"
class="anchor"/><span id="line-152" class="anchor"/><span id="line-153" class="anchor"/><span id="line-154" class="anchor"/><span id="line-155" class="anchor"/><span id="line-156" class="anchor"/><span id="line-157" class="anchor"/><span id="line-158" class="anchor"/><span id="line-159" class="anchor"/><span id="line-160" class="anchor"/><span id="line-161" class="anchor"/><span id="line-162" class="anchor"/><span id="line-163" class="anchor"/><span id="line-164" class="anchor"/><span id="line-165" class="anchor"/><span id="line-166" class="anchor"/><span id="line-167"
class="anchor"/><span id="line-168" class="anchor"/><span id="line-169" class="anchor"/><span id="line-170" class="anchor"/><span id="line-171" class="anchor"/><span id="line-172" class="anchor"/><span id="line-173" class="anchor"/><span id="line-174" class="anchor"/><span id="line-175" class="anchor"/><span id="line-176" class="anchor"/><span id="line-177" class="anchor"/><span id="line-178" class="anchor"/><span id="line-179" class="anchor"/><span id="line-180" class="anchor"/><span id="line-181" class="anchor"/><span id="line-182" class="anchor"/><span id="line-183"
class="anchor"/><span id="line-184" class="anchor"/><span id="line-185" class="anchor"/><span id="line-186" class="anchor"/><span id="line-187" class="anchor"/><span id="line-188" class="anchor"/><span id="line-189" class="anchor"/><span id="line-190" class="anchor"/><span id="line-191" class="anchor"/><span id="line-192" class="anchor"/><span id="line-193" class="anchor"/><span id="line-194" class="anchor"/><span id="line-195" class="anchor"/><span id="line-196" class="anchor"/><span id="line-197" class="anchor"/><span id="line-198" class="anchor"/><span id="line-199"
class="anchor"/><span id="line-200" class="anchor"/><span id="line-201" class="anchor"/><span id="line-202" class="anchor"/><span id="line-203" class="anchor"/><span id="line-204" class="anchor"/><span id="line-205" class="anchor"/><span id="line-206" class="anchor"/><span id="line-207" class="anchor"/><span id="line-208" class="anchor"/><span id="line-209" class="anchor"/><span id="line-210" class="anchor"/><span id="line-211" class="anchor"/><span id="line-212" class="anchor"/><span id="line-213" class="anchor"/><span id="line-214" class="anchor"/><span id="line-215"
class="anchor"/><span id="line-216" class="anchor"/><span id="line-217" class="anchor"/><span id="line-218" class="anchor"/><span id="line-219" class="anchor"/><span id="line-220" class="anchor"/><span id="line-221" class="anchor"/><span id="line-222" class="anchor"/><span id="line-223" class="anchor"/><span id="line-224" class="anchor"/><span id="line-225" class="anchor"/><span id="line-226" class="anchor"/><span id="line-227" class="anchor"/><span id="line-228" class="anchor"/><span id="line-229" class="anchor"/><span id="line-230" class="anchor"/><span id="line-231"
class="anchor"/><span id="line-232" class="anchor"/><span id="line-233" class="anchor"/><span id="line-234" class="anchor"/><span id="line-235" class="anchor"/><span id="line-236" class="anchor"/><span id="line-237" class="anchor"/><span id="line-238" class="anchor"/><span id="line-239" class="anchor"/><span id="line-240" class="anchor"/><span id="line-241" class="anchor"/><span id="line-242" class="anchor"/><span id="line-243" class="anchor"/><span id="line-244" class="anchor"/><span id="line-245" class="anchor"/><span id="line-246" class="anchor"/><span id="line-247"
class="anchor"/><span id="line-248" class="anchor"/><span id="line-249" class="anchor"/><span id="line-250" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-c419a94b721adea4747ec968164e5ee0f5a3ecc0_003\', 1, 1);" \
class="codenumbers">Toggle line numbers<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-c419a94b721adea4747ec968164e5ee0f5a3ecc0_003', 1, 1);" href="#">Toggle line numbers</a>
<pre lang="en" id="CA-c419a94b721adea4747ec968164e5ee0f5a3ecc0_003" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="Comment"># Pong-1.1.py</span></span>
<span class="line"><span class="LineNumber">   2 </span><span class="Comment"/><span class="ResWord">import</span> <span class="ID">random</span></span>
<span class="line"><span class="LineNumber">   3 </span></span>
<span class="line"><span class="LineNumber">   4 </span><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Drawable</span> <span class="ResWord">import</span> <span class="ID">Rectangle</span><span class="Operator">,</span> <span class="ID">Square</span></span>
<span class="line"><span class="LineNumber">   5 </span><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Widget</span> <span class="ResWord">import</span> <span class="ID">Score</span></span>
<span class="line"><span class="LineNumber">   6 </span><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Game</span> <span class="ResWord">import</span> <span class="ID">Game</span></span>
<span class="line"><span class="LineNumber">   7 </span><span class="ResWord">from</span> <span class="ID">pygsear</span><span class="Operator">.</span><span class="ID">Event</span> <span class="ResWord">import</span> <span class="ID">KEYDOWN_Event</span><span class="Operator">,</span> <span class="ID">KEYUP_Event</span></span>
<span class="line"><span class="LineNumber">   8 </span></span>
<span class="line"><span class="LineNumber">   9 </span><span class="ResWord">from</span> <span class="ID">pygame</span><span class="Operator">.</span><span class="ID">locals</span> <span class="ResWord">import</span> <span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">K_DOWN</span></span>
<span class="line"><span class="LineNumber">  10 </span></span>
<span class="line"><span class="LineNumber">  11 </span><span class="ResWord">class</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="ID">Rectangle</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  12 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  13 </span>        <span class="ID">Rectangle</span><span class="Operator">.</span><span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">width</span><span class="Operator">=</span><span class="Number">15</span><span class="Operator">,</span> <span class="ID">height</span><span class="Operator">=</span><span class="Number">50</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  14 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">center</span><span class="Operator">(</span><span class="ID">x</span><span class="Operator">=</span><span class="Number">10</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  15 </span></span>
<span class="line"><span class="LineNumber">  16 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  17 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  18 </span></span>
<span class="line"><span class="LineNumber">  19 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">speed</span> <span class="Operator">=</span> <span class="Number">100</span></span>
<span class="line"><span class="LineNumber">  20 </span></span>
<span class="line"><span class="LineNumber">  21 </span>    <span class="ResWord">def</span> <span class="ID">up</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">ev</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  22 </span>         <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="Operator">=</span> <span class="Number">1</span></span>
<span class="line"><span class="LineNumber">  23 </span></span>
<span class="line"><span class="LineNumber">  24 </span>    <span class="ResWord">def</span> <span class="ID">noup</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">ev</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  25 </span>         <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  26 </span></span>
<span class="line"><span class="LineNumber">  27 </span>    <span class="ResWord">def</span> <span class="ID">down</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">ev</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  28 </span>         <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="Operator">=</span> <span class="Number">1</span></span>
<span class="line"><span class="LineNumber">  29 </span></span>
<span class="line"><span class="LineNumber">  30 </span>    <span class="ResWord">def</span> <span class="ID">nodown</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">ev</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  31 </span>         <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  32 </span></span>
<span class="line"><span class="LineNumber">  33 </span>    <span class="ResWord">def</span> <span class="ID">hit</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  34 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">speed</span> <span class="Operator">+=</span> <span class="Number">4</span></span>
<span class="line"><span class="LineNumber">  35 </span></span>
<span class="line"><span class="LineNumber">  36 </span>    <span class="ResWord">def</span> <span class="ID">setVel</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  37 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span> <span class="ResWord">and</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  38 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Operator">-</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">speed</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  39 </span>        <span class="ResWord">elif</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">down_pressed</span> <span class="ResWord">and</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">up_pressed</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  40 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">speed</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  41 </span>        <span class="ResWord">else</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  42 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Number">0</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  43 </span></span>
<span class="line"><span class="LineNumber">  44 </span>    <span class="ResWord">def</span> <span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  45 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">setVel</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  46 </span>        <span class="ID">Rectangle</span><span class="Operator">.</span><span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  47 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">top</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">bottom</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">jail</span><span class="Operator">=</span><span
class="Number">1</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  48 </span></span>
<span class="line"><span class="LineNumber">  49 </span></span>
<span class="line"><span class="LineNumber">  50 </span><span class="ResWord">class</span> <span class="ID">Ball</span><span class="Operator">(</span><span class="ID">Square</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  51 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  52 </span>        <span class="ID">Square</span><span class="Operator">.</span><span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">side</span><span class="Operator">=</span><span class="Number">15</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  53 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">center</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  54 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">=</span><span class="Number">150</span><span class="Operator">,</span> <span class="ID">vy</span><span class="Operator">=</span><span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  55 </span></span>
<span class="line"><span class="LineNumber">  56 </span>    <span class="ResWord">def</span> <span class="ID">walls</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  57 </span>        <span class="ID">vx</span><span class="Operator">,</span> <span class="ID">vy</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">get_velocity</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  58 </span>        <span class="ResWord">if</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">top</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">bottom</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span
class="ID">jail</span><span class="Operator">=</span><span class="Number">1</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  59 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vy</span><span class="Operator">=</span><span class="Operator">-</span><span class="ID">vy</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  60 </span>        <span class="ResWord">if</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">right</span><span class="Operator">=</span><span class="Operator">-</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">jail</span><span class="Operator">=</span><span class="Number">1</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  61 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">=</span><span class="Operator">-</span><span class="ID">vx</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  62 </span></span>
<span class="line"><span class="LineNumber">  63 </span>    <span class="ResWord">def</span> <span class="ID">hit</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  64 </span>        <span class="ID">vx</span><span class="Operator">,</span> <span class="ID">vy</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">get_velocity</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  65 </span>        <span class="ID">vx</span> <span class="Operator">=</span> <span class="ID">abs</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">)</span> <span class="Operator">+</span> <span class="Number">20</span></span>
<span class="line"><span class="LineNumber">  66 </span>        <span class="ID">vy</span> <span class="Operator">=</span> <span class="ID">random</span><span class="Operator">.</span><span class="ID">uniform</span><span class="Operator">(</span><span class="Operator">-</span><span class="Number">100</span><span class="Operator">,</span> <span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  67 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">=</span><span class="ID">vx</span><span class="Operator">,</span> <span class="ID">vy</span><span class="Operator">=</span><span class="ID">vy</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  68 </span></span>
<span class="line"><span class="LineNumber">  69 </span>    <span class="ResWord">def</span> <span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  70 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">walls</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  71 </span>        <span class="ID">Square</span><span class="Operator">.</span><span class="ID">move</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  72 </span></span>
<span class="line"><span class="LineNumber">  73 </span></span>
<span class="line"><span class="LineNumber">  74 </span><span class="ResWord">class</span> <span class="ID">Pong</span><span class="Operator">(</span><span class="ID">Game</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  75 </span>    <span class="ResWord">def</span> <span class="ID">initialize</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  76 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">window</span><span class="Operator">.</span><span class="ID">border</span><span class="Operator">(</span><span class="ID">left</span><span class="Operator">=</span><span class="Number">0</span><span class="Operator">,</span> <span class="ID">top</span><span class="Operator">=</span><span class="Number">5</span><span class="Operator">,</span> <span class="ID">right</span><span class="Operator">=</span><span
class="Number">5</span><span class="Operator">,</span> <span class="ID">bottom</span><span class="Operator">=</span><span class="Number">5</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  77 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">window</span><span class="Operator">.</span><span class="ID">set_title</span><span class="Operator">(</span><span class="String">'Pong!'</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  78 </span></span>
<span class="line"><span class="LineNumber">  79 </span>        <span class="ID">paddle</span> <span class="Operator">=</span> <span class="ID">Paddle</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  80 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">paddle</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  81 </span>        <span class="ID">ball</span> <span class="Operator">=</span> <span class="ID">Ball</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  82 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">ball</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  83 </span></span>
<span class="line"><span class="LineNumber">  84 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">paddle</span> <span class="Operator">=</span> <span class="ID">paddle</span></span>
<span class="line"><span class="LineNumber">  85 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span> <span class="Operator">=</span> <span class="ID">ball</span></span>
<span class="line"><span class="LineNumber">  86 </span></span>
<span class="line"><span class="LineNumber">  87 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYDOWN_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span
class="ID">up</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  88 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYUP_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_UP</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span
class="ID">noup</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  89 </span></span>
<span class="line"><span class="LineNumber">  90 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYDOWN_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_DOWN</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span
class="ID">down</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  91 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">events</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">KEYUP_Event</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">=</span><span class="ID">K_DOWN</span><span class="Operator">,</span> <span class="ID">callback</span><span class="Operator">=</span><span class="ID">paddle</span><span class="Operator">.</span><span
class="ID">nodown</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  92 </span></span>
<span class="line"><span class="LineNumber">  93 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span> <span class="Operator">=</span> <span class="ID">Score</span><span class="Operator">(</span><span class="ID">text</span><span class="Operator">=</span><span class="String">'Score:'</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  94 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  95 </span></span>
<span class="line"><span class="LineNumber">  96 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">hscore</span> <span class="Operator">=</span> <span class="ID">Score</span><span class="Operator">(</span><span class="ID">text</span><span class="Operator">=</span><span class="String">'Max:'</span><span class="Operator">,</span> <span class="ID">position</span><span class="Operator">=</span><span class="Operator">(</span><span class="Number">100</span><span class="Operator">,</span> <span
class="Number">70</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  97 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">sprites</span><span class="Operator">.</span><span class="ID">add</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">hscore</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  98 </span></span>
<span class="line"><span class="LineNumber">  99 </span>    <span class="ResWord">def</span> <span class="ID">checkCollisions</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 100 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">collide</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">paddle</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 101 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">hit</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 102 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">paddle</span><span class="Operator">.</span><span class="ID">hit</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 103 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">.</span><span class="ID">addPoints</span><span class="Operator">(</span><span class="Number">1</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 104 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">.</span><span class="ID">updateScore</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 105 </span></span>
<span class="line"><span class="LineNumber"> 106 </span>        <span class="ResWord">if</span> <span class="ResWord">not</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">onscreen</span><span class="Operator">(</span><span class="ID">left</span><span class="Operator">=</span><span class="Number">10</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 107 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">center</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 108 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">ball</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">set_velocity</span><span class="Operator">(</span><span class="ID">vx</span><span class="Operator">=</span><span class="Number">150</span><span class="Operator">,</span> <span class="ID">vy</span><span class="Operator">=</span><span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 109 </span></span>
<span class="line"><span class="LineNumber"> 110 </span>            <span class="ID">high</span> <span class="Operator">=</span> <span class="ID">max</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">.</span><span class="ID">points</span><span class="Operator">,</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">hscore</span><span class="Operator">.</span><span class="ID">points</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 111 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">hscore</span><span class="Operator">.</span><span class="ID">set_points</span><span class="Operator">(</span><span class="ID">high</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 112 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">hscore</span><span class="Operator">.</span><span class="ID">updateScore</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 113 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">.</span><span class="ID">set_points</span><span class="Operator">(</span><span class="Number">0</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 114 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">score</span><span class="Operator">.</span><span class="ID">updateScore</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 115 </span></span>
<span class="line"><span class="LineNumber"> 116 </span></span>
<span class="line"><span class="LineNumber"> 117 </span><span class="ResWord">if</span> <span class="ID">__name__</span> <span class="Operator">==</span> <span class="String">'__main__'</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 118 </span>    <span class="ID">game</span> <span class="Operator">=</span> <span class="ID">Pong</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 119 </span>    <span class="ID">game</span><span class="Operator">.</span><span class="ID">mainloop</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-251" class="anchor"/><span id="line-252" class="anchor"/><p class="line874">There is actually at least one more bug that I know of in this version. See if you can find it. The pong.py in the pygsear examples/ directory has the bug fixed. <span id="line-253" class="anchor"/><span id="line-254" class="anchor"/></p><p class="line867"><strong>实际上这儿还剩下一个错误在我所知道的这个版本中。看看你能否找到它。在pygsear的目录 examples/ 中的 pong.py 已经修复这个错误了。</strong> <span id="line-255" class="anchor"/><span id="bottom"
class="anchor"/></p></div>


