---
created: 
creator: Benky
description: ''
title: 插件
---
<div lang="en" id="content" dir="ltr"><span id="top" class="anchor"/>
<span id="line-4" class="anchor"/><p class="line867"><strong> <span id="line-5" class="anchor"/><a href="/moin/PyQt4" class="nonexistent">PyQt4</a> Widgets <span id="line-6" class="anchor"/></strong> <span id="line-7" class="anchor"/><span id="line-8" class="anchor"/></p><p class="line862">::-- <a href="/moin/zhuyj">zhuyj</a> [2008-06-27 14:31:01] <span id="line-9" class="anchor"/></p><div class="table-of-contents"><p class="table-of-contents-heading">目录</p><ol><li><a href="#head-094eb1c76406de306de73803946f60a550d13568">PyQt4 Widgets</a><ol><li><a href="#head-e1ab766ca092304abe5428b01f4ccc4b44c07981">QCheckBox</a></li><li><a href="#head-b3d9d280bb6b00776012a9e3080fd18c98e78475">ToggleButton</a></li><li><a href="#head-ee5deab5eae6e49b9cf0d947eeb0095bd523c2bf">QSlider,
QLabel</a></li><li><a href="#head-8e44eee48b12e83a9a3d0ffda35778ae9d2c07c5">QProgressBar</a></li><li><a href="#head-313f0427cd451e687f5683916600f5ce5cb68a54">QCalendarWidget</a></li></ol></li></ol></div> <span id="line-10" class="anchor"/><span id="line-11" class="anchor"/><p class="line867">
</p><h1 id="head-094eb1c76406de306de73803946f60a550d13568">1. PyQt4 Widgets</h1>
<span id="line-12" class="anchor"/><p class="line867"><strong><a href="/moin/PyQt4" class="nonexistent">PyQt4</a>组件</strong> <span id="line-13" class="anchor"/><span id="line-14" class="anchor"/></p><p class="line867"><em> Widgets are basic building blocks of an application. The <a href="/moin/PyQt4" class="nonexistent">PyQt4</a> programming toolkit has a wide range of various widgets. Buttons, check boxes, sliders, list boxes etc. Everything a programmer needs for his job. In this section of the tutorial, we will describe several useful widgets.</em> <span id="line-15" class="anchor"/></p><ul><li style="list-style-type: none;"><p class="line862">组件是一个应用程序最基本的构成，<a href="/moin/PyQt4"
class="nonexistent">PyQt4</a>编程工具包包含有大量的各种组件，按钮，检查框，滑块，列表框等等每个程序员都需要的东西。教程的这一节我们将介绍一些有用的组件。  <span id="line-16" class="anchor"/><span id="line-17" class="anchor"/></p></li></ul><p class="line867">
</p><h2 id="head-e1ab766ca092304abe5428b01f4ccc4b44c07981">1.1. QCheckBox</h2>
<span id="line-18" class="anchor"/><p class="line867"><em>QCheckBox is a widget that has two states. On and Off. It is a box with a label. Whenever a checkbox is checked or cleared it emits the signal stateChanged().</em> <span id="line-19" class="anchor"/></p><ul><li style="list-style-type: none;">QCheckBox是一个具有两种状态的组件，开或关。它是一个带有标签的方框，一旦一个checkbox被选中或清除都将产生stateChanged()信号。  <span id="line-20" class="anchor"/></li></ul><p class="line867"><span id="line-21" class="anchor"/><span id="line-22" class="anchor"/><span id="line-23" class="anchor"/><span id="line-24" class="anchor"/><span id="line-25" class="anchor"/><span id="line-26" class="anchor"/><span id="line-27" class="anchor"/><span id="line-28" class="anchor"/><span id="line-29"
class="anchor"/><span id="line-30" class="anchor"/><span id="line-31" class="anchor"/><span id="line-32" class="anchor"/><span id="line-33" class="anchor"/><span id="line-34" class="anchor"/><span id="line-35" class="anchor"/><span id="line-36" class="anchor"/><span id="line-37" class="anchor"/><span id="line-38" class="anchor"/><span id="line-39" class="anchor"/><span id="line-40" class="anchor"/><span id="line-41" class="anchor"/><span id="line-42" class="anchor"/><span id="line-43" class="anchor"/><span id="line-44" class="anchor"/><span id="line-45" class="anchor"/><span id="line-46" class="anchor"/><span id="line-47" class="anchor"/><span id="line-48" class="anchor"/><span id="line-49" class="anchor"/><span id="line-50" class="anchor"/><span id="line-51"
class="anchor"/><span id="line-52" class="anchor"/><span id="line-53" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
function isnumbered(obj) {
return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
var nlen = Math.max(0,chrs-(''+num).length), res = '';
while (nlen>0) { res += ' '; nlen-- }
return res+num+add;
}
function addnumber(did, nstart, nstep) {
var c = document.getElementById(did), l = c.firstChild, n = 1;
if (!isnumbered(c))
if (typeof nstart == 'undefined') nstart = 1;
if (typeof nstep  == 'undefined') nstep = 1;
n = nstart;
while (l != null) {
if (l.tagName == 'SPAN') {
var s = document.createElement('SPAN');
s.className = 'LineNumber'
s.appendChild(document.createTextNode(nformat(n,4,' ')));
n += nstep;
if (l.childNodes.length)
l.insertBefore(s, l.firstChild)
else
l.appendChild(s)
}
l = l.nextSibling;
}
return false;
}
function remnumber(did) {
var c = document.getElementById(did), l = c.firstChild;
if (isnumbered(c))
while (l != null) {
if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
l = l.nextSibling;
}
return false;
}
function togglenumber(did, nstart, nstep) {
var c = document.getElementById(did);
if (isnumbered(c)) {
remnumber(did);
} else {
addnumber(did,nstart,nstep);
}
return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-5b8a1789ef257a42842cc637445b63f8dd5255ca_000\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-5b8a1789ef257a42842cc637445b63f8dd5255ca_000', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-5b8a1789ef257a42842cc637445b63f8dd5255ca_000" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="Comment">#!/usr/bin/python</span></span>
<span class="line"><span class="LineNumber">   2 </span><span class="Comment"/></span>
<span class="line"><span class="LineNumber">   3 </span><span class="Comment"># checkbox.py</span></span>
<span class="line"><span class="LineNumber">   4 </span><span class="Comment"/></span>
<span class="line"><span class="LineNumber">   5 </span><span class="ResWord">import</span> <span class="ID">sys</span></span>
<span class="line"><span class="LineNumber">   6 </span><span class="ResWord">from</span> <span class="ID">PyQt4</span> <span class="ResWord">import</span> <span class="ID">QtGui</span></span>
<span class="line"><span class="LineNumber">   7 </span><span class="ResWord">from</span> <span class="ID">PyQt4</span> <span class="ResWord">import</span> <span class="ID">QtCore</span></span>
<span class="line"><span class="LineNumber">   8 </span></span>
<span class="line"><span class="LineNumber">   9 </span></span>
<span class="line"><span class="LineNumber">  10 </span><span class="ResWord">class</span> <span class="ID">CheckBox</span><span class="Operator">(</span><span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QWidget</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  11 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">=</span><span class="ID">None</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  12 </span>        <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QWidget</span><span class="Operator">.</span><span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  13 </span></span>
<span class="line"><span class="LineNumber">  14 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">setGeometry</span><span class="Operator">(</span><span class="Number">300</span><span class="Operator">,</span> <span class="Number">300</span><span class="Operator">,</span> <span class="Number">250</span><span class="Operator">,</span> <span class="Number">150</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  15 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">setWindowTitle</span><span class="Operator">(</span><span class="String">'Checkbox'</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  16 </span></span>
<span class="line"><span class="LineNumber">  17 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">cb</span> <span class="Operator">=</span> <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QCheckBox</span><span class="Operator">(</span><span class="String">'Show title'</span><span class="Operator">,</span> <span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  18 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">cb</span><span class="Operator">.</span><span class="ID">setFocusPolicy</span><span class="Operator">(</span><span class="ID">QtCore</span><span class="Operator">.</span><span class="ID">Qt</span><span class="Operator">.</span><span class="ID">NoFocus</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  19 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">cb</span><span class="Operator">.</span><span class="ID">move</span><span class="Operator">(</span><span class="Number">10</span><span class="Operator">,</span> <span class="Number">10</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  20 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">cb</span><span class="Operator">.</span><span class="ID">toggle</span><span class="Operator">(</span><span class="Operator">)</span><span class="Operator">;</span></span>
<span class="line"><span class="LineNumber">  21 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">connect</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">cb</span><span class="Operator">,</span> <span class="ID">QtCore</span><span class="Operator">.</span><span class="ID">SIGNAL</span><span class="Operator">(</span><span class="String">'stateChanged(int)'</span><span class="Operator">)</span><span class="Operator">,</span> <span class="ID">self</span><span class="Operator">.</span><span
class="ID">changeTitle</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  22 </span></span>
<span class="line"><span class="LineNumber">  23 </span>    <span class="ResWord">def</span> <span class="ID">changeTitle</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">value</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  24 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">cb</span><span class="Operator">.</span><span class="ID">isChecked</span><span class="Operator">(</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  25 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">setWindowTitle</span><span class="Operator">(</span><span class="String">'Checkbox'</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  26 </span>        <span class="ResWord">else</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  27 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">setWindowTitle</span><span class="Operator">(</span><span class="String">''</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  28 </span></span>
<span class="line"><span class="LineNumber">  29 </span><span class="ID">app</span> <span class="Operator">=</span> <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QApplication</span><span class="Operator">(</span><span class="ID">sys</span><span class="Operator">.</span><span class="ID">argv</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  30 </span><span class="ID">icon</span> <span class="Operator">=</span> <span class="ID">CheckBox</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  31 </span><span class="ID">icon</span><span class="Operator">.</span><span class="ID">show</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  32 </span><span class="ID">app</span><span class="Operator">.</span><span class="ID">exec_</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-54" class="anchor"/><p class="line867"><em> In our example, we will create a checkbox that will toggle the window title. </em> <span id="line-55" class="anchor"/></p><ul><li style="list-style-type: none;">在这个例子里，我们将创建一个用于控制窗口标题显示的单选框。  <span id="line-56" class="anchor"/></li></ul><p class="line867"><span id="line-57" class="anchor"/></p><pre> self.cb = QtGui.QCheckBox('Show title', self)
<span id="line-58" class="anchor"/></pre><span id="line-59" class="anchor"/><p class="line867"><em> This is the QCheckBox constructor.</em> <span id="line-60" class="anchor"/></p><ul><li style="list-style-type: none;">这是一个QCheckBox构造器。  <span id="line-61" class="anchor"/></li></ul><p class="line867"><span id="line-62" class="anchor"/></p><pre> self.cb.setFocusPolicy(QtCore.Qt.NoFocus)
<span id="line-63" class="anchor"/></pre><span id="line-64" class="anchor"/><p class="line867"><em> We connect the user defined changeTitle() method to the stateChanged() signal. The changeTitle() method will toggle the window title.</em> <span id="line-65" class="anchor"/></p><ul><li style="list-style-type: none;">我们将我们定义的changeTitle()方法连接到stateChanged()信号。changeTitle()方法用来控制窗口标题。  <span id="line-66" class="anchor"/></li></ul><p class="line867"><span id="line-67" class="anchor"/></p><pre> self.connect(self.cb, QtCore.SIGNAL('stateChanged(int)'), self.changeTitle)
<span id="line-68" class="anchor"/></pre><span id="line-69" class="anchor"/><p class="line867"><em> By default, the QCheckBox accepts focus. It is represented by a thin rectangle over the checkbox label. The rectangle looks awful, so I disable it by setting the widget focus policy to Qt.<a href="/moin/NoFocus" class="nonexistent">NoFocus</a>.</em> <span id="line-70" class="anchor"/></p><ul><li style="list-style-type: none;"><p class="line862">缺省的，QCheckBox会收到焦点，焦点的样子是checkbox标签外的一个细的矩形。这个矩形看起来太严肃了，所以我通过设置组件的焦点规则为Qt.<a href="/moin/NoFocus"
class="nonexistent">NoFocus</a>让他不显示了。  <span id="line-71" class="anchor"/></p></li></ul><p class="line867"><span id="line-72" class="anchor"/></p><pre> self.cb.toggle();
<span id="line-73" class="anchor"/></pre><span id="line-74" class="anchor"/><p class="line867"><em> We set the window title, so we must also check the checkbox. By default, the window title is not set and the check box is unchecked.</em> <span id="line-75" class="anchor"/></p><ul><li style="list-style-type: none;">我们设置了窗口的标题，所以我们也必须选择单选框。缺省的窗口标题是没有被设置的并且单选框也没有被选中。toggle（切换）  <span id="line-76" class="anchor"/><span id="line-77" class="anchor"/></li></ul><p class="line867"><strong> QCheckBox </strong> <span id="line-78" class="anchor"/><span
id="line-79" class="anchor"/></p><p class="line874">Figure: QCheckBox <span id="line-80" class="anchor"/>
</p><h2 id="head-b3d9d280bb6b00776012a9e3080fd18c98e78475">1.2. ToggleButton</h2>
<span id="line-81" class="anchor"/><p class="line867"><em> <a href="/moin/PyQt4" class="nonexistent">PyQt4</a> has no widget for a <a href="/moin/ToggleButton" class="nonexistent">ToggleButton</a>. To create a <a href="/moin/ToggleButton" class="nonexistent">ToggleButton</a>, we use a QPushButton in a special mode. <a href="/moin/ToggleButton" class="nonexistent">ToggleButton</a> is a button that has two states. Pressed and not pressed. You toggle between these two states by clicking on it. There are situations where this functionality fits well.</em> <span id="line-82" class="anchor"/></p><ul><li
style="list-style-type: none;"><p class="line891"><a href="/moin/PyQt4" class="nonexistent">PyQt4</a>没有切换按钮。为了创建一个切换按钮，我们使用QPushButton的特殊模式。切换按钮是一个具有两种状态的按钮，按下和没有按下。通过点击来切换两种不同的状态。有些情况这个功能很适合。  <span id="line-83" class="anchor"/></p></li></ul><p class="line867"><span id="line-84" class="anchor"/><span id="line-85" class="anchor"/><span id="line-86" class="anchor"/><span id="line-87" class="anchor"/><span id="line-88" class="anchor"/><span id="line-89" class="anchor"/><span id="line-90" class="anchor"/><span id="line-91"
class="anchor"/><span id="line-92" class="anchor"/><span id="line-93" class="anchor"/><span id="line-94" class="anchor"/><span id="line-95" class="anchor"/><span id="line-96" class="anchor"/><span id="line-97" class="anchor"/><span id="line-98" class="anchor"/><span id="line-99" class="anchor"/><span id="line-100" class="anchor"/><span id="line-101" class="anchor"/><span id="line-102" class="anchor"/><span id="line-103" class="anchor"/><span id="line-104" class="anchor"/><span id="line-105" class="anchor"/><span id="line-106" class="anchor"/><span id="line-107" class="anchor"/><span id="line-108"
class="anchor"/><span id="line-109" class="anchor"/><span id="line-110" class="anchor"/><span id="line-111" class="anchor"/><span id="line-112" class="anchor"/><span id="line-113" class="anchor"/><span id="line-114" class="anchor"/><span id="line-115" class="anchor"/><span id="line-116" class="anchor"/><span id="line-117" class="anchor"/><span id="line-118" class="anchor"/><span id="line-119" class="anchor"/><span id="line-120" class="anchor"/><span id="line-121" class="anchor"/><span id="line-122" class="anchor"/><span id="line-123" class="anchor"/><span id="line-124" class="anchor"/><span
id="line-125" class="anchor"/><span id="line-126" class="anchor"/><span id="line-127" class="anchor"/><span id="line-128" class="anchor"/><span id="line-129" class="anchor"/><span id="line-130" class="anchor"/><span id="line-131" class="anchor"/><span id="line-132" class="anchor"/><span id="line-133" class="anchor"/><span id="line-134" class="anchor"/><span id="line-135" class="anchor"/><span id="line-136" class="anchor"/><span id="line-137" class="anchor"/><span id="line-138" class="anchor"/><span id="line-139" class="anchor"/><span id="line-140" class="anchor"/><span id="line-141"
class="anchor"/><span id="line-142" class="anchor"/><span id="line-143" class="anchor"/><span id="line-144" class="anchor"/><span id="line-145" class="anchor"/><span id="line-146" class="anchor"/><span id="line-147" class="anchor"/><span id="line-148" class="anchor"/><span id="line-149" class="anchor"/><span id="line-150" class="anchor"/><span id="line-151" class="anchor"/><span id="line-152" class="anchor"/><span id="line-153" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-8993b344aaddd488833e2caabf0695df8d1b315e_001\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-8993b344aaddd488833e2caabf0695df8d1b315e_001', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-8993b344aaddd488833e2caabf0695df8d1b315e_001" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="Comment">#!/usr/bin/python</span></span>
<span class="line"><span class="LineNumber">   2 </span><span class="Comment"/></span>
<span class="line"><span class="LineNumber">   3 </span><span class="Comment"># togglebutton.py</span></span>
<span class="line"><span class="LineNumber">   4 </span><span class="Comment"/></span>
<span class="line"><span class="LineNumber">   5 </span><span class="ResWord">import</span> <span class="ID">sys</span></span>
<span class="line"><span class="LineNumber">   6 </span><span class="ResWord">from</span> <span class="ID">PyQt4</span> <span class="ResWord">import</span> <span class="ID">QtGui</span></span>
<span class="line"><span class="LineNumber">   7 </span><span class="ResWord">from</span> <span class="ID">PyQt4</span> <span class="ResWord">import</span> <span class="ID">QtCore</span></span>
<span class="line"><span class="LineNumber">   8 </span></span>
<span class="line"><span class="LineNumber">   9 </span></span>
<span class="line"><span class="LineNumber">  10 </span><span class="ResWord">class</span> <span class="ID">ToggleButton</span><span class="Operator">(</span><span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QWidget</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  11 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">=</span><span class="ID">None</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  12 </span>        <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QWidget</span><span class="Operator">.</span><span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  13 </span></span>
<span class="line"><span class="LineNumber">  14 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">color</span> <span class="Operator">=</span> <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QColor</span><span class="Operator">(</span><span class="Number">0</span><span class="Operator">,</span> <span class="Number">0</span><span class="Operator">,</span> <span class="Number">0</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  15 </span></span>
<span class="line"><span class="LineNumber">  16 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">setGeometry</span><span class="Operator">(</span><span class="Number">300</span><span class="Operator">,</span> <span class="Number">300</span><span class="Operator">,</span> <span class="Number">280</span><span class="Operator">,</span> <span class="Number">170</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  17 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">setWindowTitle</span><span class="Operator">(</span><span class="String">'ToggleButton'</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  18 </span></span>
<span class="line"><span class="LineNumber">  19 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">red</span> <span class="Operator">=</span> <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QPushButton</span><span class="Operator">(</span><span class="String">'Red'</span><span class="Operator">,</span> <span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  20 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">red</span><span class="Operator">.</span><span class="ID">setCheckable</span><span class="Operator">(</span><span class="ID">True</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  21 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">red</span><span class="Operator">.</span><span class="ID">move</span><span class="Operator">(</span><span class="Number">10</span><span class="Operator">,</span> <span class="Number">10</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  22 </span></span>
<span class="line"><span class="LineNumber">  23 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">connect</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">red</span><span class="Operator">,</span> <span class="ID">QtCore</span><span class="Operator">.</span><span class="ID">SIGNAL</span><span class="Operator">(</span><span class="String">'clicked()'</span><span class="Operator">)</span><span class="Operator">,</span> <span class="ID">self</span><span class="Operator">.</span><span
class="ID">setRed</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  24 </span></span>
<span class="line"><span class="LineNumber">  25 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">green</span> <span class="Operator">=</span> <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QPushButton</span><span class="Operator">(</span><span class="String">'Green'</span><span class="Operator">,</span> <span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  26 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">green</span><span class="Operator">.</span><span class="ID">setCheckable</span><span class="Operator">(</span><span class="ID">True</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  27 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">green</span><span class="Operator">.</span><span class="ID">move</span><span class="Operator">(</span><span class="Number">10</span><span class="Operator">,</span> <span class="Number">60</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  28 </span></span>
<span class="line"><span class="LineNumber">  29 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">connect</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">green</span><span class="Operator">,</span> <span class="ID">QtCore</span><span class="Operator">.</span><span class="ID">SIGNAL</span><span class="Operator">(</span><span class="String">'clicked()'</span><span class="Operator">)</span><span class="Operator">,</span> <span class="ID">self</span><span
class="Operator">.</span><span class="ID">setGreen</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  30 </span></span>
<span class="line"><span class="LineNumber">  31 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">blue</span> <span class="Operator">=</span> <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QPushButton</span><span class="Operator">(</span><span class="String">'Blue'</span><span class="Operator">,</span> <span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  32 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">blue</span><span class="Operator">.</span><span class="ID">setCheckable</span><span class="Operator">(</span><span class="ID">True</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  33 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">blue</span><span class="Operator">.</span><span class="ID">move</span><span class="Operator">(</span><span class="Number">10</span><span class="Operator">,</span> <span class="Number">110</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  34 </span></span>
<span class="line"><span class="LineNumber">  35 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">connect</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">blue</span><span class="Operator">,</span> <span class="ID">QtCore</span><span class="Operator">.</span><span class="ID">SIGNAL</span><span class="Operator">(</span><span class="String">'clicked()'</span><span class="Operator">)</span><span class="Operator">,</span> <span class="ID">self</span><span class="Operator">.</span><span
class="ID">setBlue</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  36 </span></span>
<span class="line"><span class="LineNumber">  37 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">square</span> <span class="Operator">=</span> <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QWidget</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  38 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">square</span><span class="Operator">.</span><span class="ID">setGeometry</span><span class="Operator">(</span><span class="Number">150</span><span class="Operator">,</span> <span class="Number">20</span><span class="Operator">,</span> <span class="Number">100</span><span class="Operator">,</span> <span class="Number">100</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  39 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">square</span><span class="Operator">.</span><span class="ID">setStyleSheet</span><span class="Operator">(</span><span class="String">"QWidget { background-color: %s }"</span> <span class="Operator">%</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">color</span><span class="Operator">.</span><span class="ID">name</span><span class="Operator">(</span><span class="Operator">)</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  40 </span></span>
<span class="line"><span class="LineNumber">  41 </span>        <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QApplication</span><span class="Operator">.</span><span class="ID">setStyle</span><span class="Operator">(</span><span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QStyleFactory</span><span class="Operator">.</span><span class="ID">create</span><span class="Operator">(</span><span class="String">'cleanlooks'</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  42 </span></span>
<span class="line"><span class="LineNumber">  43 </span>    <span class="ResWord">def</span> <span class="ID">setRed</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  44 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">red</span><span class="Operator">.</span><span class="ID">isChecked</span><span class="Operator">(</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  45 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">color</span><span class="Operator">.</span><span class="ID">setRed</span><span class="Operator">(</span><span class="Number">255</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  46 </span>        <span class="ResWord">else</span><span class="Operator">:</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">color</span><span class="Operator">.</span><span class="ID">setRed</span><span class="Operator">(</span><span class="Number">0</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  47 </span></span>
<span class="line"><span class="LineNumber">  48 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">square</span><span class="Operator">.</span><span class="ID">setStyleSheet</span><span class="Operator">(</span><span class="String">"QWidget { background-color: %s }"</span> <span class="Operator">%</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">color</span><span class="Operator">.</span><span class="ID">name</span><span class="Operator">(</span><span class="Operator">)</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  49 </span></span>
<span class="line"><span class="LineNumber">  50 </span>    <span class="ResWord">def</span> <span class="ID">setGreen</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  51 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">green</span><span class="Operator">.</span><span class="ID">isChecked</span><span class="Operator">(</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  52 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">color</span><span class="Operator">.</span><span class="ID">setGreen</span><span class="Operator">(</span><span class="Number">255</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  53 </span>        <span class="ResWord">else</span><span class="Operator">:</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">color</span><span class="Operator">.</span><span class="ID">setGreen</span><span class="Operator">(</span><span class="Number">0</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  54 </span></span>
<span class="line"><span class="LineNumber">  55 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">square</span><span class="Operator">.</span><span class="ID">setStyleSheet</span><span class="Operator">(</span><span class="String">"QWidget { background-color: %s }"</span> <span class="Operator">%</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">color</span><span class="Operator">.</span><span class="ID">name</span><span class="Operator">(</span><span class="Operator">)</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  56 </span></span>
<span class="line"><span class="LineNumber">  57 </span>    <span class="ResWord">def</span> <span class="ID">setBlue</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  58 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">blue</span><span class="Operator">.</span><span class="ID">isChecked</span><span class="Operator">(</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  59 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">color</span><span class="Operator">.</span><span class="ID">setBlue</span><span class="Operator">(</span><span class="Number">255</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  60 </span>        <span class="ResWord">else</span><span class="Operator">:</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">color</span><span class="Operator">.</span><span class="ID">setBlue</span><span class="Operator">(</span><span class="Number">0</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  61 </span></span>
<span class="line"><span class="LineNumber">  62 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">square</span><span class="Operator">.</span><span class="ID">setStyleSheet</span><span class="Operator">(</span><span class="String">"QWidget { background-color: %s }"</span> <span class="Operator">%</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">color</span><span class="Operator">.</span><span class="ID">name</span><span class="Operator">(</span><span class="Operator">)</span><span
class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  63 </span></span>
<span class="line"><span class="LineNumber">  64 </span></span>
<span class="line"><span class="LineNumber">  65 </span></span>
<span class="line"><span class="LineNumber">  66 </span><span class="ID">app</span> <span class="Operator">=</span> <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QApplication</span><span class="Operator">(</span><span class="ID">sys</span><span class="Operator">.</span><span class="ID">argv</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  67 </span><span class="ID">tb</span> <span class="Operator">=</span> <span class="ID">ToggleButton</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  68 </span><span class="ID">tb</span><span class="Operator">.</span><span class="ID">show</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  69 </span><span class="ID">app</span><span class="Operator">.</span><span class="ID">exec_</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-154" class="anchor"/><p class="line867"><em> In our example, we create three <a href="/moin/ToggleButtons" class="nonexistent">ToggleButtons</a>. We also create a QWidget. We set the background color of the QWidget to black. The togglebuttons will toggle the red, green and blue parts of the color value. The background color will depend on which togglebuttons we have pressed. </em> <span id="line-155" class="anchor"/></p><ul><li style="list-style-type:
none;">这个例子中，我们创建了三个切换按钮。我们也建立了一个QWidget。我们设置QWidget的背景色为黑色。切换按钮将切换颜色值的红、绿和蓝部分。背景颜色将依赖于我们按下的那些切换按钮。  <span id="line-156" class="anchor"/></li></ul><p class="line867"><span id="line-157" class="anchor"/></p><pre> self.color = QtGui.QColor(0, 0, 0)
<span id="line-158" class="anchor"/></pre><span id="line-159" class="anchor"/><p class="line867"><em> This is the initial color value. No red, green and blue equals to black. Theoretically speaking, black is not a color after all. </em> <span id="line-160" class="anchor"/></p><ul><li style="list-style-type: none;">这里初始化颜色值，没有红，绿，蓝等于黑。毕竟理论上来说黑不是一种颜色。  <span id="line-161" class="anchor"/></li></ul><p class="line867"><span id="line-162" class="anchor"/></p><pre> self.red = QtGui.QPushButton('Red', self)
<span id="line-163" class="anchor"/> self.red.setCheckable(True)
<span id="line-164" class="anchor"/></pre><span id="line-165" class="anchor"/><p class="line867"><em> To create a <a href="/moin/ToggleButton" class="nonexistent">ToggleButton</a>, we create a QPushButton and make it checkable by calling setCheckable() method.</em> <span id="line-166" class="anchor"/></p><ul><li style="list-style-type: none;">为了创建一个切换按钮，我们创建一个QPushButton，并且通过调用setCheckable()使它可以被检查。  <span id="line-167" class="anchor"/></li></ul><p class="line867"><span id="line-168" class="anchor"/></p><pre> self.connect(self.red,
QtCore.SIGNAL('clicked()'), self.setRed)
<span id="line-169" class="anchor"/></pre><span id="line-170" class="anchor"/><p class="line867"><em> We connect a clicked() signal to our user defined method.</em> <span id="line-171" class="anchor"/></p><ul><li style="list-style-type: none;">我们将clicked()信号与我们自己定义的方法连接。  <span id="line-172" class="anchor"/></li></ul><p class="line867"><span id="line-173" class="anchor"/></p><pre> QtGui.QApplication.setStyle(QtGui.QStyleFactory.create('cleanlooks'))
<span id="line-174" class="anchor"/></pre><span id="line-175" class="anchor"/><p class="line867"><em> I have set the style of the application to cleanlooks. I did it, because the default style for linux, plastique has a design bug. You cannot easily tell whether the <a href="/moin/ToggleButton" class="nonexistent">ToggleButton</a> is pressed or not. <a href="/moin/CleanLooks" class="nonexistent">CleanLooks</a> style is better. </em> <span id="line-176" class="anchor"/></p><ul><li style="list-style-type:
none;">我已经将应用程序的样式设置为cleanlooks，这么作是因为linux的缺省样式plastique有一个bug，你无法简单的确认切换按钮是否被按下了。  <span id="line-177" class="anchor"/></li></ul><p class="line867"><span id="line-178" class="anchor"/></p><pre> if self.red.isChecked():
<span id="line-179" class="anchor"/>     self.color.setRed(255)
<span id="line-180" class="anchor"/> else: self.color.setRed(0)
<span id="line-181" class="anchor"/></pre><span id="line-182" class="anchor"/><p class="line867"><em> We check, whether the button is pressed and change the color value accordingly.</em> <span id="line-183" class="anchor"/></p><ul><li style="list-style-type: none;">我们检查按钮是否被按下并且相应的改变颜色值。  <span id="line-184" class="anchor"/></li></ul><p class="line867"><span id="line-185" class="anchor"/></p><pre> self.square.setStyleSheet("QWidget { background-color: %s }" % self.color.name())
<span id="line-186" class="anchor"/></pre><span id="line-187" class="anchor"/><p class="line867"><em> To change the background color, we use stylesheets. </em> <span id="line-188" class="anchor"/></p><ul><li style="list-style-type: none;">为了改变背景色，我们使用stylesheets样式表。  <span id="line-189" class="anchor"/><span id="line-190" class="anchor"/><p class="line891"><strong><a href="/moin/ToggleButton" class="nonexistent">ToggleButton</a> </strong> <span id="line-191" class="anchor"/></p></li></ul><p class="line862">Figure: <a href="/moin/ToggleButton"
class="nonexistent">ToggleButton</a> <span id="line-192" class="anchor"/><span id="line-193" class="anchor"/></p><p class="line867">
</p><h2 id="head-ee5deab5eae6e49b9cf0d947eeb0095bd523c2bf">1.3. QSlider, QLabel</h2>
<span id="line-194" class="anchor"/><p class="line867"><em>QSlider is a widget that has a simple handle. This handle can be pulled back and forth. This way we are choosing a value for a specific task. Sometimes using a slider is more natural, than simply providing a number or using a spin box. QLabel displays text or image.</em> <span id="line-195" class="anchor"/></p><ul><li style="list-style-type: none;">QSlider是一个具有简单的手柄的插件。这个插件可以前后拖动，通过这种方式我们可以为特定的任务选择一个数值。有时使用滑块比简单的提供一个数字或使用输入框更自然。QLabel可以显示文本或图像。
<span id="line-196" class="anchor"/></li></ul><p class="line867"><em> In our example we will show one slider and one label. This time, the label will display an image. The slider will control the label.</em> <span id="line-197" class="anchor"/></p><ul><li style="list-style-type: none;">这个例子里我们会显示一个滑块和一个标签。这次标签会显示一个图像，滑块会控制标签。  <span id="line-198" class="anchor"/></li></ul><p class="line867"><span id="line-199" class="anchor"/><span id="line-200" class="anchor"/><span id="line-201" class="anchor"/><span id="line-202" class="anchor"/><span
id="line-203" class="anchor"/><span id="line-204" class="anchor"/><span id="line-205" class="anchor"/><span id="line-206" class="anchor"/><span id="line-207" class="anchor"/><span id="line-208" class="anchor"/><span id="line-209" class="anchor"/><span id="line-210" class="anchor"/><span id="line-211" class="anchor"/><span id="line-212" class="anchor"/><span id="line-213" class="anchor"/><span id="line-214" class="anchor"/><span id="line-215" class="anchor"/><span id="line-216" class="anchor"/><span id="line-217" class="anchor"/><span id="line-218" class="anchor"/><span id="line-219"
class="anchor"/><span id="line-220" class="anchor"/><span id="line-221" class="anchor"/><span id="line-222" class="anchor"/><span id="line-223" class="anchor"/><span id="line-224" class="anchor"/><span id="line-225" class="anchor"/><span id="line-226" class="anchor"/><span id="line-227" class="anchor"/><span id="line-228" class="anchor"/><span id="line-229" class="anchor"/><span id="line-230" class="anchor"/><span id="line-231" class="anchor"/><span id="line-232" class="anchor"/><span id="line-233" class="anchor"/><span id="line-234" class="anchor"/><span id="line-235"
class="anchor"/><span id="line-236" class="anchor"/><span id="line-237" class="anchor"/><span id="line-238" class="anchor"/><span id="line-239" class="anchor"/><span id="line-240" class="anchor"/><span id="line-241" class="anchor"/><span id="line-242" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-c0ea5423c54617fd9367e70e073ed3642e4a21b8_002\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-c0ea5423c54617fd9367e70e073ed3642e4a21b8_002', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-c0ea5423c54617fd9367e70e073ed3642e4a21b8_002" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="Comment">#!/usr/bin/python</span></span>
<span class="line"><span class="LineNumber">   2 </span><span class="Comment"/></span>
<span class="line"><span class="LineNumber">   3 </span><span class="Comment"># slider-label.py</span></span>
<span class="line"><span class="LineNumber">   4 </span><span class="Comment"/></span>
<span class="line"><span class="LineNumber">   5 </span><span class="ResWord">import</span> <span class="ID">sys</span></span>
<span class="line"><span class="LineNumber">   6 </span><span class="ResWord">from</span> <span class="ID">PyQt4</span> <span class="ResWord">import</span> <span class="ID">QtGui</span></span>
<span class="line"><span class="LineNumber">   7 </span><span class="ResWord">from</span> <span class="ID">PyQt4</span> <span class="ResWord">import</span> <span class="ID">QtCore</span></span>
<span class="line"><span class="LineNumber">   8 </span></span>
<span class="line"><span class="LineNumber">   9 </span></span>
<span class="line"><span class="LineNumber">  10 </span><span class="ResWord">class</span> <span class="ID">SliderLabel</span><span class="Operator">(</span><span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QWidget</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  11 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">=</span><span class="ID">None</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  12 </span>        <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QWidget</span><span class="Operator">.</span><span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  13 </span></span>
<span class="line"><span class="LineNumber">  14 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">setGeometry</span><span class="Operator">(</span><span class="Number">300</span><span class="Operator">,</span> <span class="Number">300</span><span class="Operator">,</span> <span class="Number">250</span><span class="Operator">,</span> <span class="Number">150</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  15 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">setWindowTitle</span><span class="Operator">(</span><span class="String">'SliderLabel'</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  16 </span></span>
<span class="line"><span class="LineNumber">  17 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">slider</span> <span class="Operator">=</span> <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QSlider</span><span class="Operator">(</span><span class="ID">QtCore</span><span class="Operator">.</span><span class="ID">Qt</span><span class="Operator">.</span><span class="ID">Horizontal</span><span class="Operator">,</span> <span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  18 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">slider</span><span class="Operator">.</span><span class="ID">setFocusPolicy</span><span class="Operator">(</span><span class="ID">QtCore</span><span class="Operator">.</span><span class="ID">Qt</span><span class="Operator">.</span><span class="ID">NoFocus</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  19 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">slider</span><span class="Operator">.</span><span class="ID">setGeometry</span><span class="Operator">(</span><span class="Number">30</span><span class="Operator">,</span> <span class="Number">40</span><span class="Operator">,</span> <span class="Number">100</span><span class="Operator">,</span> <span class="Number">30</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  20 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">connect</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">slider</span><span class="Operator">,</span> <span class="ID">QtCore</span><span class="Operator">.</span><span class="ID">SIGNAL</span><span class="Operator">(</span><span class="String">'valueChanged(int)'</span><span class="Operator">)</span><span class="Operator">,</span> <span class="ID">self</span><span
class="Operator">.</span><span class="ID">changeValue</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  21 </span></span>
<span class="line"><span class="LineNumber">  22 </span></span>
<span class="line"><span class="LineNumber">  23 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">label</span> <span class="Operator">=</span> <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QLabel</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  24 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">label</span><span class="Operator">.</span><span class="ID">setPixmap</span><span class="Operator">(</span><span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QPixmap</span><span class="Operator">(</span><span class="String">'mute.png'</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  25 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">label</span><span class="Operator">.</span><span class="ID">setGeometry</span><span class="Operator">(</span><span class="Number">160</span><span class="Operator">,</span> <span class="Number">40</span><span class="Operator">,</span> <span class="Number">80</span><span class="Operator">,</span> <span class="Number">30</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  26 </span></span>
<span class="line"><span class="LineNumber">  27 </span></span>
<span class="line"><span class="LineNumber">  28 </span>    <span class="ResWord">def</span> <span class="ID">changeValue</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">value</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  29 </span>        <span class="ID">pos</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">slider</span><span class="Operator">.</span><span class="ID">value</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  30 </span></span>
<span class="line"><span class="LineNumber">  31 </span>        <span class="ResWord">if</span> <span class="ID">pos</span> <span class="Operator">==</span> <span class="Number">0</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  32 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">label</span><span class="Operator">.</span><span class="ID">setPixmap</span><span class="Operator">(</span><span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QPixmap</span><span class="Operator">(</span><span class="String">'mute.png'</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  33 </span>        <span class="ResWord">elif</span> <span class="ID">pos</span> <span class="Operator">></span> <span class="Number">0</span> <span class="ResWord">and</span> <span class="ID">pos</span> <span class="Operator"><=</span> <span class="Number">30</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  34 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">label</span><span class="Operator">.</span><span class="ID">setPixmap</span><span class="Operator">(</span><span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QPixmap</span><span class="Operator">(</span><span class="String">'min.png'</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  35 </span>        <span class="ResWord">elif</span> <span class="ID">pos</span> <span class="Operator">></span> <span class="Number">30</span> <span class="ResWord">and</span> <span class="ID">pos</span> <span class="Operator"><</span> <span class="Number">80</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  36 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">label</span><span class="Operator">.</span><span class="ID">setPixmap</span><span class="Operator">(</span><span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QPixmap</span><span class="Operator">(</span><span class="String">'med.png'</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  37 </span>        <span class="ResWord">else</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  38 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">label</span><span class="Operator">.</span><span class="ID">setPixmap</span><span class="Operator">(</span><span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QPixmap</span><span class="Operator">(</span><span class="String">'max.png'</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  39 </span></span>
<span class="line"><span class="LineNumber">  40 </span><span class="ID">app</span> <span class="Operator">=</span> <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QApplication</span><span class="Operator">(</span><span class="ID">sys</span><span class="Operator">.</span><span class="ID">argv</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  41 </span><span class="ID">icon</span> <span class="Operator">=</span> <span class="ID">SliderLabel</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  42 </span><span class="ID">icon</span><span class="Operator">.</span><span class="ID">show</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  43 </span><span class="ID">app</span><span class="Operator">.</span><span class="ID">exec_</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-243" class="anchor"/><span id="line-244" class="anchor"/><p class="line867"><em> In our example we simulate a volume control. By dragging the handle of a slider, we change a image on the label.</em> <span id="line-245" class="anchor"/></p><ul><li style="list-style-type: none;">这个例子中我们模拟了一个音量控制器，通过拖动滑块我们改变标签中显示的图像。  <span id="line-246" class="anchor"/></li></ul><p class="line867"><span id="line-247" class="anchor"/></p><pre> self.slider = QtGui.QSlider(QtCore.Qt.Horizontal, self)
<span id="line-248" class="anchor"/></pre><span id="line-249" class="anchor"/><p class="line867"><em> Here we create a horizontal QSlider.</em> <span id="line-250" class="anchor"/></p><ul><li style="list-style-type: none;">这里我们创建一个水平的QSlider。  <span id="line-251" class="anchor"/></li></ul><p class="line867"><span id="line-252" class="anchor"/></p><pre> self.label = QtGui.QLabel(self)
<span id="line-253" class="anchor"/> self.label.setPixmap(QtGui.QPixmap('mute.png'))
<span id="line-254" class="anchor"/></pre><span id="line-255" class="anchor"/><p class="line867"><em> We create a Qlabel. And set an initial mute image to it. </em> <span id="line-256" class="anchor"/></p><ul><li style="list-style-type: none;">我们创建一个Qlabel，并且设置为缺省的静音图像。  <span id="line-257" class="anchor"/></li></ul><p class="line867"><span id="line-258" class="anchor"/></p><pre> self.connect(self.slider, QtCore.SIGNAL('valueChanged(int)'), self.changeValue)
<span id="line-259" class="anchor"/></pre><span id="line-260" class="anchor"/><p class="line867"><em> We connect the valueChanged signal to the user defined changeValue() method.</em> <span id="line-261" class="anchor"/></p><ul><li style="list-style-type: none;">我们将valueChanged信号与用户定义的changeValue()方法连接。  <span id="line-262" class="anchor"/></li></ul><p class="line867"/><pre>pos = self.slider.value()
<span id="line-263" class="anchor"/></pre><span id="line-264" class="anchor"/><p class="line867"><em> We get the position of the slider by calling the value() method. We change the image on the label accordingly.</em> <span id="line-265" class="anchor"/></p><ul><li style="list-style-type: none;">我们通过调用value()方法获取滑块位置，然后相应的改变标签的图像。  <span id="line-266" class="anchor"/><span id="line-267" class="anchor"/><p class="line891"><strong><a href="/moin/SliderLabel" class="nonexistent">SliderLabel</a> </strong> <span id="line-268" class="anchor"/><span
id="line-269" class="anchor"/></p></li></ul><p class="line874">Figure: Slider and Label <span id="line-270" class="anchor"/><span id="line-271" class="anchor"/></p><p class="line867">
</p><h2 id="head-8e44eee48b12e83a9a3d0ffda35778ae9d2c07c5">1.4. QProgressBar</h2>
<span id="line-272" class="anchor"/><p class="line867"><em> A progress bar is a widget that is used, when we process lengthy tasks. It is animated so that the user knows, that our task is progressing. The QProgressBar widget provides a horizontal or vertical progress bar in <a href="/moin/PyQt4" class="nonexistent">PyQt4</a> toolkit. The task is divided into steps. The programmer can set the minimum and maximum values for the progress bar. The default values are 0, 99. </em> <span id="line-273" class="anchor"/></p><ul><li style="list-style-type: none;"><p
class="line862">进度条是我们处理冗长的任务时使用的组件。它可以生动的展示给用户任务的执行情况。<a href="/moin/PyQt4" class="nonexistent">PyQt4</a>工具集中，QProgressBar组件提供水平或垂直的进度条。任务是分步骤的，程序员可以设置进度条的最小和最大值，缺省的取值范围是0-99。  <span id="line-274" class="anchor"/></p></li></ul><p class="line867"><span id="line-275" class="anchor"/><span id="line-276" class="anchor"/><span id="line-277" class="anchor"/><span id="line-278" class="anchor"/><span id="line-279" class="anchor"/><span id="line-280" class="anchor"/><span id="line-281"
class="anchor"/><span id="line-282" class="anchor"/><span id="line-283" class="anchor"/><span id="line-284" class="anchor"/><span id="line-285" class="anchor"/><span id="line-286" class="anchor"/><span id="line-287" class="anchor"/><span id="line-288" class="anchor"/><span id="line-289" class="anchor"/><span id="line-290" class="anchor"/><span id="line-291" class="anchor"/><span id="line-292" class="anchor"/><span id="line-293" class="anchor"/><span id="line-294" class="anchor"/><span id="line-295" class="anchor"/><span id="line-296" class="anchor"/><span id="line-297"
class="anchor"/><span id="line-298" class="anchor"/><span id="line-299" class="anchor"/><span id="line-300" class="anchor"/><span id="line-301" class="anchor"/><span id="line-302" class="anchor"/><span id="line-303" class="anchor"/><span id="line-304" class="anchor"/><span id="line-305" class="anchor"/><span id="line-306" class="anchor"/><span id="line-307" class="anchor"/><span id="line-308" class="anchor"/><span id="line-309" class="anchor"/><span id="line-310" class="anchor"/><span id="line-311" class="anchor"/><span id="line-312" class="anchor"/><span id="line-313"
class="anchor"/><span id="line-314" class="anchor"/><span id="line-315" class="anchor"/><span id="line-316" class="anchor"/><span id="line-317" class="anchor"/><span id="line-318" class="anchor"/><span id="line-319" class="anchor"/><span id="line-320" class="anchor"/><span id="line-321" class="anchor"/><span id="line-322" class="anchor"/><span id="line-323" class="anchor"/><span id="line-324" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-c7aafb3268245007d0cf877b05e492985527b3fb_003\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-c7aafb3268245007d0cf877b05e492985527b3fb_003', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-c7aafb3268245007d0cf877b05e492985527b3fb_003" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="Comment">#!/usr/bin/python</span></span>
<span class="line"><span class="LineNumber">   2 </span><span class="Comment"/></span>
<span class="line"><span class="LineNumber">   3 </span><span class="Comment"># progressbar.py</span></span>
<span class="line"><span class="LineNumber">   4 </span><span class="Comment"/></span>
<span class="line"><span class="LineNumber">   5 </span><span class="ResWord">import</span> <span class="ID">sys</span></span>
<span class="line"><span class="LineNumber">   6 </span><span class="ResWord">from</span> <span class="ID">PyQt4</span> <span class="ResWord">import</span> <span class="ID">QtGui</span></span>
<span class="line"><span class="LineNumber">   7 </span><span class="ResWord">from</span> <span class="ID">PyQt4</span> <span class="ResWord">import</span> <span class="ID">QtCore</span></span>
<span class="line"><span class="LineNumber">   8 </span></span>
<span class="line"><span class="LineNumber">   9 </span></span>
<span class="line"><span class="LineNumber">  10 </span><span class="ResWord">class</span> <span class="ID">ProgressBar</span><span class="Operator">(</span><span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QWidget</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  11 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">=</span><span class="ID">None</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  12 </span>        <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QWidget</span><span class="Operator">.</span><span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  13 </span></span>
<span class="line"><span class="LineNumber">  14 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">setGeometry</span><span class="Operator">(</span><span class="Number">300</span><span class="Operator">,</span> <span class="Number">300</span><span class="Operator">,</span> <span class="Number">250</span><span class="Operator">,</span> <span class="Number">150</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  15 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">setWindowTitle</span><span class="Operator">(</span><span class="String">'ProgressBar'</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  16 </span></span>
<span class="line"><span class="LineNumber">  17 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">pbar</span> <span class="Operator">=</span> <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QProgressBar</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  18 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">pbar</span><span class="Operator">.</span><span class="ID">setGeometry</span><span class="Operator">(</span><span class="Number">30</span><span class="Operator">,</span> <span class="Number">40</span><span class="Operator">,</span> <span class="Number">200</span><span class="Operator">,</span> <span class="Number">25</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  19 </span></span>
<span class="line"><span class="LineNumber">  20 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">button</span> <span class="Operator">=</span> <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QPushButton</span><span class="Operator">(</span><span class="String">'Start'</span><span class="Operator">,</span> <span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  21 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">button</span><span class="Operator">.</span><span class="ID">setFocusPolicy</span><span class="Operator">(</span><span class="ID">QtCore</span><span class="Operator">.</span><span class="ID">Qt</span><span class="Operator">.</span><span class="ID">NoFocus</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  22 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">button</span><span class="Operator">.</span><span class="ID">move</span><span class="Operator">(</span><span class="Number">40</span><span class="Operator">,</span> <span class="Number">80</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  23 </span></span>
<span class="line"><span class="LineNumber">  24 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">connect</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">button</span><span class="Operator">,</span> <span class="ID">QtCore</span><span class="Operator">.</span><span class="ID">SIGNAL</span><span class="Operator">(</span><span class="String">'clicked()'</span><span class="Operator">)</span><span class="Operator">,</span> <span
class="ID">self</span><span class="Operator">.</span><span class="ID">onStart</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  25 </span></span>
<span class="line"><span class="LineNumber">  26 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">timer</span> <span class="Operator">=</span> <span class="ID">QtCore</span><span class="Operator">.</span><span class="ID">QBasicTimer</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  27 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">step</span> <span class="Operator">=</span> <span class="Number">0</span><span class="Operator">;</span></span>
<span class="line"><span class="LineNumber">  28 </span></span>
<span class="line"><span class="LineNumber">  29 </span></span>
<span class="line"><span class="LineNumber">  30 </span>    <span class="ResWord">def</span> <span class="ID">timerEvent</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">event</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  31 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">step</span> <span class="Operator">>=</span> <span class="Number">100</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  32 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">timer</span><span class="Operator">.</span><span class="ID">stop</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  33 </span>            <span class="ResWord">return</span></span>
<span class="line"><span class="LineNumber">  34 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">step</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">step</span> <span class="Operator">+</span> <span class="Number">1</span></span>
<span class="line"><span class="LineNumber">  35 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">pbar</span><span class="Operator">.</span><span class="ID">setValue</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">step</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  36 </span></span>
<span class="line"><span class="LineNumber">  37 </span>    <span class="ResWord">def</span> <span class="ID">onStart</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  38 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">timer</span><span class="Operator">.</span><span class="ID">isActive</span><span class="Operator">(</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  39 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">timer</span><span class="Operator">.</span><span class="ID">stop</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  40 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">button</span><span class="Operator">.</span><span class="ID">setText</span><span class="Operator">(</span><span class="String">'Start'</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  41 </span>        <span class="ResWord">else</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  42 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">timer</span><span class="Operator">.</span><span class="ID">start</span><span class="Operator">(</span><span class="Number">100</span><span class="Operator">,</span> <span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  43 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">button</span><span class="Operator">.</span><span class="ID">setText</span><span class="Operator">(</span><span class="String">'Stop'</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  44 </span></span>
<span class="line"><span class="LineNumber">  45 </span></span>
<span class="line"><span class="LineNumber">  46 </span><span class="ID">app</span> <span class="Operator">=</span> <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QApplication</span><span class="Operator">(</span><span class="ID">sys</span><span class="Operator">.</span><span class="ID">argv</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  47 </span><span class="ID">icon</span> <span class="Operator">=</span> <span class="ID">ProgressBar</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  48 </span><span class="ID">icon</span><span class="Operator">.</span><span class="ID">show</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  49 </span><span class="ID">app</span><span class="Operator">.</span><span class="ID">exec_</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-325" class="anchor"/><span id="line-326" class="anchor"/><span id="line-327" class="anchor"/><span id="line-328" class="anchor"/><p class="line867"><em> In our example we have a horizontal progress bar and a push button. The push button starts and stops the progress bar.</em> <span id="line-329" class="anchor"/></p><ul><li style="list-style-type: none;">这个例子里我们设置了一个水平的进度条和一个按钮，按钮控制进度条的开始和停止。  <span id="line-330" class="anchor"/></li></ul><p class="line867"><span id="line-331"
class="anchor"/></p><pre> self.pbar = QtGui.QProgressBar(self)
<span id="line-332" class="anchor"/></pre><span id="line-333" class="anchor"/><p class="line874">QProgressBar constructor.  <span id="line-334" class="anchor"/><span id="line-335" class="anchor"/></p><pre> self.timer = QtCore.QBasicTimer()
<span id="line-336" class="anchor"/></pre><span id="line-337" class="anchor"/><p class="line867"><em> To activate the progress bar, we use the timer object.</em> <span id="line-338" class="anchor"/></p><ul><li style="list-style-type: none;">为了激活进度条，我们使用计时器对象。  <span id="line-339" class="anchor"/></li></ul><p class="line867"><span id="line-340" class="anchor"/></p><pre> self.timer.start(100, self)
<span id="line-341" class="anchor"/></pre><span id="line-342" class="anchor"/><p class="line867"><em> To launch the timer events, we call the start() method. This method has two parameters. The timeout and the object, which will receive the events.</em> <span id="line-343" class="anchor"/></p><ul><li style="list-style-type: none;">为了开始计时器事件，我们调用start()方法，这个方法有两个参数，超时时间和接受事件的对象。  <span id="line-344" class="anchor"/></li></ul><p class="line867"><span id="line-345" class="anchor"/><span id="line-346"
class="anchor"/><span id="line-347" class="anchor"/><span id="line-348" class="anchor"/><span id="line-349" class="anchor"/><span id="line-350" class="anchor"/><span id="line-351" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-fbe7931b03024b6061a6b711ffb5cd2cb4443d9f_004\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-fbe7931b03024b6061a6b711ffb5cd2cb4443d9f_004', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-fbe7931b03024b6061a6b711ffb5cd2cb4443d9f_004" dir="ltr"><span class="line"><span class="LineNumber">   1 </span> <span class="ResWord">def</span> <span class="ID">timerEvent</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">event</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   2 </span>     <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">step</span> <span class="Operator">>=</span> <span class="Number">100</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   3 </span>         <span class="ID">self</span><span class="Operator">.</span><span class="ID">timer</span><span class="Operator">.</span><span class="ID">stop</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">   4 </span>         <span class="ResWord">return</span></span>
<span class="line"><span class="LineNumber">   5 </span>     <span class="ID">self</span><span class="Operator">.</span><span class="ID">step</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">step</span> <span class="Operator">+</span> <span class="Number">1</span></span>
<span class="line"><span class="LineNumber">   6 </span>     <span class="ID">self</span><span class="Operator">.</span><span class="ID">pbar</span><span class="Operator">.</span><span class="ID">setValue</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">step</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-352" class="anchor"/><p class="line867"><em> Each QObject and its descendants has a QObject.timerEvent event handler. In order to react to timer events, we reimplement the event handler.</em> <span id="line-353" class="anchor"/></p><ul><li style="list-style-type: none;">每个QObject对象和它的子对象都有QObject.timerEvent事件处理函数。为了对计时器时间作出反应，我们重载事件处理函数。  <span id="line-354" class="anchor"/><span id="line-355" class="anchor"/></li></ul><p class="line867"><strong> <a
href="/moin/ProgressBar" class="nonexistent">ProgressBar</a> </strong> <span id="line-356" class="anchor"/>Figure: <a href="/moin/ProgressBar" class="nonexistent">ProgressBar</a> <span id="line-357" class="anchor"/><span id="line-358" class="anchor"/></p><p class="line867">
</p><h2 id="head-313f0427cd451e687f5683916600f5ce5cb68a54">1.5. QCalendarWidget</h2>
<span id="line-359" class="anchor"/><p class="line867"><em> The QCalendarWidget provides a monthly based calendar widget. It allows a user to select a date in a simple and intuitive way.</em> <span id="line-360" class="anchor"/></p><ul><li style="list-style-type: none;">QCalendarWidget组件提供一个每月的日历组件。它允许用户简单直观的来选择日期。  <span id="line-361" class="anchor"/></li></ul><p class="line867"><span id="line-362" class="anchor"/><span id="line-363" class="anchor"/><span id="line-364" class="anchor"/><span id="line-365"
class="anchor"/><span id="line-366" class="anchor"/><span id="line-367" class="anchor"/><span id="line-368" class="anchor"/><span id="line-369" class="anchor"/><span id="line-370" class="anchor"/><span id="line-371" class="anchor"/><span id="line-372" class="anchor"/><span id="line-373" class="anchor"/><span id="line-374" class="anchor"/><span id="line-375" class="anchor"/><span id="line-376" class="anchor"/><span id="line-377" class="anchor"/><span id="line-378" class="anchor"/><span id="line-379" class="anchor"/><span id="line-380"
class="anchor"/><span id="line-381" class="anchor"/><span id="line-382" class="anchor"/><span id="line-383" class="anchor"/><span id="line-384" class="anchor"/><span id="line-385" class="anchor"/><span id="line-386" class="anchor"/><span id="line-387" class="anchor"/><span id="line-388" class="anchor"/><span id="line-389" class="anchor"/><span id="line-390" class="anchor"/><span id="line-391" class="anchor"/><span id="line-392" class="anchor"/><span id="line-393" class="anchor"/><span id="line-394" class="anchor"/><span id="line-395"
class="anchor"/><span id="line-396" class="anchor"/><span id="line-397" class="anchor"/><span id="line-398" class="anchor"/><span id="line-399" class="anchor"/></p><div lang="en" dir="ltr" class="codearea">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-7c02a3b37016ee7248e1bb30cebda8e2104e3add_005\', 1, 1);" \
class="codenumbers">切换行号显示<\/a>');
</script><a class="codenumbers" onclick="return togglenumber('CA-7c02a3b37016ee7248e1bb30cebda8e2104e3add_005', 1, 1);" href="#">切换行号显示</a>
<pre lang="en" id="CA-7c02a3b37016ee7248e1bb30cebda8e2104e3add_005" dir="ltr"><span class="line"><span class="LineNumber">   1 </span><span class="Comment">#!/usr/bin/python</span></span>
<span class="line"><span class="LineNumber">   2 </span><span class="Comment"/></span>
<span class="line"><span class="LineNumber">   3 </span><span class="Comment"># calendar.py</span></span>
<span class="line"><span class="LineNumber">   4 </span><span class="Comment"/></span>
<span class="line"><span class="LineNumber">   5 </span><span class="ResWord">import</span> <span class="ID">sys</span></span>
<span class="line"><span class="LineNumber">   6 </span><span class="ResWord">from</span> <span class="ID">PyQt4</span> <span class="ResWord">import</span> <span class="ID">QtGui</span></span>
<span class="line"><span class="LineNumber">   7 </span><span class="ResWord">from</span> <span class="ID">PyQt4</span> <span class="ResWord">import</span> <span class="ID">QtCore</span></span>
<span class="line"><span class="LineNumber">   8 </span></span>
<span class="line"><span class="LineNumber">   9 </span></span>
<span class="line"><span class="LineNumber">  10 </span><span class="ResWord">class</span> <span class="ID">Calendar</span><span class="Operator">(</span><span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QWidget</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  11 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">=</span><span class="ID">None</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  12 </span>        <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QWidget</span><span class="Operator">.</span><span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">parent</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  13 </span></span>
<span class="line"><span class="LineNumber">  14 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">setGeometry</span><span class="Operator">(</span><span class="Number">300</span><span class="Operator">,</span> <span class="Number">300</span><span class="Operator">,</span> <span class="Number">350</span><span class="Operator">,</span> <span class="Number">300</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  15 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">setWindowTitle</span><span class="Operator">(</span><span class="String">'Calendar'</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  16 </span></span>
<span class="line"><span class="LineNumber">  17 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">cal</span> <span class="Operator">=</span> <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QCalendarWidget</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  18 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">cal</span><span class="Operator">.</span><span class="ID">setGridVisible</span><span class="Operator">(</span><span class="ID">True</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  19 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">cal</span><span class="Operator">.</span><span class="ID">move</span><span class="Operator">(</span><span class="Number">20</span><span class="Operator">,</span> <span class="Number">20</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  20 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">connect</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">cal</span><span class="Operator">,</span> <span class="ID">QtCore</span><span class="Operator">.</span><span class="ID">SIGNAL</span><span class="Operator">(</span><span class="String">'selectionChanged()'</span><span class="Operator">)</span><span
class="Operator">,</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">showDate</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  21 </span></span>
<span class="line"><span class="LineNumber">  22 </span></span>
<span class="line"><span class="LineNumber">  23 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">label</span> <span class="Operator">=</span> <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QLabel</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  24 </span>        <span class="ID">date</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">cal</span><span class="Operator">.</span><span class="ID">selectedDate</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  25 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">label</span><span class="Operator">.</span><span class="ID">setText</span><span class="Operator">(</span><span class="ID">str</span><span class="Operator">(</span><span class="ID">date</span><span class="Operator">.</span><span class="ID">toPyDate</span><span class="Operator">(</span><span class="Operator">)</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  26 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">label</span><span class="Operator">.</span><span class="ID">move</span><span class="Operator">(</span><span class="Number">130</span><span class="Operator">,</span> <span class="Number">260</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  27 </span></span>
<span class="line"><span class="LineNumber">  28 </span></span>
<span class="line"><span class="LineNumber">  29 </span>    <span class="ResWord">def</span> <span class="ID">showDate</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  30 </span>        <span class="ID">date</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">cal</span><span class="Operator">.</span><span class="ID">selectedDate</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  31 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">label</span><span class="Operator">.</span><span class="ID">setText</span><span class="Operator">(</span><span class="ID">str</span><span class="Operator">(</span><span class="ID">date</span><span class="Operator">.</span><span class="ID">toPyDate</span><span class="Operator">(</span><span class="Operator">)</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  32 </span></span>
<span class="line"><span class="LineNumber">  33 </span></span>
<span class="line"><span class="LineNumber">  34 </span><span class="ID">app</span> <span class="Operator">=</span> <span class="ID">QtGui</span><span class="Operator">.</span><span class="ID">QApplication</span><span class="Operator">(</span><span class="ID">sys</span><span class="Operator">.</span><span class="ID">argv</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  35 </span><span class="ID">icon</span> <span class="Operator">=</span> <span class="ID">Calendar</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  36 </span><span class="ID">icon</span><span class="Operator">.</span><span class="ID">show</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  37 </span><span class="ID">app</span><span class="Operator">.</span><span class="ID">exec_</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"/></span>
</pre></div><span id="line-400" class="anchor"/><span id="line-401" class="anchor"/><span id="line-402" class="anchor"/><span id="line-403" class="anchor"/><p class="line867"><em> The example has a calendar widget and a label widget. The currently selected date is displayed in the label widget.</em> <span id="line-404" class="anchor"/></p><ul><li style="list-style-type: none;">这个例子有一个日历组件和一个标签组件。当前选择的日期被显示在标签组件中。  <span id="line-405" class="anchor"/></li></ul><p class="line867"><span
id="line-406" class="anchor"/></p><pre> self.cal = QtGui.QCalendarWidget(self)
<span id="line-407" class="anchor"/></pre><span id="line-408" class="anchor"/><p class="line867"><em> We construct a calendar widget.</em> <span id="line-409" class="anchor"/></p><ul><li style="list-style-type: none;">我们创建一个日历组件。  <span id="line-410" class="anchor"/></li></ul><p class="line867"><span id="line-411" class="anchor"/></p><pre> self.connect(self.cal, QtCore.SIGNAL('selectionChanged()'), self.showDate)
<span id="line-412" class="anchor"/></pre><span id="line-413" class="anchor"/><p class="line867"><em> If we select a date from the widget, a selectionChanged() signal is emitted. We connect this method to the user defined showDate() method.</em> <span id="line-414" class="anchor"/></p><ul><li style="list-style-type: none;">如果我们通过组件选择日期，就会产生一个selectionChanged()信号，我们把这个信号连接的我们定义的showDate()方法。  <span id="line-415" class="anchor"/></li></ul><p class="line867"><span id="line-416"
class="anchor"/></p><pre> def showDate(self):
<span id="line-417" class="anchor"/>     date = self.cal.selectedDate()
<span id="line-418" class="anchor"/>     self.label.setText(str(date.toPyDate()))
<span id="line-419" class="anchor"/></pre><span id="line-420" class="anchor"/><p class="line867"><em> We retrieve the selected date calling the selectedDate() method. Then we transform the date object into string and set it to the label widget.</em> <span id="line-421" class="anchor"/></p><ul><li style="list-style-type: none;">我们通过调用selectedDate()方法接收到日期，然后我们将日期对象转换成字符串并传入标签组件。  <span id="line-422" class="anchor"/><span id="line-423" class="anchor"/></li></ul><p
class="line867"><strong> Calendar widget </strong> <span id="line-424" class="anchor"/><span id="line-425" class="anchor"/></p><p class="line874">Figure: Calendar widget <span id="line-426" class="anchor"/></p><div id="pagecomment">
<a name="pagecomment1"/>
<table border="0" class="pagecomment">
<tbody><tr><td colspan="5" style="border-width: 1px; margin: 10px 0pt;">

<script language="javascript">
<!--
function setCookie(name, value) {
var today = new Date();
var expire = new Date(today.getTime() + 60*60*24*365*1000);
document.cookie = name + "=" + encodeURIComponent(value) + "; expires=" + expire.toGMTString() + "; path=/moin";
}
//-->
</script>
<form onsubmit="setCookie('PG2AUTHOR', this.comauthor.value);" method="post" name="comment" action="Widgets_%E6%8F%92%E4%BB%B6#pagecomment1">
<table class="addcommentform">
<tbody><tr>
<td style="border-width: 0px; vertical-align: middle; font-size: 0.9em;"><textarea onblur="if (this.value=='') {this.value='Add your comment';};" onfocus="if (this.value=='Add your comment') {this.value='';};" style="font-size: 9pt;" cols="60" rows="4" name="comtext">Add your comment</textarea></td>
<td style="border-width: 0px; font-size: 0.9em; vertical-align: bottom;"><input type="submit" style="font-size: 9pt; width: 6em; height: 3em;" value="保存" name="button_save"/></td>
</tr>
<tr><td style="border-width: 0px; vertical-align: middle; font-size: 0.9em;">
Name<input type="text" onblur="if (this.value=='') {this.value='58';};" onfocus="if (this.value=='58') {this.value='';};" value="58" name="comauthor" maxlength="20" size="6" style="font-size: 9pt;"/>
Password4deL<input type="password" onblur="if (this.value=='') {this.value='fib8';};" onfocus="if (this.value=='fib8') {this.value='';};" value="fib8" name="compasswd" maxlength="10" size="4" style="font-size: 9pt;"/>
<input type="hidden" name="autopasswd" value="fib8"/>
<input type="radio" value=";)" name="comicon"/><img width="15" height="15" title=";)" src="/htdocs/woodpecker/img/smile4.png" alt=";)"/>
<input type="radio" value="=D" name="comicon"/>
<input type="radio" value="=)" name="comicon"/>
<input type="radio" value=":P" name="comicon"/>
<input type="radio" value=":(|)" name="comicon"/>
<input type="radio" value=":-|" name="comicon"/>
<input type="radio" value=":(" name="comicon"/><img width="15" height="15" title=":(" src="/htdocs/woodpecker/img/sad.png" alt=":("/>
<input type="radio" value="X-(" name="comicon"/><img width="15" height="15" title="X-(" src="/htdocs/woodpecker/img/angry.png" alt="X-("/>
<input type="radio" value="B-)" name="comicon"/><img width="15" height="15" title="B-)" src="/htdocs/woodpecker/img/smile2.png" alt="B-)"/>

</td>
<td style="border-width: 0px; vertical-align: middle; text-align: right; font-size: 9pt;"/>
</tr>
</tbody></table>
<input type="hidden" value="show" name="action"/>
<input type="hidden" value="4" name="comrev"/>
<input type="hidden" value="addcomment1" name="commentaction"/>
</form>
</td></tr>
<tr><td style="border-width: 0px; height: 20px;" class="commentblankline" colspan="5"/></tr>
<script language="javascript">
<!--
function requesttodeleteadmin1(delform, comkey) {
if (confirm("Really delete this comment?")) {;
delform.delkey.value = comkey;
delform.delpasswd.value = "****";
delform.submit();
}
}
function requesttodelete1(delform, comkey) {
var passwd = prompt("请输入一个密码!:", "");
if(!(passwd == "" || passwd == null)) {
delform.delkey.value = comkey;
delform.delpasswd.value = passwd;
delform.submit();
}
}
//-->
</script>
<form method="post" action="Widgets_%E6%8F%92%E4%BB%B6#pagecomment1" name="delform1"/>
<input type="hidden" name="action" value="show"/>
<input type="hidden" value="****" name="delpasswd"/>
<input type="hidden" value="" name="delkey"/>
<input type="hidden" value="delcomment1" name="commentaction"/>

<tr><td style="border-width: 1px 0px 0px; vertical-align: top; font-size: 9pt;" class="commenticon"/>
<td style="border-width: 1px 0px 0px; vertical-align: top; font-size: 9pt;" class="commentauthor">modrtfpgx jdwvf</td>
<td style="border-width: 1px 0px 0px; vertical-align: top; font-size: 9pt; width: 10px;"> </td>
<td style="border-width: 1px 0px 0px; vertical-align: top; font-size: 9pt;" class="commenttext">iqklxvhsu jkvnfu zpgs tlhq picq zxohujbs dikrwpty<br/></td>
<td nowrap="" style="border-width: 1px 0px 0px; vertical-align: top; text-align: right; font-size: 8pt;" class="commentdate">2008-07-30 20:33:36 <font style="font-size: 8pt;">
</font></td></tr>
<tr><td style="border-width: 1px 0px 0px; vertical-align: top; font-size: 9pt;" class="commenticon"/>
<td style="border-width: 1px 0px 0px; vertical-align: top; font-size: 9pt;" class="commentauthor">zxruycso sturnkix</td>
<td style="border-width: 1px 0px 0px; vertical-align: top; font-size: 9pt; width: 10px;"> </td>
<td style="border-width: 1px 0px 0px; vertical-align: top; font-size: 9pt;" class="commenttext">lyzhawopk vekyrd bcjky psbla opufnvm zgow astyige http://www.tvlk.vhqomy.com<br/></td>
<td nowrap="" style="border-width: 1px 0px 0px; vertical-align: top; text-align: right; font-size: 8pt;" class="commentdate">2008-07-30 20:33:54 <font style="font-size: 8pt;">
</font></td></tr>
<tr><td style="border-width: 1px 0px 0px; vertical-align: top; font-size: 9pt;" class="commenticon"/>
<td style="border-width: 1px 0px 0px; vertical-align: top; font-size: 9pt;" class="commentauthor">usflodp gnmsuhe</td>
<td style="border-width: 1px 0px 0px; vertical-align: top; font-size: 9pt; width: 10px;"> </td>
<td style="border-width: 1px 0px 0px; vertical-align: top; font-size: 9pt;" class="commenttext">eusm grehawk zfxckhjq fectvpo ynczmbjo pfzhti yvki <A href="http://www.wdfro.umnbeky.com">twdo tjdmsfwh</A><br/></td>
<td nowrap="" style="border-width: 1px 0px 0px; vertical-align: top; text-align: right; font-size: 8pt;" class="commentdate">2008-07-30 20:33:58 <font style="font-size: 8pt;">
</font></td></tr>
<tr><td style="border-width: 1px 0px 0px; vertical-align: top; font-size: 9pt;" class="commenticon"/>
<td style="border-width: 1px 0px 0px; vertical-align: top; font-size: 9pt;" class="commentauthor">rqojdn acrxqnuiy</td>
<td style="border-width: 1px 0px 0px; vertical-align: top; font-size: 9pt; width: 10px;"> </td>
<td style="border-width: 1px 0px 0px; vertical-align: top; font-size: 9pt;" class="commenttext">nqfwev ubpyvji qgoexar tisvyxre ilqgotfx osgm qhjzg [URL=http://www.dbtyuh.gkzn.com]eablckuhs rdpwm[/URL]<br/></td>
<td nowrap="" style="border-width: 1px 0px 0px; vertical-align: top; text-align: right; font-size: 8pt;" class="commentdate">2008-07-30 20:34:25 <font style="font-size: 8pt;">
</font></td></tr>
</tbody></table>
</div> <span id="line-427" class="anchor"/><span id="bottom" class="anchor"/></div>
